#!/usr/bin/env node
import e from"node:events";import t from"node:child_process";import i from"node:path";import s from"node:fs";import a from"node:process";import r from"readline";import n from"events";import o from"fs";import l from"path";function c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u,h,d={exports:{}},p={},m={},f={};function g(){if(u)return f;u=1;class e extends Error{constructor(e,t,i){super(i),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=t,this.exitCode=e,this.nestedError=void 0}}return f.CommanderError=e,f.InvalidArgumentError=class extends e{constructor(e){super(1,"commander.invalidArgument",e),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}},f}function b(){if(h)return m;h=1;const{InvalidArgumentError:e}=g();return m.Argument=class{constructor(e,t){switch(this.description=t||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,e[0]){case"<":this.required=!0,this._name=e.slice(1,-1);break;case"[":this.required=!1,this._name=e.slice(1,-1);break;default:this.required=!0,this._name=e}this._name.length>3&&"..."===this._name.slice(-3)&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(e,t){return t!==this.defaultValue&&Array.isArray(t)?t.concat(e):[e]}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}argParser(e){return this.parseArg=e,this}choices(t){return this.argChoices=t.slice(),this.parseArg=(t,i)=>{if(!this.argChoices.includes(t))throw new e(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(t,i):t},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}},m.humanReadableArgName=function(e){const t=e.name()+(!0===e.variadic?"...":"");return e.required?"<"+t+">":"["+t+"]"},m}var w,y={},v={};function S(){if(w)return v;w=1;const{humanReadableArgName:e}=b();function t(e){return e.replace(/\x1b\[\d*(;\d*)*m/g,"")}return v.Help=class{constructor(){this.helpWidth=void 0,this.minWidthToWrap=40,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}prepareContext(e){this.helpWidth=this.helpWidth??e.helpWidth??80}visibleCommands(e){const t=e.commands.filter((e=>!e._hidden)),i=e._getHelpCommand();return i&&!i._hidden&&t.push(i),this.sortSubcommands&&t.sort(((e,t)=>e.name().localeCompare(t.name()))),t}compareOptions(e,t){const i=e=>e.short?e.short.replace(/^-/,""):e.long.replace(/^--/,"");return i(e).localeCompare(i(t))}visibleOptions(e){const t=e.options.filter((e=>!e.hidden)),i=e._getHelpOption();if(i&&!i.hidden){const s=i.short&&e._findOption(i.short),a=i.long&&e._findOption(i.long);s||a?i.long&&!a?t.push(e.createOption(i.long,i.description)):i.short&&!s&&t.push(e.createOption(i.short,i.description)):t.push(i)}return this.sortOptions&&t.sort(this.compareOptions),t}visibleGlobalOptions(e){if(!this.showGlobalOptions)return[];const t=[];for(let i=e.parent;i;i=i.parent){const e=i.options.filter((e=>!e.hidden));t.push(...e)}return this.sortOptions&&t.sort(this.compareOptions),t}visibleArguments(e){return e._argsDescription&&e.registeredArguments.forEach((t=>{t.description=t.description||e._argsDescription[t.name()]||""})),e.registeredArguments.find((e=>e.description))?e.registeredArguments:[]}subcommandTerm(t){const i=t.registeredArguments.map((t=>e(t))).join(" ");return t._name+(t._aliases[0]?"|"+t._aliases[0]:"")+(t.options.length?" [options]":"")+(i?" "+i:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,t){return t.visibleCommands(e).reduce(((e,i)=>Math.max(e,this.displayWidth(t.styleSubcommandTerm(t.subcommandTerm(i))))),0)}longestOptionTermLength(e,t){return t.visibleOptions(e).reduce(((e,i)=>Math.max(e,this.displayWidth(t.styleOptionTerm(t.optionTerm(i))))),0)}longestGlobalOptionTermLength(e,t){return t.visibleGlobalOptions(e).reduce(((e,i)=>Math.max(e,this.displayWidth(t.styleOptionTerm(t.optionTerm(i))))),0)}longestArgumentTermLength(e,t){return t.visibleArguments(e).reduce(((e,i)=>Math.max(e,this.displayWidth(t.styleArgumentTerm(t.argumentTerm(i))))),0)}commandUsage(e){let t=e._name;e._aliases[0]&&(t=t+"|"+e._aliases[0]);let i="";for(let t=e.parent;t;t=t.parent)i=t.name()+" "+i;return i+t+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.summary()||e.description()}optionDescription(e){const t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map((e=>JSON.stringify(e))).join(", ")}`),void 0!==e.defaultValue){(e.required||e.optional||e.isBoolean()&&"boolean"==typeof e.defaultValue)&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`)}return void 0!==e.presetArg&&e.optional&&t.push(`preset: ${JSON.stringify(e.presetArg)}`),void 0!==e.envVar&&t.push(`env: ${e.envVar}`),t.length>0?`${e.description} (${t.join(", ")})`:e.description}argumentDescription(e){const t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map((e=>JSON.stringify(e))).join(", ")}`),void 0!==e.defaultValue&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),t.length>0){const i=`(${t.join(", ")})`;return e.description?`${e.description} ${i}`:i}return e.description}formatHelp(e,t){const i=t.padWidth(e,t),s=t.helpWidth??80;function a(e,s){return t.formatItem(e,i,s,t)}let r=[`${t.styleTitle("Usage:")} ${t.styleUsage(t.commandUsage(e))}`,""];const n=t.commandDescription(e);n.length>0&&(r=r.concat([t.boxWrap(t.styleCommandDescription(n),s),""]));const o=t.visibleArguments(e).map((e=>a(t.styleArgumentTerm(t.argumentTerm(e)),t.styleArgumentDescription(t.argumentDescription(e)))));o.length>0&&(r=r.concat([t.styleTitle("Arguments:"),...o,""]));const l=t.visibleOptions(e).map((e=>a(t.styleOptionTerm(t.optionTerm(e)),t.styleOptionDescription(t.optionDescription(e)))));if(l.length>0&&(r=r.concat([t.styleTitle("Options:"),...l,""])),t.showGlobalOptions){const i=t.visibleGlobalOptions(e).map((e=>a(t.styleOptionTerm(t.optionTerm(e)),t.styleOptionDescription(t.optionDescription(e)))));i.length>0&&(r=r.concat([t.styleTitle("Global Options:"),...i,""]))}const c=t.visibleCommands(e).map((e=>a(t.styleSubcommandTerm(t.subcommandTerm(e)),t.styleSubcommandDescription(t.subcommandDescription(e)))));return c.length>0&&(r=r.concat([t.styleTitle("Commands:"),...c,""])),r.join("\n")}displayWidth(e){return t(e).length}styleTitle(e){return e}styleUsage(e){return e.split(" ").map((e=>"[options]"===e?this.styleOptionText(e):"[command]"===e?this.styleSubcommandText(e):"["===e[0]||"<"===e[0]?this.styleArgumentText(e):this.styleCommandText(e))).join(" ")}styleCommandDescription(e){return this.styleDescriptionText(e)}styleOptionDescription(e){return this.styleDescriptionText(e)}styleSubcommandDescription(e){return this.styleDescriptionText(e)}styleArgumentDescription(e){return this.styleDescriptionText(e)}styleDescriptionText(e){return e}styleOptionTerm(e){return this.styleOptionText(e)}styleSubcommandTerm(e){return e.split(" ").map((e=>"[options]"===e?this.styleOptionText(e):"["===e[0]||"<"===e[0]?this.styleArgumentText(e):this.styleSubcommandText(e))).join(" ")}styleArgumentTerm(e){return this.styleArgumentText(e)}styleOptionText(e){return e}styleArgumentText(e){return e}styleSubcommandText(e){return e}styleCommandText(e){return e}padWidth(e,t){return Math.max(t.longestOptionTermLength(e,t),t.longestGlobalOptionTermLength(e,t),t.longestSubcommandTermLength(e,t),t.longestArgumentTermLength(e,t))}preformatted(e){return/\n[^\S\r\n]/.test(e)}formatItem(e,t,i,s){const a=" ".repeat(2);if(!i)return a+e;const r=e.padEnd(t+e.length-s.displayWidth(e)),n=(this.helpWidth??80)-t-2-2;let o;if(n<this.minWidthToWrap||s.preformatted(i))o=i;else{o=s.boxWrap(i,n).replace(/\n/g,"\n"+" ".repeat(t+2))}return a+r+" ".repeat(2)+o.replace(/\n/g,`\n${a}`)}boxWrap(e,t){if(t<this.minWidthToWrap)return e;const i=e.split(/\r\n|\n/),s=/[\s]*[^\s]+/g,a=[];return i.forEach((e=>{const i=e.match(s);if(null===i)return void a.push("");let r=[i.shift()],n=this.displayWidth(r[0]);i.forEach((e=>{const i=this.displayWidth(e);if(n+i<=t)return r.push(e),void(n+=i);a.push(r.join(""));const s=e.trimStart();r=[s],n=this.displayWidth(s)})),a.push(r.join(""))})),a.join("\n")}},v.stripColor=t,v}var T,_={};function x(){if(T)return _;T=1;const{InvalidArgumentError:e}=g();function t(e){return e.split("-").reduce(((e,t)=>e+t[0].toUpperCase()+t.slice(1)))}return _.Option=class{constructor(e,t){this.flags=e,this.description=t||"",this.required=e.includes("<"),this.optional=e.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(e),this.mandatory=!1;const i=function(e){let t,i;const s=/^-[^-]$/,a=/^--[^-]/,r=e.split(/[ |,]+/).concat("guard");s.test(r[0])&&(t=r.shift());a.test(r[0])&&(i=r.shift());!t&&s.test(r[0])&&(t=r.shift());!t&&a.test(r[0])&&(t=i,i=r.shift());if(r[0].startsWith("-")){const t=r[0],i=`option creation failed due to '${t}' in option flags '${e}'`;if(/^-[^-][^-]/.test(t))throw new Error(`${i}\n- a short flag is a single dash and a single character\n  - either use a single dash and a single character (for a short flag)\n  - or use a double dash for a long option (and can have two, like '--ws, --workspace')`);if(s.test(t))throw new Error(`${i}\n- too many short flags`);if(a.test(t))throw new Error(`${i}\n- too many long flags`);throw new Error(`${i}\n- unrecognised flag format`)}if(void 0===t&&void 0===i)throw new Error(`option creation failed due to no flags found in '${e}'.`);return{shortFlag:t,longFlag:i}}(e);this.short=i.shortFlag,this.long=i.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}preset(e){return this.presetArg=e,this}conflicts(e){return this.conflictsWith=this.conflictsWith.concat(e),this}implies(e){let t=e;return"string"==typeof e&&(t={[e]:!0}),this.implied=Object.assign(this.implied||{},t),this}env(e){return this.envVar=e,this}argParser(e){return this.parseArg=e,this}makeOptionMandatory(e=!0){return this.mandatory=!!e,this}hideHelp(e=!0){return this.hidden=!!e,this}_concatValue(e,t){return t!==this.defaultValue&&Array.isArray(t)?t.concat(e):[e]}choices(t){return this.argChoices=t.slice(),this.parseArg=(t,i)=>{if(!this.argChoices.includes(t))throw new e(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(t,i):t},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.negate?t(this.name().replace(/^no-/,"")):t(this.name())}is(e){return this.short===e||this.long===e}isBoolean(){return!this.required&&!this.optional&&!this.negate}},_.DualOptions=class{constructor(e){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,e.forEach((e=>{e.negate?this.negativeOptions.set(e.attributeName(),e):this.positiveOptions.set(e.attributeName(),e)})),this.negativeOptions.forEach(((e,t)=>{this.positiveOptions.has(t)&&this.dualOptions.add(t)}))}valueFromOption(e,t){const i=t.attributeName();if(!this.dualOptions.has(i))return!0;const s=this.negativeOptions.get(i).presetArg,a=void 0!==s&&s;return t.negate===(a===e)}},_}var R,A,k,C,M={};function O(){if(R)return M;R=1;return M.suggestSimilar=function(e,t){if(!t||0===t.length)return"";t=Array.from(new Set(t));const i=e.startsWith("--");i&&(e=e.slice(2),t=t.map((e=>e.slice(2))));let s=[],a=3;return t.forEach((t=>{if(t.length<=1)return;const i=function(e,t){if(Math.abs(e.length-t.length)>3)return Math.max(e.length,t.length);const i=[];for(let t=0;t<=e.length;t++)i[t]=[t];for(let e=0;e<=t.length;e++)i[0][e]=e;for(let s=1;s<=t.length;s++)for(let a=1;a<=e.length;a++){let r=1;r=e[a-1]===t[s-1]?0:1,i[a][s]=Math.min(i[a-1][s]+1,i[a][s-1]+1,i[a-1][s-1]+r),a>1&&s>1&&e[a-1]===t[s-2]&&e[a-2]===t[s-1]&&(i[a][s]=Math.min(i[a][s],i[a-2][s-2]+1))}return i[e.length][t.length]}(e,t),r=Math.max(e.length,t.length);(r-i)/r>.4&&(i<a?(a=i,s=[t]):i===a&&s.push(t))})),s.sort(((e,t)=>e.localeCompare(t))),i&&(s=s.map((e=>`--${e}`))),s.length>1?`\n(Did you mean one of ${s.join(", ")}?)`:1===s.length?`\n(Did you mean ${s[0]}?)`:""},M}function I(){if(k)return p;k=1;const{Argument:r}=b(),{Command:n}=function(){if(A)return y;A=1;const r=e.EventEmitter,n=t,o=i,l=s,c=a,{Argument:u,humanReadableArgName:h}=b(),{CommanderError:d}=g(),{Help:p,stripColor:m}=S(),{Option:f,DualOptions:w}=x(),{suggestSimilar:v}=O();class T extends r{constructor(e){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!1,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=e||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._savedState=null,this._outputConfiguration={writeOut:e=>c.stdout.write(e),writeErr:e=>c.stderr.write(e),outputError:(e,t)=>t(e),getOutHelpWidth:()=>c.stdout.isTTY?c.stdout.columns:void 0,getErrHelpWidth:()=>c.stderr.isTTY?c.stderr.columns:void 0,getOutHasColors:()=>R()??(c.stdout.isTTY&&c.stdout.hasColors?.()),getErrHasColors:()=>R()??(c.stderr.isTTY&&c.stderr.hasColors?.()),stripColor:e=>m(e)},this._hidden=!1,this._helpOption=void 0,this._addImplicitHelpCommand=void 0,this._helpCommand=void 0,this._helpConfiguration={}}copyInheritedSettings(e){return this._outputConfiguration=e._outputConfiguration,this._helpOption=e._helpOption,this._helpCommand=e._helpCommand,this._helpConfiguration=e._helpConfiguration,this._exitCallback=e._exitCallback,this._storeOptionsAsProperties=e._storeOptionsAsProperties,this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue,this._allowExcessArguments=e._allowExcessArguments,this._enablePositionalOptions=e._enablePositionalOptions,this._showHelpAfterError=e._showHelpAfterError,this._showSuggestionAfterError=e._showSuggestionAfterError,this}_getCommandAndAncestors(){const e=[];for(let t=this;t;t=t.parent)e.push(t);return e}command(e,t,i){let s=t,a=i;"object"==typeof s&&null!==s&&(a=s,s=null),a=a||{};const[,r,n]=e.match(/([^ ]+) *(.*)/),o=this.createCommand(r);return s&&(o.description(s),o._executableHandler=!0),a.isDefault&&(this._defaultCommandName=o._name),o._hidden=!(!a.noHelp&&!a.hidden),o._executableFile=a.executableFile||null,n&&o.arguments(n),this._registerCommand(o),o.parent=this,o.copyInheritedSettings(this),s?this:o}createCommand(e){return new T(e)}createHelp(){return Object.assign(new p,this.configureHelp())}configureHelp(e){return void 0===e?this._helpConfiguration:(this._helpConfiguration=e,this)}configureOutput(e){return void 0===e?this._outputConfiguration:(Object.assign(this._outputConfiguration,e),this)}showHelpAfterError(e=!0){return"string"!=typeof e&&(e=!!e),this._showHelpAfterError=e,this}showSuggestionAfterError(e=!0){return this._showSuggestionAfterError=!!e,this}addCommand(e,t){if(!e._name)throw new Error("Command passed to .addCommand() must have a name\n- specify the name in Command constructor or using .name()");return(t=t||{}).isDefault&&(this._defaultCommandName=e._name),(t.noHelp||t.hidden)&&(e._hidden=!0),this._registerCommand(e),e.parent=this,e._checkForBrokenPassThrough(),this}createArgument(e,t){return new u(e,t)}argument(e,t,i,s){const a=this.createArgument(e,t);return"function"==typeof i?a.default(s).argParser(i):a.default(i),this.addArgument(a),this}arguments(e){return e.trim().split(/ +/).forEach((e=>{this.argument(e)})),this}addArgument(e){const t=this.registeredArguments.slice(-1)[0];if(t&&t.variadic)throw new Error(`only the last argument can be variadic '${t.name()}'`);if(e.required&&void 0!==e.defaultValue&&void 0===e.parseArg)throw new Error(`a default value for a required argument is never used: '${e.name()}'`);return this.registeredArguments.push(e),this}helpCommand(e,t){if("boolean"==typeof e)return this._addImplicitHelpCommand=e,this;e=e??"help [command]";const[,i,s]=e.match(/([^ ]+) *(.*)/),a=t??"display help for command",r=this.createCommand(i);return r.helpOption(!1),s&&r.arguments(s),a&&r.description(a),this._addImplicitHelpCommand=!0,this._helpCommand=r,this}addHelpCommand(e,t){return"object"!=typeof e?(this.helpCommand(e,t),this):(this._addImplicitHelpCommand=!0,this._helpCommand=e,this)}_getHelpCommand(){return this._addImplicitHelpCommand??(this.commands.length&&!this._actionHandler&&!this._findCommand("help"))?(void 0===this._helpCommand&&this.helpCommand(void 0,void 0),this._helpCommand):null}hook(e,t){const i=["preSubcommand","preAction","postAction"];if(!i.includes(e))throw new Error(`Unexpected value for event passed to hook : '${e}'.\nExpecting one of '${i.join("', '")}'`);return this._lifeCycleHooks[e]?this._lifeCycleHooks[e].push(t):this._lifeCycleHooks[e]=[t],this}exitOverride(e){return this._exitCallback=e||(e=>{if("commander.executeSubCommandAsync"!==e.code)throw e}),this}_exit(e,t,i){this._exitCallback&&this._exitCallback(new d(e,t,i)),c.exit(e)}action(e){return this._actionHandler=t=>{const i=this.registeredArguments.length,s=t.slice(0,i);return this._storeOptionsAsProperties?s[i]=this:s[i]=this.opts(),s.push(this),e.apply(this,s)},this}createOption(e,t){return new f(e,t)}_callParseArg(e,t,i,s){try{return e.parseArg(t,i)}catch(e){if("commander.invalidArgument"===e.code){const t=`${s} ${e.message}`;this.error(t,{exitCode:e.exitCode,code:e.code})}throw e}}_registerOption(e){const t=e.short&&this._findOption(e.short)||e.long&&this._findOption(e.long);if(t){const i=e.long&&this._findOption(e.long)?e.long:e.short;throw new Error(`Cannot add option '${e.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${i}'\n-  already used by option '${t.flags}'`)}this.options.push(e)}_registerCommand(e){const t=e=>[e.name()].concat(e.aliases()),i=t(e).find((e=>this._findCommand(e)));if(i){const s=t(this._findCommand(i)).join("|"),a=t(e).join("|");throw new Error(`cannot add command '${a}' as already have command '${s}'`)}this.commands.push(e)}addOption(e){this._registerOption(e);const t=e.name(),i=e.attributeName();if(e.negate){const t=e.long.replace(/^--no-/,"--");this._findOption(t)||this.setOptionValueWithSource(i,void 0===e.defaultValue||e.defaultValue,"default")}else void 0!==e.defaultValue&&this.setOptionValueWithSource(i,e.defaultValue,"default");const s=(t,s,a)=>{null==t&&void 0!==e.presetArg&&(t=e.presetArg);const r=this.getOptionValue(i);null!==t&&e.parseArg?t=this._callParseArg(e,t,r,s):null!==t&&e.variadic&&(t=e._concatValue(t,r)),null==t&&(t=!e.negate&&(!(!e.isBoolean()&&!e.optional)||"")),this.setOptionValueWithSource(i,t,a)};return this.on("option:"+t,(t=>{const i=`error: option '${e.flags}' argument '${t}' is invalid.`;s(t,i,"cli")})),e.envVar&&this.on("optionEnv:"+t,(t=>{const i=`error: option '${e.flags}' value '${t}' from env '${e.envVar}' is invalid.`;s(t,i,"env")})),this}_optionEx(e,t,i,s,a){if("object"==typeof t&&t instanceof f)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");const r=this.createOption(t,i);if(r.makeOptionMandatory(!!e.mandatory),"function"==typeof s)r.default(a).argParser(s);else if(s instanceof RegExp){const e=s;s=(t,i)=>{const s=e.exec(t);return s?s[0]:i},r.default(a).argParser(s)}else r.default(s);return this.addOption(r)}option(e,t,i,s){return this._optionEx({},e,t,i,s)}requiredOption(e,t,i,s){return this._optionEx({mandatory:!0},e,t,i,s)}combineFlagAndOptionalValue(e=!0){return this._combineFlagAndOptionalValue=!!e,this}allowUnknownOption(e=!0){return this._allowUnknownOption=!!e,this}allowExcessArguments(e=!0){return this._allowExcessArguments=!!e,this}enablePositionalOptions(e=!0){return this._enablePositionalOptions=!!e,this}passThroughOptions(e=!0){return this._passThroughOptions=!!e,this._checkForBrokenPassThrough(),this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions)throw new Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}storeOptionsAsProperties(e=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");if(Object.keys(this._optionValues).length)throw new Error("call .storeOptionsAsProperties() before setting option values");return this._storeOptionsAsProperties=!!e,this}getOptionValue(e){return this._storeOptionsAsProperties?this[e]:this._optionValues[e]}setOptionValue(e,t){return this.setOptionValueWithSource(e,t,void 0)}setOptionValueWithSource(e,t,i){return this._storeOptionsAsProperties?this[e]=t:this._optionValues[e]=t,this._optionValueSources[e]=i,this}getOptionValueSource(e){return this._optionValueSources[e]}getOptionValueSourceWithGlobals(e){let t;return this._getCommandAndAncestors().forEach((i=>{void 0!==i.getOptionValueSource(e)&&(t=i.getOptionValueSource(e))})),t}_prepareUserArgs(e,t){if(void 0!==e&&!Array.isArray(e))throw new Error("first parameter to parse must be array or undefined");if(t=t||{},void 0===e&&void 0===t.from){c.versions?.electron&&(t.from="electron");const e=c.execArgv??[];(e.includes("-e")||e.includes("--eval")||e.includes("-p")||e.includes("--print"))&&(t.from="eval")}let i;switch(void 0===e&&(e=c.argv),this.rawArgs=e.slice(),t.from){case void 0:case"node":this._scriptPath=e[1],i=e.slice(2);break;case"electron":c.defaultApp?(this._scriptPath=e[1],i=e.slice(2)):i=e.slice(1);break;case"user":i=e.slice(0);break;case"eval":i=e.slice(1);break;default:throw new Error(`unexpected parse option { from: '${t.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",i}parse(e,t){this._prepareForParse();const i=this._prepareUserArgs(e,t);return this._parseCommand([],i),this}async parseAsync(e,t){this._prepareForParse();const i=this._prepareUserArgs(e,t);return await this._parseCommand([],i),this}_prepareForParse(){null===this._savedState?this.saveStateBeforeParse():this.restoreStateBeforeParse()}saveStateBeforeParse(){this._savedState={_name:this._name,_optionValues:{...this._optionValues},_optionValueSources:{...this._optionValueSources}}}restoreStateBeforeParse(){if(this._storeOptionsAsProperties)throw new Error("Can not call parse again when storeOptionsAsProperties is true.\n- either make a new Command for each call to parse, or stop storing options as properties");this._name=this._savedState._name,this._scriptPath=null,this.rawArgs=[],this._optionValues={...this._savedState._optionValues},this._optionValueSources={...this._savedState._optionValueSources},this.args=[],this.processedArgs=[]}_checkForMissingExecutable(e,t,i){if(!l.existsSync(e))throw new Error(`'${e}' does not exist\n - if '${i}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name or path\n - ${t?`searched for local subcommand relative to directory '${t}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory"}`)}_executeSubCommand(e,t){t=t.slice();let i=!1;const s=[".js",".ts",".tsx",".mjs",".cjs"];function a(e,t){const i=o.resolve(e,t);if(l.existsSync(i))return i;if(s.includes(o.extname(t)))return;const a=s.find((e=>l.existsSync(`${i}${e}`)));return a?`${i}${a}`:void 0}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let r,u=e._executableFile||`${this._name}-${e._name}`,h=this._executableDir||"";if(this._scriptPath){let e;try{e=l.realpathSync(this._scriptPath)}catch{e=this._scriptPath}h=o.resolve(o.dirname(e),h)}if(h){let t=a(h,u);if(!t&&!e._executableFile&&this._scriptPath){const i=o.basename(this._scriptPath,o.extname(this._scriptPath));i!==this._name&&(t=a(h,`${i}-${e._name}`))}u=t||u}i=s.includes(o.extname(u)),"win32"!==c.platform?i?(t.unshift(u),t=_(c.execArgv).concat(t),r=n.spawn(c.argv[0],t,{stdio:"inherit"})):r=n.spawn(u,t,{stdio:"inherit"}):(this._checkForMissingExecutable(u,h,e._name),t.unshift(u),t=_(c.execArgv).concat(t),r=n.spawn(c.execPath,t,{stdio:"inherit"})),r.killed||["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((e=>{c.on(e,(()=>{!1===r.killed&&null===r.exitCode&&r.kill(e)}))}));const p=this._exitCallback;r.on("close",(e=>{e=e??1,p?p(new d(e,"commander.executeSubCommandAsync","(close)")):c.exit(e)})),r.on("error",(t=>{if("ENOENT"===t.code)this._checkForMissingExecutable(u,h,e._name);else if("EACCES"===t.code)throw new Error(`'${u}' not executable`);if(p){const e=new d(1,"commander.executeSubCommandAsync","(error)");e.nestedError=t,p(e)}else c.exit(1)})),this.runningCommand=r}_dispatchSubcommand(e,t,i){const s=this._findCommand(e);let a;return s||this.help({error:!0}),s._prepareForParse(),a=this._chainOrCallSubCommandHook(a,s,"preSubcommand"),a=this._chainOrCall(a,(()=>{if(!s._executableHandler)return s._parseCommand(t,i);this._executeSubCommand(s,t.concat(i))})),a}_dispatchHelpCommand(e){e||this.help();const t=this._findCommand(e);return t&&!t._executableHandler&&t.help(),this._dispatchSubcommand(e,[],[this._getHelpOption()?.long??this._getHelpOption()?.short??"--help"])}_checkNumberOfArguments(){this.registeredArguments.forEach(((e,t)=>{e.required&&null==this.args[t]&&this.missingArgument(e.name())})),this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic||this.args.length>this.registeredArguments.length&&this._excessArguments(this.args)}_processArguments(){const e=(e,t,i)=>{let s=t;if(null!==t&&e.parseArg){const a=`error: command-argument value '${t}' is invalid for argument '${e.name()}'.`;s=this._callParseArg(e,t,i,a)}return s};this._checkNumberOfArguments();const t=[];this.registeredArguments.forEach(((i,s)=>{let a=i.defaultValue;i.variadic?s<this.args.length?(a=this.args.slice(s),i.parseArg&&(a=a.reduce(((t,s)=>e(i,s,t)),i.defaultValue))):void 0===a&&(a=[]):s<this.args.length&&(a=this.args[s],i.parseArg&&(a=e(i,a,i.defaultValue))),t[s]=a})),this.processedArgs=t}_chainOrCall(e,t){return e&&e.then&&"function"==typeof e.then?e.then((()=>t())):t()}_chainOrCallHooks(e,t){let i=e;const s=[];return this._getCommandAndAncestors().reverse().filter((e=>void 0!==e._lifeCycleHooks[t])).forEach((e=>{e._lifeCycleHooks[t].forEach((t=>{s.push({hookedCommand:e,callback:t})}))})),"postAction"===t&&s.reverse(),s.forEach((e=>{i=this._chainOrCall(i,(()=>e.callback(e.hookedCommand,this)))})),i}_chainOrCallSubCommandHook(e,t,i){let s=e;return void 0!==this._lifeCycleHooks[i]&&this._lifeCycleHooks[i].forEach((e=>{s=this._chainOrCall(s,(()=>e(this,t)))})),s}_parseCommand(e,t){const i=this.parseOptions(t);if(this._parseOptionsEnv(),this._parseOptionsImplied(),e=e.concat(i.operands),t=i.unknown,this.args=e.concat(t),e&&this._findCommand(e[0]))return this._dispatchSubcommand(e[0],e.slice(1),t);if(this._getHelpCommand()&&e[0]===this._getHelpCommand().name())return this._dispatchHelpCommand(e[1]);if(this._defaultCommandName)return this._outputHelpIfRequested(t),this._dispatchSubcommand(this._defaultCommandName,e,t);!this.commands.length||0!==this.args.length||this._actionHandler||this._defaultCommandName||this.help({error:!0}),this._outputHelpIfRequested(i.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();const s=()=>{i.unknown.length>0&&this.unknownOption(i.unknown[0])},a=`command:${this.name()}`;if(this._actionHandler){let i;return s(),this._processArguments(),i=this._chainOrCallHooks(i,"preAction"),i=this._chainOrCall(i,(()=>this._actionHandler(this.processedArgs))),this.parent&&(i=this._chainOrCall(i,(()=>{this.parent.emit(a,e,t)}))),i=this._chainOrCallHooks(i,"postAction"),i}if(this.parent&&this.parent.listenerCount(a))s(),this._processArguments(),this.parent.emit(a,e,t);else if(e.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",e,t);this.listenerCount("command:*")?this.emit("command:*",e,t):this.commands.length?this.unknownCommand():(s(),this._processArguments())}else this.commands.length?(s(),this.help({error:!0})):(s(),this._processArguments())}_findCommand(e){if(e)return this.commands.find((t=>t._name===e||t._aliases.includes(e)))}_findOption(e){return this.options.find((t=>t.is(e)))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach((e=>{e.options.forEach((t=>{t.mandatory&&void 0===e.getOptionValue(t.attributeName())&&e.missingMandatoryOptionValue(t)}))}))}_checkForConflictingLocalOptions(){const e=this.options.filter((e=>{const t=e.attributeName();return void 0!==this.getOptionValue(t)&&"default"!==this.getOptionValueSource(t)})),t=e.filter((e=>e.conflictsWith.length>0));t.forEach((t=>{const i=e.find((e=>t.conflictsWith.includes(e.attributeName())));i&&this._conflictingOption(t,i)}))}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach((e=>{e._checkForConflictingLocalOptions()}))}parseOptions(e){const t=[],i=[];let s=t;const a=e.slice();function r(e){return e.length>1&&"-"===e[0]}let n=null;for(;a.length;){const e=a.shift();if("--"===e){s===i&&s.push(e),s.push(...a);break}if(!n||r(e)){if(n=null,r(e)){const t=this._findOption(e);if(t){if(t.required){const e=a.shift();void 0===e&&this.optionMissingArgument(t),this.emit(`option:${t.name()}`,e)}else if(t.optional){let e=null;a.length>0&&!r(a[0])&&(e=a.shift()),this.emit(`option:${t.name()}`,e)}else this.emit(`option:${t.name()}`);n=t.variadic?t:null;continue}}if(e.length>2&&"-"===e[0]&&"-"!==e[1]){const t=this._findOption(`-${e[1]}`);if(t){t.required||t.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${t.name()}`,e.slice(2)):(this.emit(`option:${t.name()}`),a.unshift(`-${e.slice(2)}`));continue}}if(/^--[^=]+=/.test(e)){const t=e.indexOf("="),i=this._findOption(e.slice(0,t));if(i&&(i.required||i.optional)){this.emit(`option:${i.name()}`,e.slice(t+1));continue}}if(r(e)&&(s=i),(this._enablePositionalOptions||this._passThroughOptions)&&0===t.length&&0===i.length){if(this._findCommand(e)){t.push(e),a.length>0&&i.push(...a);break}if(this._getHelpCommand()&&e===this._getHelpCommand().name()){t.push(e),a.length>0&&t.push(...a);break}if(this._defaultCommandName){i.push(e),a.length>0&&i.push(...a);break}}if(this._passThroughOptions){s.push(e),a.length>0&&s.push(...a);break}s.push(e)}else this.emit(`option:${n.name()}`,e)}return{operands:t,unknown:i}}opts(){if(this._storeOptionsAsProperties){const e={},t=this.options.length;for(let i=0;i<t;i++){const t=this.options[i].attributeName();e[t]=t===this._versionOptionName?this._version:this[t]}return e}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce(((e,t)=>Object.assign(e,t.opts())),{})}error(e,t){this._outputConfiguration.outputError(`${e}\n`,this._outputConfiguration.writeErr),"string"==typeof this._showHelpAfterError?this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`):this._showHelpAfterError&&(this._outputConfiguration.writeErr("\n"),this.outputHelp({error:!0}));const i=t||{},s=i.exitCode||1,a=i.code||"commander.error";this._exit(s,a,e)}_parseOptionsEnv(){this.options.forEach((e=>{if(e.envVar&&e.envVar in c.env){const t=e.attributeName();(void 0===this.getOptionValue(t)||["default","config","env"].includes(this.getOptionValueSource(t)))&&(e.required||e.optional?this.emit(`optionEnv:${e.name()}`,c.env[e.envVar]):this.emit(`optionEnv:${e.name()}`))}}))}_parseOptionsImplied(){const e=new w(this.options),t=e=>void 0!==this.getOptionValue(e)&&!["default","implied"].includes(this.getOptionValueSource(e));this.options.filter((i=>void 0!==i.implied&&t(i.attributeName())&&e.valueFromOption(this.getOptionValue(i.attributeName()),i))).forEach((e=>{Object.keys(e.implied).filter((e=>!t(e))).forEach((t=>{this.setOptionValueWithSource(t,e.implied[t],"implied")}))}))}missingArgument(e){const t=`error: missing required argument '${e}'`;this.error(t,{code:"commander.missingArgument"})}optionMissingArgument(e){const t=`error: option '${e.flags}' argument missing`;this.error(t,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(e){const t=`error: required option '${e.flags}' not specified`;this.error(t,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(e,t){const i=e=>{const t=e.attributeName(),i=this.getOptionValue(t),s=this.options.find((e=>e.negate&&t===e.attributeName())),a=this.options.find((e=>!e.negate&&t===e.attributeName()));return s&&(void 0===s.presetArg&&!1===i||void 0!==s.presetArg&&i===s.presetArg)?s:a||e},s=e=>{const t=i(e),s=t.attributeName();return"env"===this.getOptionValueSource(s)?`environment variable '${t.envVar}'`:`option '${t.flags}'`},a=`error: ${s(e)} cannot be used with ${s(t)}`;this.error(a,{code:"commander.conflictingOption"})}unknownOption(e){if(this._allowUnknownOption)return;let t="";if(e.startsWith("--")&&this._showSuggestionAfterError){let i=[],s=this;do{const e=s.createHelp().visibleOptions(s).filter((e=>e.long)).map((e=>e.long));i=i.concat(e),s=s.parent}while(s&&!s._enablePositionalOptions);t=v(e,i)}const i=`error: unknown option '${e}'${t}`;this.error(i,{code:"commander.unknownOption"})}_excessArguments(e){if(this._allowExcessArguments)return;const t=this.registeredArguments.length,i=1===t?"":"s",s=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${t} argument${i} but got ${e.length}.`;this.error(s,{code:"commander.excessArguments"})}unknownCommand(){const e=this.args[0];let t="";if(this._showSuggestionAfterError){const i=[];this.createHelp().visibleCommands(this).forEach((e=>{i.push(e.name()),e.alias()&&i.push(e.alias())})),t=v(e,i)}const i=`error: unknown command '${e}'${t}`;this.error(i,{code:"commander.unknownCommand"})}version(e,t,i){if(void 0===e)return this._version;this._version=e,t=t||"-V, --version",i=i||"output the version number";const s=this.createOption(t,i);return this._versionOptionName=s.attributeName(),this._registerOption(s),this.on("option:"+s.name(),(()=>{this._outputConfiguration.writeOut(`${e}\n`),this._exit(0,"commander.version",e)})),this}description(e,t){return void 0===e&&void 0===t?this._description:(this._description=e,t&&(this._argsDescription=t),this)}summary(e){return void 0===e?this._summary:(this._summary=e,this)}alias(e){if(void 0===e)return this._aliases[0];let t=this;if(0!==this.commands.length&&this.commands[this.commands.length-1]._executableHandler&&(t=this.commands[this.commands.length-1]),e===t._name)throw new Error("Command alias can't be the same as its name");const i=this.parent?._findCommand(e);if(i){const t=[i.name()].concat(i.aliases()).join("|");throw new Error(`cannot add alias '${e}' to command '${this.name()}' as already have command '${t}'`)}return t._aliases.push(e),this}aliases(e){return void 0===e?this._aliases:(e.forEach((e=>this.alias(e))),this)}usage(e){if(void 0===e){if(this._usage)return this._usage;const e=this.registeredArguments.map((e=>h(e)));return[].concat(this.options.length||null!==this._helpOption?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?e:[]).join(" ")}return this._usage=e,this}name(e){return void 0===e?this._name:(this._name=e,this)}nameFromFilename(e){return this._name=o.basename(e,o.extname(e)),this}executableDir(e){return void 0===e?this._executableDir:(this._executableDir=e,this)}helpInformation(e){const t=this.createHelp(),i=this._getOutputContext(e);t.prepareContext({error:i.error,helpWidth:i.helpWidth,outputHasColors:i.hasColors});const s=t.formatHelp(this,t);return i.hasColors?s:this._outputConfiguration.stripColor(s)}_getOutputContext(e){const t=!!(e=e||{}).error;let i,s,a;return t?(i=e=>this._outputConfiguration.writeErr(e),s=this._outputConfiguration.getErrHasColors(),a=this._outputConfiguration.getErrHelpWidth()):(i=e=>this._outputConfiguration.writeOut(e),s=this._outputConfiguration.getOutHasColors(),a=this._outputConfiguration.getOutHelpWidth()),{error:t,write:e=>(s||(e=this._outputConfiguration.stripColor(e)),i(e)),hasColors:s,helpWidth:a}}outputHelp(e){let t;"function"==typeof e&&(t=e,e=void 0);const i=this._getOutputContext(e),s={error:i.error,write:i.write,command:this};this._getCommandAndAncestors().reverse().forEach((e=>e.emit("beforeAllHelp",s))),this.emit("beforeHelp",s);let a=this.helpInformation({error:i.error});if(t&&(a=t(a),"string"!=typeof a&&!Buffer.isBuffer(a)))throw new Error("outputHelp callback must return a string or a Buffer");i.write(a),this._getHelpOption()?.long&&this.emit(this._getHelpOption().long),this.emit("afterHelp",s),this._getCommandAndAncestors().forEach((e=>e.emit("afterAllHelp",s)))}helpOption(e,t){return"boolean"==typeof e?(this._helpOption=e?this._helpOption??void 0:null,this):(e=e??"-h, --help",t=t??"display help for command",this._helpOption=this.createOption(e,t),this)}_getHelpOption(){return void 0===this._helpOption&&this.helpOption(void 0,void 0),this._helpOption}addHelpOption(e){return this._helpOption=e,this}help(e){this.outputHelp(e);let t=Number(c.exitCode??0);0===t&&e&&"function"!=typeof e&&e.error&&(t=1),this._exit(t,"commander.help","(outputHelp)")}addHelpText(e,t){const i=["beforeAll","before","after","afterAll"];if(!i.includes(e))throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${i.join("', '")}'`);const s=`${e}Help`;return this.on(s,(e=>{let i;i="function"==typeof t?t({error:e.error,command:e.command}):t,i&&e.write(`${i}\n`)})),this}_outputHelpIfRequested(e){const t=this._getHelpOption();t&&e.find((e=>t.is(e)))&&(this.outputHelp(),this._exit(0,"commander.helpDisplayed","(outputHelp)"))}}function _(e){return e.map((e=>{if(!e.startsWith("--inspect"))return e;let t,i,s="127.0.0.1",a="9229";return null!==(i=e.match(/^(--inspect(-brk)?)$/))?t=i[1]:null!==(i=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))?(t=i[1],/^\d+$/.test(i[3])?a=i[3]:s=i[3]):null!==(i=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))&&(t=i[1],s=i[3],a=i[4]),t&&"0"!==a?`${t}=${s}:${parseInt(a)+1}`:e}))}function R(){return!c.env.NO_COLOR&&"0"!==c.env.FORCE_COLOR&&"false"!==c.env.FORCE_COLOR&&(!(!c.env.FORCE_COLOR&&void 0===c.env.CLICOLOR_FORCE)||void 0)}return y.Command=T,y.useColor=R,y}(),{CommanderError:o,InvalidArgumentError:l}=g(),{Help:c}=S(),{Option:u}=x();return p.program=new n,p.createCommand=e=>new n(e),p.createOption=(e,t)=>new u(e,t),p.createArgument=(e,t)=>new r(e,t),p.Command=n,p.Option=u,p.Argument=r,p.Help=c,p.CommanderError=o,p.InvalidArgumentError=l,p.InvalidOptionArgumentError=l,p}var D=(C||(C=1,function(e,t){const i=I();(t=e.exports={}).program=new i.Command,t.Argument=i.Argument,t.Command=i.Command,t.CommanderError=i.CommanderError,t.Help=i.Help,t.InvalidArgumentError=i.InvalidArgumentError,t.InvalidOptionArgumentError=i.InvalidArgumentError,t.Option=i.Option,t.createCommand=e=>new i.Command(e),t.createOption=(e,t)=>new i.Option(e,t),t.createArgument=(e,t)=>new i.Argument(e,t)}(d,d.exports)),d.exports),P=c(D);const{program:E,createCommand:W,createArgument:$,createOption:N,CommanderError:V,InvalidArgumentError:H,InvalidOptionArgumentError:j,Command:L,Argument:F,Option:B,Help:Z}=P,G=(e,t)=>!!t.statuses.find((t=>t.status.name===e.name)),Y={MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:0,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0};class X{acquirement;cause;message;constructor(e,t,i){this.acquirement=e,this.cause=t,this.message=i}}const q=(e,{wearableRaces:t,wearableBlessings:i,wearableClothings:s,wearableWeapons:a})=>(r,n,o,l)=>{if(t.length>0&&r){if(!t.includes(r.name))return new X(e,r,`このキャラクターの設定では${e.name}を装備できません`)}if(i.length>0&&n){if(!i.includes(n.name))return new X(e,n,`このキャラクターの設定では${e.name}を装備できません`)}if(s.length>0&&o){if(!s.includes(o.name))return new X(e,o,`このキャラクターの設定では${e.name}を装備できません`)}if(a.length>0&&l){if(!a.includes(l.name))return new X(e,l,`このキャラクターの設定では${e.name}を装備できません`)}return null},K={MaxHP:300,MaxMP:200,STR:100,VIT:100,DEX:100,AGI:100,AVD:100,INT:100,MND:100,RES:100,WT:100,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:4,jump:3},U=e=>({...e}),z=e=>({...e}),J=e=>({...e,statuses:e.statuses.map(U)}),Q=e=>({label:`${e.isVisitor?"V":"H"}:${e.name}`,value:`${e.isVisitor?"V":"H"}:${e.name}`}),ee=(e,t)=>e.filter((e=>t.includes(`${e.isVisitor?"V":"H"}:${e.name}`))),te=e=>[...e.race.abilities,...e.blessing.abilities,...e.clothing.abilities,...e.weapon.abilities],ie=e=>[...e.race.skills,...e.blessing.skills,...e.clothing.skills,...e.weapon.skills],se=e=>[K,e.race.additionalPhysical,e.blessing.additionalPhysical,e.clothing.additionalPhysical,e.weapon.additionalPhysical].reduce(((e,t)=>{return s=t,{MaxHP:(i=e).MaxHP+s.MaxHP,MaxMP:i.MaxMP+s.MaxMP,STR:i.STR+s.STR,VIT:i.VIT+s.VIT,DEX:i.DEX+s.DEX,AGI:i.AGI+s.AGI,AVD:i.AVD+s.AVD,INT:i.INT+s.INT,MND:i.MND+s.MND,RES:i.RES+s.RES,WT:i.WT+s.WT,StabResistance:i.StabResistance+s.StabResistance,SlashResistance:i.SlashResistance+s.SlashResistance,BlowResistance:i.BlowResistance+s.BlowResistance,FireSuitable:i.FireSuitable+s.FireSuitable,RockSuitable:i.RockSuitable+s.RockSuitable,WaterSuitable:i.WaterSuitable+s.WaterSuitable,IceSuitable:i.IceSuitable+s.IceSuitable,AirSuitable:i.AirSuitable+s.AirSuitable,ThunderSuitable:i.ThunderSuitable+s.ThunderSuitable,move:i.move+s.move,jump:i.jump+s.jump};var i,s}),Y),ae=(e,t)=>{const i=se(e);return{...z(e),statuses:[],hp:i.MaxHP,mp:0,restWt:i.WT,isVisitor:t}},re=(e,t,i,s,a)=>{const r=((e,t,i,s,a)=>{const r=t.validateWearable(t,i,s,a);if(r instanceof X)return r;const n=i.validateWearable(t,i,s,a);if(n instanceof X)return n;const o=s.validateWearable(t,i,s,a);if(o instanceof X)return o;const l=a.validateWearable(t,i,s,a);return l instanceof X?l:null})(0,t,i,s,a);return r instanceof X?r:{name:e,race:t,blessing:i,clothing:s,weapon:a}},ne={name:"accuracyDown",label:"命中down",wt:500,description:"desc"},oe={name:"accuracyUp",label:"命中up",wt:500,description:"desc"},le={name:"acid",label:"毒",wt:500,description:"毒状態。wt10につき、hpが1削れる"},ce={name:"avoidDown",label:"回避down",wt:500,description:"desc"},ue={name:"avoidUp",label:"回避up",wt:500,description:"desc"},he={name:"directAttackDown",label:"物理攻撃down",wt:500,description:"desc"},de={name:"directAttackUp",label:"物理攻撃up",wt:500,description:"desc"},pe={name:"directDiffenceDown",label:"物理防御down",wt:500,description:"desc"},me={name:"directDiffenceUp",label:"物理防御up",wt:500,description:"desc"},fe={name:"fear",label:"恐怖",wt:500,description:"物理攻撃、物理防御が両方downする"},ge={name:"magicAttackDown",label:"魔法攻撃down",wt:500,description:"desc"},be={name:"magicAttackUp",label:"魔法攻撃up",wt:500,description:"desc"},we={name:"magicDiffenceDown",label:"魔法防御down",wt:500,description:"desc"},ye={name:"magicDiffenceUp",label:"魔法防御up",wt:500,description:"desc"},ve={name:"paralysis",label:"麻痺",wt:500,description:"確率で行動できない"},Se={name:"quick",label:"クイック",wt:500,description:"WTの消費が1.5倍になる"},Te={name:"silent",label:"沈黙",wt:500,description:"魔法攻撃ができない"},_e={name:"sleep",label:"眠り",wt:500,description:"行動不能"},xe={name:"slow",label:"スロウ",wt:500,description:"WTの消費が2/3になる"};var Re=Object.freeze({__proto__:null,accuracyDown:ne,accuracyUp:oe,acid:le,avoidDown:ce,avoidUp:ue,directAttackDown:he,directAttackUp:de,directDiffenceDown:pe,directDiffenceUp:me,fear:fe,magicAttackDown:ge,magicAttackUp:be,magicDiffenceDown:we,magicDiffenceUp:ye,paralysis:ve,quick:Se,silent:Te,sleep:_e,slow:xe});const Ae="SLASH",ke="STAB",Ce="BLOW",Me="NONE",Oe="FIRE",Ie="ROCK",De="WATER",Pe="ICE",Ee="WIND",We="THUNDER",$e="NONE",Ne=(e,t)=>{const i=se(t);switch(e.magicType){case Oe:return 100+i.FireSuitable;case Ie:return 100+i.RockSuitable;case De:return 100+i.WaterSuitable;case Pe:return 100+i.IceSuitable;case Ee:return 100+i.AirSuitable;case We:return 100+i.ThunderSuitable;default:return 100}},Ve=(e,t)=>{const i=se(t);switch(e.magicType){case Oe:case Ie:return 100+i.WaterSuitable+i.IceSuitable-i.AirSuitable-i.ThunderSuitable;case De:case Pe:return 100+i.AirSuitable+i.ThunderSuitable-i.FireSuitable-i.RockSuitable;case Ee:case We:return 100+i.FireSuitable+i.RockSuitable-i.WaterSuitable-i.IceSuitable;default:return 100}},He=(e,t)=>{const i=se(t);switch(e.directType){case Ae:return 100+i.SlashResistance;case Ce:return 100+i.BlowResistance;case ke:return 100+i.StabResistance;default:return 100}},je=(e,t,i,s,a)=>{if("SKILL_TO_FIELD"===e.type)return{...a,statuses:[...a.statuses.map((e=>({...e})))]};let r=e.baseDamage+((e,t)=>{const i=se(t),s=Ne(e,t),a=G(de,t)?1.2:1,r=G(he,t)?.8:1,n=G(fe,t)?.8:1;return(i.STR+i.DEX)*s*a*r*n/100})(e,t)-((e,t)=>{const i=se(t),s=Ve(e,t),a=He(e,t),r=G(me,t)?1.2:1,n=G(pe,t)?.8:1,o=G(fe,t)?.8:1;return(i.VIT+i.STR)*a*s*r*n*o/100/100})(e,a);r+=Math.ceil(10*i.damage)-5,r<1&&(r=1);let n=a.hp-r;return n<0&&(n=0),{...a,hp:n,statuses:[...a.statuses.map((e=>({...e})))]}},Le=(e,t,i,s,a)=>{if("SKILL_TO_FIELD"===e.type)return{...a,statuses:[...a.statuses.map((e=>({...e})))]};let r=e.baseDamage+((e,t)=>{const i=se(t),s=Ne(e,t),a=G(be,t)?1.2:1,r=G(ge,t)?.8:1;return(i.INT+i.MND)*s*a*r/100})(e,t)-((e,t)=>{const i=se(t),s=Ve(e,t),a=He(e,t),r=G(ye,t)?1.2:1,n=G(we,t)?.8:1;return(i.VIT+i.MND)*a*s*r*n/100/100})(e,a);r+=Math.ceil(10*i.damage)-5,r<1&&(r=1);let n=a.hp-r;return n<0&&(n=0),{...a,hp:n,statuses:[...a.statuses.map((e=>({...e})))]}},Fe=e=>(t,i,s,a,r)=>{const n={...r,statuses:[...r.statuses.map((e=>({...e})))]};return G(e,n)||n.statuses.push({status:e,restWt:e.wt}),n},Be=(e,t,i,s)=>(100+((e,t)=>{const i=se(t);return(i.DEX+i.AGI)/2})(0,t)-((e,t)=>{const i=se(t);return(i.DEX+i.AVD)/2})(0,s))/100,Ze={name:"blindBull",label:"盲牛の突き",type:"SKILL_TO_CHARACTOR",action:je,directType:ke,magicType:$e,baseDamage:150,mpConsumption:30,receiverCount:1,additionalWt:150,effectLength:1,getAccuracy:Be,description:"刺突の強攻撃"},Ge={name:"blow",label:"殴る",type:"SKILL_TO_CHARACTOR",action:je,directType:Ce,magicType:$e,baseDamage:90,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:1,getAccuracy:Be,description:"打撃攻撃"},Ye={name:"chop",label:"斬りつける",type:"SKILL_TO_CHARACTOR",action:je,directType:Ae,magicType:$e,baseDamage:90,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:1,getAccuracy:Be,description:"斬りつける"},Xe={name:"clearCloud",label:"晴れ",type:"SKILL_TO_FIELD",action:(e,t,i,s)=>({...s,climate:"SUNNY"}),directType:Me,magicType:Ee,mpConsumption:15,receiverCount:0,additionalWt:100,effectLength:0,getAccuracy:Be,description:"天候操作。晴れにする"},qe={name:"coldFeet",label:"逃げ腰",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(ue)(e,t,i,s,a),directType:Me,magicType:$e,baseDamage:0,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"対象の回避率をあげる"},Ke={name:"concentration",label:"精神集中",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(oe)(e,t,i,s,a),directType:Me,magicType:$e,baseDamage:0,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"対象の攻撃命中率をあげる"},Ue={name:"copperBlue",label:"青銅",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(le)(e,t,i,s,a),directType:Me,magicType:Ie,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"毒の付与"},ze={name:"crossFire",label:"交差する炎",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:Oe,baseDamage:30,mpConsumption:30,receiverCount:5,additionalWt:150,effectLength:5,getAccuracy:Be,description:"火の範囲魔法"},Je={name:"cumulonimbus",label:"雨乞い",type:"SKILL_TO_FIELD",action:(e,t,i,s)=>({...s,climate:"RAIN"}),directType:Me,magicType:Pe,mpConsumption:15,receiverCount:0,additionalWt:100,effectLength:0,getAccuracy:Be,description:"天候を雨に"},Qe={name:"danceLeaves",label:"木の葉乱舞",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:Ee,baseDamage:30,mpConsumption:30,receiverCount:5,additionalWt:150,effectLength:5,getAccuracy:Be,description:"風の範囲魔法"},et={name:"dazzle",label:"幻惑",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(ne)(e,t,i,s,a),directType:Me,magicType:$e,baseDamage:0,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"対象の攻撃命中率を下げる"},tt={name:"downRushing",label:"落下する滝",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:De,baseDamage:100,mpConsumption:30,receiverCount:1,additionalWt:150,effectLength:5,getAccuracy:Be,description:"水の強魔法"},it={name:"eleciWave",label:"麻痺",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(ve)(e,t,i,s,a),directType:Me,magicType:We,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"麻痺の付与"},st={name:"electoricBrain",label:"電脳",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(be)(e,t,i,s,a),directType:Me,magicType:We,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"魔法攻撃up"},at={name:"electricShock",label:"広がる雷",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:We,baseDamage:30,mpConsumption:30,receiverCount:5,additionalWt:150,effectLength:5,getAccuracy:Be,description:"雷の範囲魔法"},rt={name:"fireWall",label:"炎の壁",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(ye)(e,t,i,s,a),directType:Me,magicType:Oe,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"魔法防御up"},nt={name:"flameDigger",label:"炎で穿つ",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(we)(e,t,i,s,a),directType:Me,magicType:Oe,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"魔法防御down"},ot={name:"flameFall",label:"Flame Fall",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:Oe,baseDamage:30,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"基本魔法"},lt={name:"flashFlood",label:"鉄砲水",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:De,baseDamage:30,mpConsumption:30,receiverCount:5,additionalWt:150,effectLength:5,getAccuracy:Be,description:"水の範囲魔法"},ct={name:"frostbite",label:"凍傷",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:Pe,baseDamage:100,mpConsumption:30,receiverCount:1,additionalWt:150,effectLength:5,getAccuracy:Be,description:"氷の強魔法"},ut={name:"ghostFire",label:"鬼火",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(fe)(e,t,i,s,a),directType:Me,magicType:Oe,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"恐怖の付与"},ht={name:"gravelWall",label:"礫の壁",type:"SKILL_TO_CHARACTOR",action:je,directType:Me,magicType:Ie,baseDamage:90,mpConsumption:30,receiverCount:4,additionalWt:150,effectLength:1,getAccuracy:Be,description:"打撃の範囲攻撃"},dt={name:"guillotineOfGiant",label:"巨人の首絶ち",type:"SKILL_TO_CHARACTOR",action:je,directType:Ae,magicType:$e,baseDamage:150,mpConsumption:30,receiverCount:1,additionalWt:150,effectLength:1,getAccuracy:Be,description:"斬撃の強攻撃"},pt={name:"gunStone",label:"石弾",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:Ie,baseDamage:30,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"岩の基本魔法"},mt={name:"gunWater",label:"水鉄砲",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:De,baseDamage:30,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"水の基本魔法"},ft={name:"hailstone",label:"雹弾",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:Pe,baseDamage:30,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"氷の基本魔法"},gt=(e,t,i)=>t,bt={name:"shootingGuard",label:"矢かわし",wait:gt,description:"弓矢の攻撃を受けない"},wt=(e,t,i,s,a)=>te(a).find((e=>e.name===bt.name))?{...a,statuses:[...a.statuses.map((e=>({...e})))]}:je(e,t,i,0,a),yt={name:"shot",label:"射る",type:"SKILL_TO_CHARACTOR",action:wt,directType:ke,magicType:$e,baseDamage:90,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"弓矢の基本攻撃"},vt={name:"hardRain",label:"堅い雨",type:"SKILL_TO_CHARACTOR",action:wt,directType:ke,magicType:$e,baseDamage:150,mpConsumption:30,receiverCount:1,additionalWt:150,effectLength:5,getAccuracy:Be,description:"弓矢の強攻撃"},St={name:"heavyWind",label:"春の暁",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(_e)(e,t,i,s,a),directType:Me,magicType:Ee,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"眠りの付与"},Tt={name:"higherBolt",label:"高圧電流",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:We,baseDamage:30,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"雷の基本魔法"},_t={name:"iceSandwich",label:"左右の氷",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:Pe,baseDamage:30,mpConsumption:30,receiverCount:5,additionalWt:150,effectLength:5,getAccuracy:Be,description:"氷の範囲魔法"},xt={name:"jammer",label:"妨害魔法",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(ge)(e,t,i,s,a),directType:Me,magicType:We,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"魔法攻撃down"},Rt={name:"lightMeteor",label:"軽量隕石",type:"SKILL_TO_CHARACTOR",action:je,directType:Ce,magicType:$e,baseDamage:150,mpConsumption:30,receiverCount:1,additionalWt:150,effectLength:1,getAccuracy:Be,description:""},At={name:"mountFall",label:"落下する山",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:Ie,baseDamage:100,mpConsumption:30,receiverCount:1,additionalWt:150,effectLength:5,getAccuracy:Be,description:"岩の強魔法"},kt={name:"multiShot",label:"複数射撃",type:"SKILL_TO_CHARACTOR",action:wt,directType:ke,magicType:$e,baseDamage:90,mpConsumption:30,receiverCount:5,additionalWt:150,effectLength:5,getAccuracy:Be,description:"弓矢の範囲攻撃"},Ct={name:"overbear",label:"威圧",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(ce)(e,t,i,s,a),directType:Me,magicType:$e,baseDamage:0,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"対象の回避率を下げる"},Mt={name:"paralysisScratch",label:"神経の刃",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>{const r=je(e,t,i,0,a);return Fe(ve)(e,t,i,s,r)},directType:Ae,magicType:$e,baseDamage:60,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:1,getAccuracy:Be,description:"攻撃しつつ相手を麻痺にする"},Ot={name:"paralysisShot",label:"神経の矢",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>{const r=je(e,t,i,0,a);return Fe(ve)(e,t,i,s,r)},directType:ke,magicType:$e,baseDamage:60,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"攻撃しつつ相手を麻痺にする"},It={name:"pitch",label:"投げる",type:"SKILL_TO_CHARACTOR",action:je,directType:Ce,magicType:$e,baseDamage:60,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"投げる"},Dt={name:"push",label:"押す",type:"SKILL_TO_CHARACTOR",action:je,directType:Ce,magicType:$e,baseDamage:60,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:1,getAccuracy:Be,description:"盾の基本攻撃"},Pt={name:"quench",label:"恵みの雨",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>{const r=se(a);return{...a,statuses:[...a.statuses.map((e=>({...e})))],hp:Math.min(a.hp+150,r.MaxHP)}},directType:Me,magicType:De,baseDamage:150,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"回復"},Et={name:"quick",label:"クイック",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(Se)(e,t,i,s,a),directType:Me,magicType:Ee,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"クイック状態の付与"},Wt={name:"rockWave",label:"岩波",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:Ie,baseDamage:30,mpConsumption:30,receiverCount:5,additionalWt:150,effectLength:5,getAccuracy:Be,description:"岩の範囲魔法"},$t={name:"saturnRing",label:"土星の輪",type:"SKILL_TO_CHARACTOR",action:je,directType:ke,magicType:$e,baseDamage:90,mpConsumption:30,receiverCount:4,additionalWt:150,effectLength:1,getAccuracy:Be,description:"刺突の範囲攻撃"},Nt={name:"silent",label:"音食う雪",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(Te)(e,t,i,s,a),directType:Me,magicType:Pe,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"沈黙の付与"},Vt={name:"silentScratch",label:"沈黙の刃",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>{const r=je(e,t,i,0,a);return Fe(Te)(e,t,i,s,r)},directType:Ae,magicType:$e,baseDamage:60,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:1,getAccuracy:Be,description:"攻撃しつつ相手を沈黙にする"},Ht={name:"silentShot",label:"沈黙の矢",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>{const r=je(e,t,i,0,a);return Fe(Te)(e,t,i,s,r)},directType:ke,magicType:$e,baseDamage:60,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"攻撃しつつ相手を沈黙にする"},jt={name:"slow",label:"スロウ",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(xe)(e,t,i,s,a),directType:Me,magicType:Pe,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"スロウ付与"},Lt={name:"smallHeat",label:"黒点顕現",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:Oe,baseDamage:100,mpConsumption:30,receiverCount:1,additionalWt:150,effectLength:5,getAccuracy:Be,description:"火の強魔法"},Ft={name:"stab",label:"突く",type:"SKILL_TO_CHARACTOR",action:je,directType:ke,magicType:$e,baseDamage:90,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:1,getAccuracy:Be,description:"刺突の基本攻撃"},Bt={name:"stickyRain",label:"酸性雨",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(he)(e,t,i,s,a),directType:Me,magicType:De,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"物理攻撃down"},Zt={name:"stoneShell",label:"亀甲岩",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(me)(e,t,i,s,a),directType:Me,magicType:Ie,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"物理防御up"},Gt={name:"stoneWeather",label:"風化",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(pe)(e,t,i,s,a),directType:Me,magicType:Ie,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"物理防御down"},Yt={name:"swordDance",label:"剣の舞",type:"SKILL_TO_CHARACTOR",action:je,directType:Ae,magicType:$e,baseDamage:90,mpConsumption:30,receiverCount:4,additionalWt:150,effectLength:1,getAccuracy:Be,description:"斬撃の範囲攻撃"},Xt={name:"thunder",label:"神の鳴り物",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:We,baseDamage:100,mpConsumption:30,receiverCount:1,additionalWt:150,effectLength:5,getAccuracy:Be,description:"雷の強魔法"},qt={name:"tornade",label:"大竜巻",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:Ee,baseDamage:100,mpConsumption:30,receiverCount:1,additionalWt:150,effectLength:5,getAccuracy:Be,description:"風の強魔法"},Kt={name:"toxicScratch",label:"毒の刃",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>{const r=je(e,t,i,0,a);return Fe(le)(e,t,i,s,r)},directType:Ae,magicType:$e,baseDamage:60,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:1,getAccuracy:Be,description:"攻撃しつつ相手を毒にする"},Ut={name:"toxicShot",label:"毒の矢",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>{const r=je(e,t,i,0,a);return Fe(le)(e,t,i,s,r)},directType:ke,magicType:$e,baseDamage:60,mpConsumption:10,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"攻撃しつつ相手を毒にする"},zt={name:"waterCutter",label:"水刃の鎖",type:"SKILL_TO_CHARACTOR",action:(e,t,i,s,a)=>Fe(de)(e,t,i,s,a),directType:Me,magicType:De,baseDamage:0,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"物理攻撃up"},Jt={name:"windEdge",label:"辻風",type:"SKILL_TO_CHARACTOR",action:Le,directType:Me,magicType:Ee,baseDamage:30,mpConsumption:15,receiverCount:1,additionalWt:100,effectLength:5,getAccuracy:Be,description:"風の基本魔法"};const Qt=e=>({get:t=>e[t],list:Object.keys(e),all:Object.values(e)}),ei=Qt(Object.freeze({__proto__:null,blindBull:Ze,blow:Ge,chop:Ye,clearCloud:Xe,coldFeet:qe,concentration:Ke,copperBlue:Ue,crossFire:ze,cumulonimbus:Je,danceLeaves:Qe,dazzle:et,downRushing:tt,eleciWave:it,electoricBrain:st,electricShock:at,fireWall:rt,flameDigger:nt,flameFall:ot,flashFlood:lt,frostbite:ct,ghostFire:ut,gravelWall:ht,guillotineOfGiant:dt,gunStone:pt,gunWater:mt,hailstone:ft,hardRain:vt,heavyWind:St,higherBolt:Tt,iceSandwich:_t,jammer:xt,lightMeteor:Rt,mountFall:At,multiShot:kt,overbear:Ct,paralysisScratch:Mt,paralysisShot:Ot,pitch:It,push:Dt,quench:Pt,quick:Et,rockWave:Wt,saturnRing:$t,shot:yt,silent:Nt,silentScratch:Vt,silentShot:Ht,slow:jt,smallHeat:Lt,stab:Ft,stickyRain:Bt,stoneShell:Zt,stoneWeather:Gt,swordDance:Yt,thunder:Xt,tornade:qt,toxicScratch:Kt,toxicShot:Ut,waterCutter:zt,windEdge:Jt})),ti=e=>{const t=new L("skill");return t.command("list").description("show list of skill").action((async()=>(async e=>ei.list.reduce(((t,i)=>t.then((()=>e.notice(`- ${i}`)))),Promise.resolve()))(e))),t.command("show").argument("<name>","skill name you looking").description("look skill as you like").action((async t=>(({notice:e})=>async t=>{const i=ei.get(t);i?(await e(`スキル名: ${i.label}`),"SKILL_TO_FIELD"===i.type?await e("効果対象: フィールド"):(await e(`効果対象: キャラクター(最大${i.receiverCount}体)`),await e(`基本ダメージ: ${i.baseDamage}`)),await e(`加算WT: ${i.additionalWt}`),await e(`物理属性: ${i.directType}`),await e(`魔法属性: ${i.magicType}`),await e(`消費MP: ${i.mpConsumption}`),await e(`追加WT: ${i.additionalWt}`),await e(`効果距離: ${i.effectLength}`),await e(`説明: ${i.description}`)):await e(`${t}というskillは存在しません`)})(e)(t))),t},ii={name:"mpGainPlus",label:"MP回復強化",wait:(e,t,i)=>{const s=Math.floor(e/20);let a=Math.ceil(5*i.damage);s<a&&(a=0);let r=t.mp+s+a;const n=se(t);return r>n.MaxMP&&(r=n.MaxMP),{...t,mp:r,statuses:[...t.statuses.map((e=>({...e})))]}},description:"MPの回復速度が早くなる"},si={name:"rampartForce",label:"ランパートフォース",wait:gt,description:"隣を通る際に一旦停止する"};const ai=Qt(Object.freeze({__proto__:null,mpGainPlus:ii,rampartForce:si,shootingGuard:bt})),ri=e=>{const t=new L("ability");return t.command("list").description("show list of ability").action((async()=>(async e=>ai.list.reduce(((t,i)=>t.then((()=>e.notice(`- ${i}`)))),Promise.resolve()))(e))),t.command("show").argument("<name>","ability name you looking").description("look ability as you like").action((async t=>(({notice:e})=>async t=>{const i=ai.get(t);i?(await e(`アビリティ名: ${i.label}`),await e(`説明: ${i.description}`)):await e(`${t}というabilityは存在しません`)})(e)(t))),t},ni={name:"fairy",label:"フェアリー",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:-10,VIT:0,DEX:0,AGI:10,AVD:10,INT:10,MND:0,RES:0,WT:0,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ni,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"フェアリー。魔法攻撃力が高い。"},oi={name:"golem",label:"ゴーレム",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:10,AGI:-10,AVD:-10,INT:0,MND:10,RES:0,WT:0,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(oi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ゴーレム。とにかく堅い。"},li={name:"hawkman",label:"ホークマン",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:10,VIT:0,DEX:-10,AGI:10,AVD:10,INT:0,MND:0,RES:0,WT:0,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(li,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ホークマン。飛行移動ができる。"},ci={name:"human",label:"ヒト",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:0,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ci,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ヒト。装備の制約が少なく、できることも多いが逆に言えば器用貧乏"},ui={name:"lizardman",label:"リザードマン",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:10,DEX:10,AGI:-10,AVD:-10,INT:0,MND:0,RES:0,WT:5,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ui,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"リザードマン。物理防御力が高い。"},hi={name:"merman",label:"マーマン",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:-10,AVD:-10,INT:0,MND:10,RES:10,WT:0,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(hi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"マーマン。魔法防御力が高い。"},di={name:"werewolf",label:"ワーウルフ",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:10,VIT:0,DEX:0,AGI:10,AVD:10,INT:-10,MND:0,RES:0,WT:-5,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(di,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ワーウルフ。物理攻撃力が高い。"};var pi=Object.freeze({__proto__:null,fairy:ni,golem:oi,hawkman:li,human:ci,lizardman:ui,merman:hi,werewolf:di});const mi={name:"aironHammer",label:"鉄のハンマー",skills:[Ge,Rt,Ct],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:30,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(mi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"鉄のハンマー。打撃武器"},fi={name:"amethystFlail",label:"アメジストフレイル",skills:[Ge,Tt,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:20,AGI:0,AVD:0,INT:10,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:10,move:0,jump:0},validateWearable:(e,t,i,s)=>q(fi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"アメジストフレイル。雷属性"},gi={name:"amethystRod",label:"アメジストロッド",skills:[Tt,Xt,it],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:10,move:0,jump:0},validateWearable:(e,t,i,s)=>q(gi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"アメジストロッド。雷属性"},bi={name:"amethystSaber",label:"アメジストサーベル",skills:[Ye,Tt,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:20,AGI:0,AVD:0,INT:10,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:10,move:0,jump:0},validateWearable:(e,t,i,s)=>q(bi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"アメジストサーベル。雷属性"},wi={name:"amethystStaff",label:"アメジストスタッフ",skills:[Tt,Xt,xt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:10,move:0,jump:0},validateWearable:(e,t,i,s)=>q(wi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"アメジストスタッフ。雷属性"},yi={name:"amethystStick",label:"アメジストステッキ",skills:[Tt,at,xt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:10,move:0,jump:0},validateWearable:(e,t,i,s)=>q(yi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"アメジストステッキ。雷属性"},vi={name:"amethystWand",label:"アメジストワンド",skills:[Tt,at,it],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:10,move:0,jump:0},validateWearable:(e,t,i,s)=>q(vi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"アメジストワンド。雷属性"},Si={name:"claymore",label:"クレイモア",skills:[Ye,Yt,Ct],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:30,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Si,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"クレイモア。重くて強い"},Ti={name:"crossBow",label:"クロスボウ",skills:[yt,kt,et],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:30,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Ti,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"クロスボウ"},_i={name:"dagger",label:"ダガー",skills:[Kt,Mt,Vt],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:10,DEX:20,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(_i,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ダガー"},xi={name:"diamondFlail",label:"ダイヤモンドフレイル",skills:[Ge,pt,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:20,AGI:0,AVD:0,INT:10,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:10,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(xi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ダイヤモンドフレイル。岩属性"},Ri={name:"diamondRod",label:"ダイヤモンドロッド",skills:[pt,At,Ue],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:10,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Ri,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ダイヤモンドロッド。岩属性"},Ai={name:"diamondSaber",label:"ダイヤモンドサーベル",skills:[Ye,pt,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:20,AGI:0,AVD:0,INT:10,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:10,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Ai,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ダイヤモンドサーベル。岩属性"},ki={name:"diamondStaff",label:"ダイヤモンドスタッフ",skills:[pt,At,Gt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:10,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ki,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ダイヤモンドスタッフ。岩属性"},Ci={name:"diamondStick",label:"ダイヤモンドステッキ",skills:[pt,Wt,Gt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:10,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Ci,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ダイヤモンドステッキ。岩属性"},Mi={name:"diamondWand",label:"ダイヤモンドワンド",skills:[pt,Wt,Ue],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:10,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Mi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ダイヤモンドワンド。岩属性"},Oi={name:"emeraldFlail",label:"エメラルドフレイル",skills:[Ge,Jt,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:20,AGI:0,AVD:0,INT:10,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:10,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Oi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"エメラルドフレイル。風属性"},Ii={name:"emeraldRod",label:"エメラルドロッド",skills:[Jt,St,qt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:10,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Ii,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"エメラルドロッド。風属性"},Di={name:"emeraldSaber",label:"エメラルドサーベル",skills:[Ye,Jt,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:20,AGI:0,AVD:0,INT:10,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:10,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Di,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"エメラルドサーベル。風属性"},Pi={name:"emeraldStaff",label:"エメラルドスタッフ",skills:[Jt,Xe,qt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:10,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Pi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"エメラルドスタッフ。風属性"},Ei={name:"emeraldStick",label:"エメラルドステッキ",skills:[Jt,Qe,Xe],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:10,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Ei,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"エメラルドステッキ。風属性"},Wi={name:"emeraldWand",label:"エメラルドワンド",skills:[Jt,St,Qe],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:10,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Wi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"エメラルドワンド。風属性"},$i={name:"huntingBow",label:"狩人の弓",skills:[Ut,Ot,Ht],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:30,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q($i,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"狩人の弓"},Ni={name:"jadeFlail",label:"ヒスイフレイル",skills:[Ge,ft,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:20,AGI:0,AVD:0,INT:10,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:10,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Ni,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ヒスイフレイル。氷属性"},Vi={name:"jadeRod",label:"ヒスイロッド",skills:[ft,ct,Nt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:10,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Vi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ヒスイロッド。氷属性"},Hi={name:"jadeSaber",label:"ヒスイサーベル",skills:[Ye,ft,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:20,AGI:0,AVD:0,INT:10,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:10,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Hi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ヒスイサーベル。氷属性"},ji={name:"jadeStaff",label:"ヒスイスタッフ",skills:[ft,ct,Je],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:10,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ji,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ヒスイスタッフ。氷属性"},Li={name:"jadeStick",label:"ヒスイステッキ",skills:[ft,_t,Je],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:10,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Li,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ヒスイステッキ。氷属性"},Fi={name:"jadeWand",label:"ヒスイワンド",skills:[ft,_t,Nt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:10,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Fi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ヒスイワンド。氷属性"},Bi={name:"javelin",label:"ジャベリン",skills:[Ft,Ze,Ct],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:30,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Bi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ジャベリン。刺突武器"},Zi={name:"morningStar",label:"モーニングスター",skills:[Ge,ht,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:30,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Zi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"モーニングスター。打撃武器"},Gi={name:"rapier",label:"レイピア",skills:[Ft,$t,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:30,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Gi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"レイピア。刺突武器"},Yi={name:"rubyFlail",label:"ルビーフレイル",skills:[Ge,ot,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:20,AGI:0,AVD:0,INT:10,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:10,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Yi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ルビーフレイル。火属性"},Xi={name:"rubyRod",label:"ルビーロッド",skills:[ot,Lt,ut],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:10,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Xi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ルビーロッド。火属性"},qi={name:"rubySaber",label:"ルビーサーベル",skills:[Ye,ot,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:20,AGI:0,AVD:0,INT:10,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:10,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(qi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ルビーサーベル。火属性"},Ki={name:"rubyStaff",label:"ルビースタッフ",skills:[ot,Lt,nt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:10,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Ki,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ルビースタッフ。火属性"},Ui={name:"rubyStick",label:"ルビーステッキ",skills:[ot,ze,nt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:10,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Ui,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ルビーステッキ。火属性"},zi={name:"rubyWand",label:"ルビーワンド",skills:[ot,ze,ut],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:10,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(zi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ルビーワンド。火属性"},Ji={name:"samuraiBow",label:"和弓",skills:[yt,vt,Ct],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:30,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Ji,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"和弓。威力が高い"},Qi={name:"samuraiSword",label:"刀",skills:[Ye,dt,Ct],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:30,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Qi,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"刀。重くて強い"},es={name:"sapphireFlail",label:"サファイアフレイル",skills:[Ge,mt,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:20,AGI:0,AVD:0,INT:10,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:10,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(es,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"サファイアフレイル。水属性"},ts={name:"sapphireRod",label:"サファイアロッド",skills:[mt,tt,Pt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:10,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ts,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"サファイアロッド。水属性"},is={name:"sapphireSaber",label:"サファイアサーベル",skills:[Ye,mt,et],abilities:[si],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:20,AGI:0,AVD:0,INT:10,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:10,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(is,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"サファイアサーベル。水属性"},ss={name:"sapphireStaff",label:"サファイアスタッフ",skills:[mt,tt,Bt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:10,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ss,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"サファイアスタッフ。水属性"},as={name:"sapphireStick",label:"サファイアステッキ",skills:[mt,lt,Bt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:10,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(as,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"サファイアステッキ。水属性"},rs={name:"sapphireWand",label:"サファイアワンド",skills:[mt,lt,Pt],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:30,MND:0,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:10,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(rs,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"サファイアワンド。水属性"},ns={name:"swordAndShield",label:"剣と盾",skills:[Ye,Dt,et],abilities:[si,bt],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:10,DEX:20,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ns,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"剣と盾のセット"};var os=Object.freeze({__proto__:null,aironHammer:mi,amethystFlail:fi,amethystRod:gi,amethystSaber:bi,amethystStaff:wi,amethystStick:yi,amethystWand:vi,claymore:Si,crossBow:Ti,dagger:_i,diamondFlail:xi,diamondRod:Ri,diamondSaber:Ai,diamondStaff:ki,diamondStick:Ci,diamondWand:Mi,emeraldFlail:Oi,emeraldRod:Ii,emeraldSaber:Di,emeraldStaff:Pi,emeraldStick:Ei,emeraldWand:Wi,huntingBow:$i,jadeFlail:Ni,jadeRod:Vi,jadeSaber:Hi,jadeStaff:ji,jadeStick:Li,jadeWand:Fi,javelin:Bi,morningStar:Zi,rapier:Gi,rubyFlail:Yi,rubyRod:Xi,rubySaber:qi,rubyStaff:Ki,rubyStick:Ui,rubyWand:zi,samuraiBow:Ji,samuraiSword:Qi,sapphireFlail:es,sapphireRod:ts,sapphireSaber:is,sapphireStaff:ss,sapphireStick:as,sapphireWand:rs,swordAndShield:ns});const ls={name:"bishopRobe",label:"司教の服",skills:[],abilities:[ii],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:10,DEX:0,AGI:0,AVD:0,INT:0,MND:30,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ls,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"スキルがないが性能が高い"},cs={name:"blueRobe",label:"青の衣",skills:[zt],abilities:[ii],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:10,DEX:0,AGI:0,AVD:0,INT:0,MND:20,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:10,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(cs,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"青の衣。水属性"},us={name:"chainMail",label:"鎖帷子",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:50,DEX:0,AGI:0,AVD:0,INT:0,MND:10,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:1,jump:0},validateWearable:(e,t,i,s)=>q(us,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"鎖帷子。何の耐性もないがWTが低い"},hs={name:"crocodileSkin",label:"ワニ革の服",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:20,DEX:10,AGI:0,AVD:0,INT:0,MND:10,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:1,jump:0},validateWearable:(e,t,i,s)=>q(hs,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ワニ革の服"},ds={name:"cyanRobe",label:"水色の衣",skills:[Zt],abilities:[ii],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:10,DEX:0,AGI:0,AVD:0,INT:0,MND:20,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:10,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ds,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"水色の衣。岩属性"},ps={name:"furAironArmor",label:"革と鉄の鎧",skills:[Ke],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:50,DEX:0,AGI:0,AVD:0,INT:0,MND:10,RES:0,WT:20,StabResistance:10,SlashResistance:20,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ps,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"革と鉄の鎧。斬撃耐性がある"},ms={name:"furArmor",label:"毛皮の鎧",skills:[qe],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:50,DEX:0,AGI:0,AVD:0,INT:0,MND:10,RES:0,WT:20,StabResistance:0,SlashResistance:10,BlowResistance:20,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ms,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"毛皮の鎧。打撃耐性がある"},fs={name:"greenRobe",label:"緑の衣",skills:[Et],abilities:[ii],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:10,DEX:0,AGI:0,AVD:0,INT:0,MND:20,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:10,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(fs,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"緑の衣。風属性"},gs={name:"lionCollar",label:"獅子の襟飾り",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:10,VIT:20,DEX:0,AGI:0,AVD:0,INT:0,MND:10,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:1,jump:0},validateWearable:(e,t,i,s)=>q(gs,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"獅子の襟飾り"},bs={name:"magentaRobe",label:"桃色の衣",skills:[jt],abilities:[ii],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:10,DEX:0,AGI:0,AVD:0,INT:0,MND:20,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:10,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(bs,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"桃色の衣。氷属性"},ws={name:"mithrilArmor",label:"ミスリルの鎧",skills:[Ke],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:50,DEX:0,AGI:0,AVD:0,INT:0,MND:20,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:10,RockSuitable:10,WaterSuitable:10,IceSuitable:10,AirSuitable:10,ThunderSuitable:10,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ws,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"ミスリルの鎧。魔法属性が高い"},ys={name:"owlRainWear",label:"フクロウの蓑笠",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:10,DEX:0,AGI:0,AVD:0,INT:10,MND:20,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:1,jump:0},validateWearable:(e,t,i,s)=>q(ys,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"フクロウの蓑笠"},vs={name:"redRobe",label:"赤の衣",skills:[rt],abilities:[ii],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:10,DEX:0,AGI:0,AVD:0,INT:0,MND:20,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:10,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(vs,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"赤の衣。火属性"},Ss={name:"silkSuit",label:"シルクの衣",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:10,DEX:0,AGI:0,AVD:0,INT:10,MND:20,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:1,jump:0},validateWearable:(e,t,i,s)=>q(Ss,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"シルクの衣"},Ts={name:"soldierUniform",label:"軍人の制服",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:30,DEX:0,AGI:0,AVD:0,INT:0,MND:10,RES:0,WT:10,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:1,jump:0},validateWearable:(e,t,i,s)=>q(Ts,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"軍人の制服。動きやすい"},_s={name:"steelArmor",label:"鋼鉄の鎧",skills:[qe],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:50,DEX:0,AGI:0,AVD:0,INT:0,MND:10,RES:0,WT:20,StabResistance:20,SlashResistance:0,BlowResistance:10,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(_s,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"鋼鉄の鎧。刺突耐性がある"},xs={name:"yellowRobe",label:"黄色の衣",skills:[st],abilities:[ii],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:10,DEX:0,AGI:0,AVD:0,INT:0,MND:20,RES:0,WT:20,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:10,move:0,jump:0},validateWearable:(e,t,i,s)=>q(xs,{wearableRaces:[],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"黄色の衣。雷属性"};var Rs=Object.freeze({__proto__:null,bishopRobe:ls,blueRobe:cs,chainMail:us,crocodileSkin:hs,cyanRobe:ds,furAironArmor:ps,furArmor:ms,greenRobe:fs,lionCollar:gs,magentaRobe:bs,mithrilArmor:ws,owlRainWear:ys,redRobe:vs,silkSuit:Ss,soldierUniform:Ts,steelArmor:_s,yellowRobe:xs});const As={name:"earth",label:"大地",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:0,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:10,RockSuitable:10,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(As,{wearableRaces:["human","werewolf","lizardman","golem"],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"大地の祝福"},ks={name:"mind",label:"心",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:0,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(ks,{wearableRaces:["human"],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"心の祝福"},Cs={name:"sea",label:"海",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:0,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:10,IceSuitable:10,AirSuitable:0,ThunderSuitable:0,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Cs,{wearableRaces:["human","fairy","lizardman","merman"],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"海の祝福"},Ms={name:"sky",label:"空",skills:[],abilities:[],additionalPhysical:{MaxHP:0,MaxMP:0,STR:0,VIT:0,DEX:0,AGI:0,AVD:0,INT:0,MND:0,RES:0,WT:0,StabResistance:0,SlashResistance:0,BlowResistance:0,FireSuitable:0,RockSuitable:0,WaterSuitable:0,IceSuitable:0,AirSuitable:10,ThunderSuitable:10,move:0,jump:0},validateWearable:(e,t,i,s)=>q(Ms,{wearableRaces:["human","fairy","werewolf","hawkman"],wearableBlessings:[],wearableClothings:[],wearableWeapons:[]})(e,t,i,s),description:"空の祝福"};var Os=Object.freeze({__proto__:null,earth:As,mind:ks,sea:Cs,sky:Ms});const Is=Qt(pi),Ds=Qt(os),Ps=Qt(Rs),Es=Qt(Os),Ws=e=>{const t=new L("race");return t.command("list").description("show list of race").action((async()=>(async e=>Is.list.reduce(((t,i)=>t.then((()=>e.notice(`- ${i}`)))),Promise.resolve()))(e))),t.command("show").argument("<name>","race name you looking").description("look race as you like").action((async t=>(({notice:e})=>async t=>{const i=Is.get(t);if(!i)return void await e(`${t}というraceは存在しません`);await e(`祝福: ${i.label}`);const s=i.additionalPhysical;await e("能力:"),await e(`  MaxHP: ${s.MaxHP}`),await e(`  MaxMP: ${s.MaxMP}`),await e(`  STR: ${s.STR}`),await e(`  VIT: ${s.VIT}`),await e(`  DEX: ${s.DEX}`),await e(`  AGI: ${s.AGI}`),await e(`  AVD: ${s.AVD}`),await e(`  INT: ${s.INT}`),await e(`  MND: ${s.MND}`),await e(`  RES: ${s.RES}`),await e(`  WT: ${s.WT}`),await e(`  刺突耐性: ${s.StabResistance}`),await e(`  斬撃耐性: ${s.SlashResistance}`),await e(`  打撃耐性: ${s.BlowResistance}`),await e(`  火属性: ${s.FireSuitable}`),await e(`  岩属性: ${s.RockSuitable}`),await e(`  水属性: ${s.WaterSuitable}`),await e(`  氷属性: ${s.IceSuitable}`),await e(`  風属性: ${s.AirSuitable}`),await e(`  雷属性: ${s.ThunderSuitable}`),await e(`  移動距離: ${s.move}`),await e(`  移動高さ: ${s.jump}`),await e("アビリティ:"),await i.abilities.reduce(((t,i)=>t.then((()=>e(`  - ${i.label}`)))),Promise.resolve()),await e("スキル:"),await i.skills.reduce(((t,i)=>t.then((()=>e(`  - ${i.label}`)))),Promise.resolve()),await e(`説明: ${i.description}`)})(e)(t))),t},$s=e=>{const t=new L("blessing");return t.command("list").description("show list of blessing").action((async()=>(async e=>Es.list.reduce(((t,i)=>t.then((()=>e.notice(`- ${i}`)))),Promise.resolve()))(e))),t.command("show").argument("<name>","blessing name you looking").description("look blessing as you like").action((async t=>(({notice:e})=>async t=>{const i=Es.get(t);if(!i)return void await e(`${t}というblessingは存在しません`);await e(`祝福: ${i.label}`);const s=i.additionalPhysical;await e("能力:"),await e(`  MaxHP: ${s.MaxHP}`),await e(`  MaxMP: ${s.MaxMP}`),await e(`  STR: ${s.STR}`),await e(`  VIT: ${s.VIT}`),await e(`  DEX: ${s.DEX}`),await e(`  AGI: ${s.AGI}`),await e(`  AVD: ${s.AVD}`),await e(`  INT: ${s.INT}`),await e(`  MND: ${s.MND}`),await e(`  RES: ${s.RES}`),await e(`  WT: ${s.WT}`),await e(`  刺突耐性: ${s.StabResistance}`),await e(`  斬撃耐性: ${s.SlashResistance}`),await e(`  打撃耐性: ${s.BlowResistance}`),await e(`  火属性: ${s.FireSuitable}`),await e(`  岩属性: ${s.RockSuitable}`),await e(`  水属性: ${s.WaterSuitable}`),await e(`  氷属性: ${s.IceSuitable}`),await e(`  風属性: ${s.AirSuitable}`),await e(`  雷属性: ${s.ThunderSuitable}`),await e(`  移動距離: ${s.move}`),await e(`  移動高さ: ${s.jump}`),await e("アビリティ:"),await i.abilities.reduce(((t,i)=>t.then((()=>e(`  - ${i.label}`)))),Promise.resolve()),await e("スキル:"),await i.skills.reduce(((t,i)=>t.then((()=>e(`  - ${i.label}`)))),Promise.resolve()),await e(`説明: ${i.description}`)})(e)(t))),t},Ns=e=>{const t=new L("clothing");return t.command("list").description("show list of clothing").action((async()=>(async e=>Ps.list.reduce(((t,i)=>t.then((()=>e.notice(`- ${i}`)))),Promise.resolve()))(e))),t.command("show").argument("<name>","clothing name you looking").description("look clothing as you like").action((async t=>(({notice:e})=>async t=>{const i=Ps.get(t);if(!i)return void await e(`${t}というclothingは存在しません`);await e(`装備: ${i.label}`);const s=i.additionalPhysical;await e("能力:"),await e(`  MaxHP: ${s.MaxHP}`),await e(`  MaxMP: ${s.MaxMP}`),await e(`  STR: ${s.STR}`),await e(`  VIT: ${s.VIT}`),await e(`  DEX: ${s.DEX}`),await e(`  AGI: ${s.AGI}`),await e(`  AVD: ${s.AVD}`),await e(`  INT: ${s.INT}`),await e(`  MND: ${s.MND}`),await e(`  RES: ${s.RES}`),await e(`  WT: ${s.WT}`),await e(`  刺突耐性: ${s.StabResistance}`),await e(`  斬撃耐性: ${s.SlashResistance}`),await e(`  打撃耐性: ${s.BlowResistance}`),await e(`  火属性: ${s.FireSuitable}`),await e(`  岩属性: ${s.RockSuitable}`),await e(`  水属性: ${s.WaterSuitable}`),await e(`  氷属性: ${s.IceSuitable}`),await e(`  風属性: ${s.AirSuitable}`),await e(`  雷属性: ${s.ThunderSuitable}`),await e(`  移動距離: ${s.move}`),await e(`  移動高さ: ${s.jump}`),await e("アビリティ:"),await i.abilities.reduce(((t,i)=>t.then((()=>e(`  - ${i.label}`)))),Promise.resolve()),await e("スキル:"),await i.skills.reduce(((t,i)=>t.then((()=>e(`  - ${i.label}`)))),Promise.resolve()),await e(`説明: ${i.description}`)})(e)(t))),t},Vs=e=>{const t=new L("weapon");return t.command("list").description("show list of weapon").action((async()=>(async e=>Ds.list.reduce(((t,i)=>t.then((()=>e.notice(`- ${i}`)))),Promise.resolve()))(e))),t.command("show").argument("<name>","weapon name you looking").description("look weapon as you like").action((async t=>(({notice:e})=>async t=>{const i=Ds.get(t);if(!i)return void await e(`${t}というweaponは存在しません`);await e(`祝福: ${i.label}`);const s=i.additionalPhysical;await e("能力:"),await e(`  MaxHP: ${s.MaxHP}`),await e(`  MaxMP: ${s.MaxMP}`),await e(`  STR: ${s.STR}`),await e(`  VIT: ${s.VIT}`),await e(`  DEX: ${s.DEX}`),await e(`  AGI: ${s.AGI}`),await e(`  AVD: ${s.AVD}`),await e(`  INT: ${s.INT}`),await e(`  MND: ${s.MND}`),await e(`  RES: ${s.RES}`),await e(`  WT: ${s.WT}`),await e(`  刺突耐性: ${s.StabResistance}`),await e(`  斬撃耐性: ${s.SlashResistance}`),await e(`  打撃耐性: ${s.BlowResistance}`),await e(`  火属性: ${s.FireSuitable}`),await e(`  岩属性: ${s.RockSuitable}`),await e(`  水属性: ${s.WaterSuitable}`),await e(`  氷属性: ${s.IceSuitable}`),await e(`  風属性: ${s.AirSuitable}`),await e(`  雷属性: ${s.ThunderSuitable}`),await e(`  移動距離: ${s.move}`),await e(`  移動高さ: ${s.jump}`),await e("アビリティ:"),await i.abilities.reduce(((t,i)=>t.then((()=>e(`  - ${i.label}`)))),Promise.resolve()),await e("スキル:"),await i.skills.reduce(((t,i)=>t.then((()=>e(`  - ${i.label}`)))),Promise.resolve()),await e(`説明: ${i.description}`)})(e)(t))),t};var Hs,js;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const i of e)t[i]=i;return t},e.getValidEnumValues=t=>{const i=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),s={};for(const e of i)s[e]=t[e];return e.objectValues(s)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t},e.find=(e,t)=>{for(const i of e)if(t(i))return i},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Hs||(Hs={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(js||(js={}));const Ls=Hs.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fs=e=>{switch(typeof e){case"undefined":return Ls.undefined;case"string":return Ls.string;case"number":return isNaN(e)?Ls.nan:Ls.number;case"boolean":return Ls.boolean;case"function":return Ls.function;case"bigint":return Ls.bigint;case"symbol":return Ls.symbol;case"object":return Array.isArray(e)?Ls.array:null===e?Ls.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Ls.promise:"undefined"!=typeof Map&&e instanceof Map?Ls.map:"undefined"!=typeof Set&&e instanceof Set?Ls.set:"undefined"!=typeof Date&&e instanceof Date?Ls.date:Ls.object;default:return Ls.unknown}},Bs=Hs.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Zs extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},i={_errors:[]},s=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(s);else if("invalid_return_type"===a.code)s(a.returnTypeError);else if("invalid_arguments"===a.code)s(a.argumentsError);else if(0===a.path.length)i._errors.push(t(a));else{let e=i,s=0;for(;s<a.path.length;){const i=a.path[s];s===a.path.length-1?(e[i]=e[i]||{_errors:[]},e[i]._errors.push(t(a))):e[i]=e[i]||{_errors:[]},e=e[i],s++}}};return s(this),i}static assert(e){if(!(e instanceof Zs))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Hs.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},i=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):i.push(e(s));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}Zs.create=e=>new Zs(e);const Gs=(e,t)=>{let i;switch(e.code){case Bs.invalid_type:i=e.received===Ls.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Bs.invalid_literal:i=`Invalid literal value, expected ${JSON.stringify(e.expected,Hs.jsonStringifyReplacer)}`;break;case Bs.unrecognized_keys:i=`Unrecognized key(s) in object: ${Hs.joinValues(e.keys,", ")}`;break;case Bs.invalid_union:i="Invalid input";break;case Bs.invalid_union_discriminator:i=`Invalid discriminator value. Expected ${Hs.joinValues(e.options)}`;break;case Bs.invalid_enum_value:i=`Invalid enum value. Expected ${Hs.joinValues(e.options)}, received '${e.received}'`;break;case Bs.invalid_arguments:i="Invalid function arguments";break;case Bs.invalid_return_type:i="Invalid function return type";break;case Bs.invalid_date:i="Invalid date";break;case Bs.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(i=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(i=`${i} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?i=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?i=`Invalid input: must end with "${e.validation.endsWith}"`:Hs.assertNever(e.validation):i="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Bs.too_small:i="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case Bs.too_big:i="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case Bs.custom:i="Invalid input";break;case Bs.invalid_intersection_types:i="Intersection results could not be merged";break;case Bs.not_multiple_of:i=`Number must be a multiple of ${e.multipleOf}`;break;case Bs.not_finite:i="Number must be finite";break;default:i=t.defaultError,Hs.assertNever(e)}return{message:i}};let Ys=Gs;function Xs(){return Ys}const qs=e=>{const{data:t,path:i,errorMaps:s,issueData:a}=e,r=[...i,...a.path||[]],n={...a,path:r};if(void 0!==a.message)return{...a,path:r,message:a.message};let o="";const l=s.filter((e=>!!e)).slice().reverse();for(const e of l)o=e(n,{data:t,defaultError:o}).message;return{...a,path:r,message:o}};function Ks(e,t){const i=Xs(),s=qs({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,i,i===Gs?void 0:Gs].filter((e=>!!e))});e.common.issues.push(s)}class Us{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const s of t){if("aborted"===s.status)return zs;"dirty"===s.status&&e.dirty(),i.push(s.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const e of t){const t=await e.key,s=await e.value;i.push({key:t,value:s})}return Us.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const s of t){const{key:t,value:a}=s;if("aborted"===t.status)return zs;if("aborted"===a.status)return zs;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||void 0===a.value&&!s.alwaysSet||(i[t.value]=a.value)}return{status:e.value,value:i}}}const zs=Object.freeze({status:"aborted"}),Js=e=>({status:"dirty",value:e}),Qs=e=>({status:"valid",value:e}),ea=e=>"aborted"===e.status,ta=e=>"dirty"===e.status,ia=e=>"valid"===e.status,sa=e=>"undefined"!=typeof Promise&&e instanceof Promise;function aa(e,t,i,s){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function ra(e,t,i,s,a){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,i),i}var na,oa,la;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(na||(na={}));class ca{constructor(e,t,i,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ua=(e,t)=>{if(ia(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Zs(e.common.issues);return this._error=t,this._error}}};function ha(e){if(!e)return{};const{errorMap:t,invalid_type_error:i,required_error:s,description:a}=e;if(t&&(i||s))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{var r,n;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:a.defaultError}:void 0===a.data?{message:null!==(r=null!=o?o:s)&&void 0!==r?r:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(n=null!=o?o:i)&&void 0!==n?n:a.defaultError}},description:a}}class da{get description(){return this._def.description}_getType(e){return Fs(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Fs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Us,ctx:{common:e.parent.common,data:e.data,parsedType:Fs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(sa(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){var i;const s={common:{issues:[],async:null!==(i=null==t?void 0:t.async)&&void 0!==i&&i,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fs(e)},a=this._parseSync({data:e,path:s.path,parent:s});return ua(s,a)}"~validate"(e){var t,i;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fs(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:s});return ia(t)?{value:t.value}:{issues:s.common.issues}}catch(e){(null===(i=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===i?void 0:i.includes("encountered"))&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then((e=>ia(e)?{value:e.value}:{issues:s.common.issues}))}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Fs(e)},s=this._parse({data:e,path:i.path,parent:i}),a=await(sa(s)?s:Promise.resolve(s));return ua(i,a)}refine(e,t){const i=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,s)=>{const a=e(t),r=()=>s.addIssue({code:Bs.custom,...i(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then((e=>!!e||(r(),!1))):!!a||(r(),!1)}))}refinement(e,t){return this._refinement(((i,s)=>!!e(i)||(s.addIssue("function"==typeof t?t(i,s):t),!1)))}_refinement(e){return new dr({schema:this,typeName:xr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return pr.create(this,this._def)}nullable(){return mr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Xa.create(this)}promise(){return hr.create(this,this._def)}or(e){return Ua.create([this,e],this._def)}and(e){return er.create(this,e,this._def)}transform(e){return new dr({...ha(this._def),schema:this,typeName:xr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new fr({...ha(this._def),innerType:this,defaultValue:t,typeName:xr.ZodDefault})}brand(){return new yr({typeName:xr.ZodBranded,type:this,...ha(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new gr({...ha(this._def),innerType:this,catchValue:t,typeName:xr.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return vr.create(this,e)}readonly(){return Sr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const pa=/^c[^\s-]{8,}$/i,ma=/^[0-9a-z]+$/,fa=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ga=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ba=/^[a-z0-9_-]{21}$/i,wa=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ya=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,va=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Sa;const Ta=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_a=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,xa=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ra=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Aa=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ka=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ca="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ma=new RegExp(`^${Ca}$`);function Oa(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function Ia(e){let t=`${Ca}T${Oa(e)}`;const i=[];return i.push(e.local?"Z?":"Z"),e.offset&&i.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${i.join("|")})`,new RegExp(`^${t}$`)}function Da(e,t){if(!wa.test(e))return!1;try{const[i]=e.split("."),s=i.replace(/-/g,"+").replace(/_/g,"/").padEnd(i.length+(4-i.length%4)%4,"="),a=JSON.parse(atob(s));return"object"==typeof a&&null!==a&&(!(!a.typ||!a.alg)&&(!t||a.alg===t))}catch(e){return!1}}function Pa(e,t){return!("v4"!==t&&t||!_a.test(e))||!("v6"!==t&&t||!Ra.test(e))}class Ea extends da{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==Ls.string){const t=this._getOrReturnCtx(e);return Ks(t,{code:Bs.invalid_type,expected:Ls.string,received:t.parsedType}),zs}const t=new Us;let i;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(i=this._getOrReturnCtx(e,i),Ks(i,{code:Bs.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(i=this._getOrReturnCtx(e,i),Ks(i,{code:Bs.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const s=e.data.length>r.value,a=e.data.length<r.value;(s||a)&&(i=this._getOrReturnCtx(e,i),s?Ks(i,{code:Bs.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):a&&Ks(i,{code:Bs.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)va.test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"email",code:Bs.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)Sa||(Sa=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Sa.test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"emoji",code:Bs.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)ga.test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"uuid",code:Bs.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)ba.test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"nanoid",code:Bs.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)pa.test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"cuid",code:Bs.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)ma.test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"cuid2",code:Bs.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)fa.test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"ulid",code:Bs.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch(s){i=this._getOrReturnCtx(e,i),Ks(i,{validation:"url",code:Bs.invalid_string,message:r.message}),t.dirty()}else if("regex"===r.kind){r.regex.lastIndex=0;r.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"regex",code:Bs.invalid_string,message:r.message}),t.dirty())}else if("trim"===r.kind)e.data=e.data.trim();else if("includes"===r.kind)e.data.includes(r.value,r.position)||(i=this._getOrReturnCtx(e,i),Ks(i,{code:Bs.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty());else if("toLowerCase"===r.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===r.kind)e.data=e.data.toUpperCase();else if("startsWith"===r.kind)e.data.startsWith(r.value)||(i=this._getOrReturnCtx(e,i),Ks(i,{code:Bs.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty());else if("endsWith"===r.kind)e.data.endsWith(r.value)||(i=this._getOrReturnCtx(e,i),Ks(i,{code:Bs.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty());else if("datetime"===r.kind){Ia(r).test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{code:Bs.invalid_string,validation:"datetime",message:r.message}),t.dirty())}else if("date"===r.kind){Ma.test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{code:Bs.invalid_string,validation:"date",message:r.message}),t.dirty())}else if("time"===r.kind){new RegExp(`^${Oa(r)}$`).test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{code:Bs.invalid_string,validation:"time",message:r.message}),t.dirty())}else"duration"===r.kind?ya.test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"duration",code:Bs.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?(s=e.data,("v4"!==(a=r.version)&&a||!Ta.test(s))&&("v6"!==a&&a||!xa.test(s))&&(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"ip",code:Bs.invalid_string,message:r.message}),t.dirty())):"jwt"===r.kind?Da(e.data,r.alg)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"jwt",code:Bs.invalid_string,message:r.message}),t.dirty()):"cidr"===r.kind?Pa(e.data,r.version)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"cidr",code:Bs.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?Aa.test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"base64",code:Bs.invalid_string,message:r.message}),t.dirty()):"base64url"===r.kind?ka.test(e.data)||(i=this._getOrReturnCtx(e,i),Ks(i,{validation:"base64url",code:Bs.invalid_string,message:r.message}),t.dirty()):Hs.assertNever(r);var s,a;return{status:t.value,value:e.data}}_regex(e,t,i){return this.refinement((t=>e.test(t)),{validation:t,code:Bs.invalid_string,...na.errToObj(i)})}_addCheck(e){return new Ea({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...na.errToObj(e)})}url(e){return this._addCheck({kind:"url",...na.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...na.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...na.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...na.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...na.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...na.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...na.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...na.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...na.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...na.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...na.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...na.errToObj(e)})}datetime(e){var t,i;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(i=null==e?void 0:e.local)&&void 0!==i&&i,...na.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...na.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...na.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...na.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...na.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...na.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...na.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...na.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...na.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...na.errToObj(t)})}nonempty(e){return this.min(1,na.errToObj(e))}trim(){return new Ea({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ea({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ea({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Wa(e,t){const i=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,a=i>s?i:s;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}Ea.create=e=>{var t;return new Ea({checks:[],typeName:xr.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...ha(e)})};class $a extends da{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==Ls.number){const t=this._getOrReturnCtx(e);return Ks(t,{code:Bs.invalid_type,expected:Ls.number,received:t.parsedType}),zs}let t;const i=new Us;for(const s of this._def.checks)if("int"===s.kind)Hs.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),Ks(t,{code:Bs.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty());else if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),Ks(t,{code:Bs.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),Ks(t,{code:Bs.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty())}else"multipleOf"===s.kind?0!==Wa(e.data,s.value)&&(t=this._getOrReturnCtx(e,t),Ks(t,{code:Bs.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),Ks(t,{code:Bs.not_finite,message:s.message}),i.dirty()):Hs.assertNever(s);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,na.toString(t))}gt(e,t){return this.setLimit("min",e,!1,na.toString(t))}lte(e,t){return this.setLimit("max",e,!0,na.toString(t))}lt(e,t){return this.setLimit("max",e,!1,na.toString(t))}setLimit(e,t,i,s){return new $a({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:na.toString(s)}]})}_addCheck(e){return new $a({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:na.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:na.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:na.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:na.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:na.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:na.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:na.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:na.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:na.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Hs.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if("finite"===i.kind||"int"===i.kind||"multipleOf"===i.kind)return!0;"min"===i.kind?(null===t||i.value>t)&&(t=i.value):"max"===i.kind&&(null===e||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}$a.create=e=>new $a({checks:[],typeName:xr.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...ha(e)});class Na extends da{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==Ls.bigint)return this._getInvalidInput(e);let t;const i=new Us;for(const s of this._def.checks)if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),Ks(t,{code:Bs.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),Ks(t,{code:Bs.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty())}else"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),Ks(t,{code:Bs.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Hs.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Ks(t,{code:Bs.invalid_type,expected:Ls.bigint,received:t.parsedType}),zs}gte(e,t){return this.setLimit("min",e,!0,na.toString(t))}gt(e,t){return this.setLimit("min",e,!1,na.toString(t))}lte(e,t){return this.setLimit("max",e,!0,na.toString(t))}lt(e,t){return this.setLimit("max",e,!1,na.toString(t))}setLimit(e,t,i,s){return new Na({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:na.toString(s)}]})}_addCheck(e){return new Na({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:na.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:na.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:na.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:na.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:na.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Na.create=e=>{var t;return new Na({checks:[],typeName:xr.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...ha(e)})};class Va extends da{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==Ls.boolean){const t=this._getOrReturnCtx(e);return Ks(t,{code:Bs.invalid_type,expected:Ls.boolean,received:t.parsedType}),zs}return Qs(e.data)}}Va.create=e=>new Va({typeName:xr.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...ha(e)});class Ha extends da{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==Ls.date){const t=this._getOrReturnCtx(e);return Ks(t,{code:Bs.invalid_type,expected:Ls.date,received:t.parsedType}),zs}if(isNaN(e.data.getTime())){return Ks(this._getOrReturnCtx(e),{code:Bs.invalid_date}),zs}const t=new Us;let i;for(const s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Ks(i,{code:Bs.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),t.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Ks(i,{code:Bs.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),t.dirty()):Hs.assertNever(s);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ha({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:na.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:na.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Ha.create=e=>new Ha({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:xr.ZodDate,...ha(e)});class ja extends da{_parse(e){if(this._getType(e)!==Ls.symbol){const t=this._getOrReturnCtx(e);return Ks(t,{code:Bs.invalid_type,expected:Ls.symbol,received:t.parsedType}),zs}return Qs(e.data)}}ja.create=e=>new ja({typeName:xr.ZodSymbol,...ha(e)});class La extends da{_parse(e){if(this._getType(e)!==Ls.undefined){const t=this._getOrReturnCtx(e);return Ks(t,{code:Bs.invalid_type,expected:Ls.undefined,received:t.parsedType}),zs}return Qs(e.data)}}La.create=e=>new La({typeName:xr.ZodUndefined,...ha(e)});class Fa extends da{_parse(e){if(this._getType(e)!==Ls.null){const t=this._getOrReturnCtx(e);return Ks(t,{code:Bs.invalid_type,expected:Ls.null,received:t.parsedType}),zs}return Qs(e.data)}}Fa.create=e=>new Fa({typeName:xr.ZodNull,...ha(e)});class Ba extends da{constructor(){super(...arguments),this._any=!0}_parse(e){return Qs(e.data)}}Ba.create=e=>new Ba({typeName:xr.ZodAny,...ha(e)});class Za extends da{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Qs(e.data)}}Za.create=e=>new Za({typeName:xr.ZodUnknown,...ha(e)});class Ga extends da{_parse(e){const t=this._getOrReturnCtx(e);return Ks(t,{code:Bs.invalid_type,expected:Ls.never,received:t.parsedType}),zs}}Ga.create=e=>new Ga({typeName:xr.ZodNever,...ha(e)});class Ya extends da{_parse(e){if(this._getType(e)!==Ls.undefined){const t=this._getOrReturnCtx(e);return Ks(t,{code:Bs.invalid_type,expected:Ls.void,received:t.parsedType}),zs}return Qs(e.data)}}Ya.create=e=>new Ya({typeName:xr.ZodVoid,...ha(e)});class Xa extends da{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),s=this._def;if(t.parsedType!==Ls.array)return Ks(t,{code:Bs.invalid_type,expected:Ls.array,received:t.parsedType}),zs;if(null!==s.exactLength){const e=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(e||a)&&(Ks(t,{code:e?Bs.too_big:Bs.too_small,minimum:a?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),i.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&(Ks(t,{code:Bs.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),i.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&(Ks(t,{code:Bs.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map(((e,i)=>s.type._parseAsync(new ca(t,e,t.path,i))))).then((e=>Us.mergeArray(i,e)));const a=[...t.data].map(((e,i)=>s.type._parseSync(new ca(t,e,t.path,i))));return Us.mergeArray(i,a)}get element(){return this._def.type}min(e,t){return new Xa({...this._def,minLength:{value:e,message:na.toString(t)}})}max(e,t){return new Xa({...this._def,maxLength:{value:e,message:na.toString(t)}})}length(e,t){return new Xa({...this._def,exactLength:{value:e,message:na.toString(t)}})}nonempty(e){return this.min(1,e)}}function qa(e){if(e instanceof Ka){const t={};for(const i in e.shape){const s=e.shape[i];t[i]=pr.create(qa(s))}return new Ka({...e._def,shape:()=>t})}return e instanceof Xa?new Xa({...e._def,type:qa(e.element)}):e instanceof pr?pr.create(qa(e.unwrap())):e instanceof mr?mr.create(qa(e.unwrap())):e instanceof tr?tr.create(e.items.map((e=>qa(e)))):e}Xa.create=(e,t)=>new Xa({type:e,minLength:null,maxLength:null,exactLength:null,typeName:xr.ZodArray,...ha(t)});class Ka extends da{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Hs.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Ls.object){const t=this._getOrReturnCtx(e);return Ks(t,{code:Bs.invalid_type,expected:Ls.object,received:t.parsedType}),zs}const{status:t,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),r=[];if(!(this._def.catchall instanceof Ga&&"strip"===this._def.unknownKeys))for(const e in i.data)a.includes(e)||r.push(e);const n=[];for(const e of a){const t=s[e],a=i.data[e];n.push({key:{status:"valid",value:e},value:t._parse(new ca(i,a,i.path,e)),alwaysSet:e in i.data})}if(this._def.catchall instanceof Ga){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of r)n.push({key:{status:"valid",value:e},value:{status:"valid",value:i.data[e]}});else if("strict"===e)r.length>0&&(Ks(i,{code:Bs.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const s=i.data[t];n.push({key:{status:"valid",value:t},value:e._parse(new ca(i,s,i.path,t)),alwaysSet:t in i.data})}}return i.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of n){const i=await t.key,s=await t.value;e.push({key:i,value:s,alwaysSet:t.alwaysSet})}return e})).then((e=>Us.mergeObjectSync(t,e))):Us.mergeObjectSync(t,n)}get shape(){return this._def.shape()}strict(e){return na.errToObj,new Ka({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,i)=>{var s,a,r,n;const o=null!==(r=null===(a=(s=this._def).errorMap)||void 0===a?void 0:a.call(s,t,i).message)&&void 0!==r?r:i.defaultError;return"unrecognized_keys"===t.code?{message:null!==(n=na.errToObj(e).message)&&void 0!==n?n:o}:{message:o}}}:{}})}strip(){return new Ka({...this._def,unknownKeys:"strip"})}passthrough(){return new Ka({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ka({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ka({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:xr.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ka({...this._def,catchall:e})}pick(e){const t={};return Hs.objectKeys(e).forEach((i=>{e[i]&&this.shape[i]&&(t[i]=this.shape[i])})),new Ka({...this._def,shape:()=>t})}omit(e){const t={};return Hs.objectKeys(this.shape).forEach((i=>{e[i]||(t[i]=this.shape[i])})),new Ka({...this._def,shape:()=>t})}deepPartial(){return qa(this)}partial(e){const t={};return Hs.objectKeys(this.shape).forEach((i=>{const s=this.shape[i];e&&!e[i]?t[i]=s:t[i]=s.optional()})),new Ka({...this._def,shape:()=>t})}required(e){const t={};return Hs.objectKeys(this.shape).forEach((i=>{if(e&&!e[i])t[i]=this.shape[i];else{let e=this.shape[i];for(;e instanceof pr;)e=e._def.innerType;t[i]=e}})),new Ka({...this._def,shape:()=>t})}keyof(){return lr(Hs.objectKeys(this.shape))}}Ka.create=(e,t)=>new Ka({shape:()=>e,unknownKeys:"strip",catchall:Ga.create(),typeName:xr.ZodObject,...ha(t)}),Ka.strictCreate=(e,t)=>new Ka({shape:()=>e,unknownKeys:"strict",catchall:Ga.create(),typeName:xr.ZodObject,...ha(t)}),Ka.lazycreate=(e,t)=>new Ka({shape:e,unknownKeys:"strip",catchall:Ga.create(),typeName:xr.ZodObject,...ha(t)});class Ua extends da{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;if(t.common.async)return Promise.all(i.map((async e=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const i of e)if("dirty"===i.result.status)return t.common.issues.push(...i.ctx.common.issues),i.result;const i=e.map((e=>new Zs(e.ctx.common.issues)));return Ks(t,{code:Bs.invalid_union,unionErrors:i}),zs}));{let e;const s=[];for(const a of i){const i={...t,common:{...t.common,issues:[]},parent:null},r=a._parseSync({data:t.data,path:t.path,parent:i});if("valid"===r.status)return r;"dirty"!==r.status||e||(e={result:r,ctx:i}),i.common.issues.length&&s.push(i.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=s.map((e=>new Zs(e)));return Ks(t,{code:Bs.invalid_union,unionErrors:a}),zs}}get options(){return this._def.options}}Ua.create=(e,t)=>new Ua({options:e,typeName:xr.ZodUnion,...ha(t)});const za=e=>e instanceof nr?za(e.schema):e instanceof dr?za(e.innerType()):e instanceof or?[e.value]:e instanceof cr?e.options:e instanceof ur?Hs.objectValues(e.enum):e instanceof fr?za(e._def.innerType):e instanceof La?[void 0]:e instanceof Fa?[null]:e instanceof pr?[void 0,...za(e.unwrap())]:e instanceof mr?[null,...za(e.unwrap())]:e instanceof yr||e instanceof Sr?za(e.unwrap()):e instanceof gr?za(e._def.innerType):[];class Ja extends da{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ls.object)return Ks(t,{code:Bs.invalid_type,expected:Ls.object,received:t.parsedType}),zs;const i=this.discriminator,s=t.data[i],a=this.optionsMap.get(s);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(Ks(t,{code:Bs.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),zs)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,i){const s=new Map;for(const i of t){const t=za(i.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of t){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Ja({typeName:xr.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...ha(i)})}}function Qa(e,t){const i=Fs(e),s=Fs(t);if(e===t)return{valid:!0,data:e};if(i===Ls.object&&s===Ls.object){const i=Hs.objectKeys(t),s=Hs.objectKeys(e).filter((e=>-1!==i.indexOf(e))),a={...e,...t};for(const i of s){const s=Qa(e[i],t[i]);if(!s.valid)return{valid:!1};a[i]=s.data}return{valid:!0,data:a}}if(i===Ls.array&&s===Ls.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let s=0;s<e.length;s++){const a=Qa(e[s],t[s]);if(!a.valid)return{valid:!1};i.push(a.data)}return{valid:!0,data:i}}return i===Ls.date&&s===Ls.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class er extends da{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),s=(e,s)=>{if(ea(e)||ea(s))return zs;const a=Qa(e.value,s.value);return a.valid?((ta(e)||ta(s))&&t.dirty(),{status:t.value,value:a.data}):(Ks(i,{code:Bs.invalid_intersection_types}),zs)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then((([e,t])=>s(e,t))):s(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}er.create=(e,t,i)=>new er({left:e,right:t,typeName:xr.ZodIntersection,...ha(i)});class tr extends da{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ls.array)return Ks(i,{code:Bs.invalid_type,expected:Ls.array,received:i.parsedType}),zs;if(i.data.length<this._def.items.length)return Ks(i,{code:Bs.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),zs;!this._def.rest&&i.data.length>this._def.items.length&&(Ks(i,{code:Bs.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...i.data].map(((e,t)=>{const s=this._def.items[t]||this._def.rest;return s?s._parse(new ca(i,e,i.path,t)):null})).filter((e=>!!e));return i.common.async?Promise.all(s).then((e=>Us.mergeArray(t,e))):Us.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new tr({...this._def,rest:e})}}tr.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new tr({items:e,typeName:xr.ZodTuple,rest:null,...ha(t)})};class ir extends da{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ls.object)return Ks(i,{code:Bs.invalid_type,expected:Ls.object,received:i.parsedType}),zs;const s=[],a=this._def.keyType,r=this._def.valueType;for(const e in i.data)s.push({key:a._parse(new ca(i,e,i.path,e)),value:r._parse(new ca(i,i.data[e],i.path,e)),alwaysSet:e in i.data});return i.common.async?Us.mergeObjectAsync(t,s):Us.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,i){return new ir(t instanceof da?{keyType:e,valueType:t,typeName:xr.ZodRecord,...ha(i)}:{keyType:Ea.create(),valueType:e,typeName:xr.ZodRecord,...ha(t)})}}class sr extends da{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ls.map)return Ks(i,{code:Bs.invalid_type,expected:Ls.map,received:i.parsedType}),zs;const s=this._def.keyType,a=this._def.valueType,r=[...i.data.entries()].map((([e,t],r)=>({key:s._parse(new ca(i,e,i.path,[r,"key"])),value:a._parse(new ca(i,t,i.path,[r,"value"]))})));if(i.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const i of r){const s=await i.key,a=await i.value;if("aborted"===s.status||"aborted"===a.status)return zs;"dirty"!==s.status&&"dirty"!==a.status||t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const i of r){const s=i.key,a=i.value;if("aborted"===s.status||"aborted"===a.status)return zs;"dirty"!==s.status&&"dirty"!==a.status||t.dirty(),e.set(s.value,a.value)}return{status:t.value,value:e}}}}sr.create=(e,t,i)=>new sr({valueType:t,keyType:e,typeName:xr.ZodMap,...ha(i)});class ar extends da{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==Ls.set)return Ks(i,{code:Bs.invalid_type,expected:Ls.set,received:i.parsedType}),zs;const s=this._def;null!==s.minSize&&i.data.size<s.minSize.value&&(Ks(i,{code:Bs.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&i.data.size>s.maxSize.value&&(Ks(i,{code:Bs.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const a=this._def.valueType;function r(e){const i=new Set;for(const s of e){if("aborted"===s.status)return zs;"dirty"===s.status&&t.dirty(),i.add(s.value)}return{status:t.value,value:i}}const n=[...i.data.values()].map(((e,t)=>a._parse(new ca(i,e,i.path,t))));return i.common.async?Promise.all(n).then((e=>r(e))):r(n)}min(e,t){return new ar({...this._def,minSize:{value:e,message:na.toString(t)}})}max(e,t){return new ar({...this._def,maxSize:{value:e,message:na.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ar.create=(e,t)=>new ar({valueType:e,minSize:null,maxSize:null,typeName:xr.ZodSet,...ha(t)});class rr extends da{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ls.function)return Ks(t,{code:Bs.invalid_type,expected:Ls.function,received:t.parsedType}),zs;function i(e,i){return qs({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Xs(),Gs].filter((e=>!!e)),issueData:{code:Bs.invalid_arguments,argumentsError:i}})}function s(e,i){return qs({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Xs(),Gs].filter((e=>!!e)),issueData:{code:Bs.invalid_return_type,returnTypeError:i}})}const a={errorMap:t.common.contextualErrorMap},r=t.data;if(this._def.returns instanceof hr){const e=this;return Qs((async function(...t){const n=new Zs([]),o=await e._def.args.parseAsync(t,a).catch((e=>{throw n.addIssue(i(t,e)),n})),l=await Reflect.apply(r,this,o);return await e._def.returns._def.type.parseAsync(l,a).catch((e=>{throw n.addIssue(s(l,e)),n}))}))}{const e=this;return Qs((function(...t){const n=e._def.args.safeParse(t,a);if(!n.success)throw new Zs([i(t,n.error)]);const o=Reflect.apply(r,this,n.data),l=e._def.returns.safeParse(o,a);if(!l.success)throw new Zs([s(o,l.error)]);return l.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new rr({...this._def,args:tr.create(e).rest(Za.create())})}returns(e){return new rr({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,i){return new rr({args:e||tr.create([]).rest(Za.create()),returns:t||Za.create(),typeName:xr.ZodFunction,...ha(i)})}}class nr extends da{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}nr.create=(e,t)=>new nr({getter:e,typeName:xr.ZodLazy,...ha(t)});class or extends da{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Ks(t,{received:t.data,code:Bs.invalid_literal,expected:this._def.value}),zs}return{status:"valid",value:e.data}}get value(){return this._def.value}}function lr(e,t){return new cr({values:e,typeName:xr.ZodEnum,...ha(t)})}or.create=(e,t)=>new or({value:e,typeName:xr.ZodLiteral,...ha(t)});class cr extends da{constructor(){super(...arguments),oa.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),i=this._def.values;return Ks(t,{expected:Hs.joinValues(i),received:t.parsedType,code:Bs.invalid_type}),zs}if(aa(this,oa)||ra(this,oa,new Set(this._def.values)),!aa(this,oa).has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return Ks(t,{received:t.data,code:Bs.invalid_enum_value,options:i}),zs}return Qs(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return cr.create(e,{...this._def,...t})}exclude(e,t=this._def){return cr.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}oa=new WeakMap,cr.create=lr;class ur extends da{constructor(){super(...arguments),la.set(this,void 0)}_parse(e){const t=Hs.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Ls.string&&i.parsedType!==Ls.number){const e=Hs.objectValues(t);return Ks(i,{expected:Hs.joinValues(e),received:i.parsedType,code:Bs.invalid_type}),zs}if(aa(this,la)||ra(this,la,new Set(Hs.getValidEnumValues(this._def.values))),!aa(this,la).has(e.data)){const e=Hs.objectValues(t);return Ks(i,{received:i.data,code:Bs.invalid_enum_value,options:e}),zs}return Qs(e.data)}get enum(){return this._def.values}}la=new WeakMap,ur.create=(e,t)=>new ur({values:e,typeName:xr.ZodNativeEnum,...ha(t)});class hr extends da{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ls.promise&&!1===t.common.async)return Ks(t,{code:Bs.invalid_type,expected:Ls.promise,received:t.parsedType}),zs;const i=t.parsedType===Ls.promise?t.data:Promise.resolve(t.data);return Qs(i.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}hr.create=(e,t)=>new hr({type:e,typeName:xr.ZodPromise,...ha(t)});class dr extends da{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===xr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:e=>{Ks(i,e),e.fatal?t.abort():t.dirty()},get path(){return i.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===s.type){const e=s.transform(i.data,a);if(i.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return zs;const s=await this._def.schema._parseAsync({data:e,path:i.path,parent:i});return"aborted"===s.status?zs:"dirty"===s.status||"dirty"===t.value?Js(s.value):s}));{if("aborted"===t.value)return zs;const s=this._def.schema._parseSync({data:e,path:i.path,parent:i});return"aborted"===s.status?zs:"dirty"===s.status||"dirty"===t.value?Js(s.value):s}}if("refinement"===s.type){const e=e=>{const t=s.refinement(e,a);if(i.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===i.common.async){const s=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===s.status?zs:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then((i=>"aborted"===i.status?zs:("dirty"===i.status&&t.dirty(),e(i.value).then((()=>({status:t.value,value:i.value}))))))}if("transform"===s.type){if(!1===i.common.async){const e=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!ia(e))return e;const r=s.transform(e.value,a);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then((e=>ia(e)?Promise.resolve(s.transform(e.value,a)).then((e=>({status:t.value,value:e}))):e))}Hs.assertNever(s)}}dr.create=(e,t,i)=>new dr({schema:e,typeName:xr.ZodEffects,effect:t,...ha(i)}),dr.createWithPreprocess=(e,t,i)=>new dr({schema:t,effect:{type:"preprocess",transform:e},typeName:xr.ZodEffects,...ha(i)});class pr extends da{_parse(e){return this._getType(e)===Ls.undefined?Qs(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pr.create=(e,t)=>new pr({innerType:e,typeName:xr.ZodOptional,...ha(t)});class mr extends da{_parse(e){return this._getType(e)===Ls.null?Qs(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}mr.create=(e,t)=>new mr({innerType:e,typeName:xr.ZodNullable,...ha(t)});class fr extends da{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===Ls.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}fr.create=(e,t)=>new fr({innerType:e,typeName:xr.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...ha(t)});class gr extends da{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return sa(s)?s.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Zs(i.common.issues)},input:i.data})}))):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new Zs(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}gr.create=(e,t)=>new gr({innerType:e,typeName:xr.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...ha(t)});class br extends da{_parse(e){if(this._getType(e)!==Ls.nan){const t=this._getOrReturnCtx(e);return Ks(t,{code:Bs.invalid_type,expected:Ls.nan,received:t.parsedType}),zs}return{status:"valid",value:e.data}}}br.create=e=>new br({typeName:xr.ZodNaN,...ha(e)});const wr=Symbol("zod_brand");class yr extends da{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class vr extends da{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return"aborted"===e.status?zs:"dirty"===e.status?(t.dirty(),Js(e.value)):this._def.out._parseAsync({data:e.value,path:i.path,parent:i})})()}{const e=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===e.status?zs:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:i.path,parent:i})}}static create(e,t){return new vr({in:e,out:t,typeName:xr.ZodPipeline})}}class Sr extends da{_parse(e){const t=this._def.innerType._parse(e),i=e=>(ia(e)&&(e.value=Object.freeze(e.value)),e);return sa(t)?t.then((e=>i(e))):i(t)}unwrap(){return this._def.innerType}}function Tr(e,t={},i){return e?Ba.create().superRefine(((s,a)=>{var r,n;if(!e(s)){const e="function"==typeof t?t(s):"string"==typeof t?{message:t}:t,o=null===(n=null!==(r=e.fatal)&&void 0!==r?r:i)||void 0===n||n,l="string"==typeof e?{message:e}:e;a.addIssue({code:"custom",...l,fatal:o})}})):Ba.create()}Sr.create=(e,t)=>new Sr({innerType:e,typeName:xr.ZodReadonly,...ha(t)});const _r={object:Ka.lazycreate};var xr;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(xr||(xr={}));const Rr=Ea.create,Ar=$a.create,kr=br.create,Cr=Na.create,Mr=Va.create,Or=Ha.create,Ir=ja.create,Dr=La.create,Pr=Fa.create,Er=Ba.create,Wr=Za.create,$r=Ga.create,Nr=Ya.create,Vr=Xa.create,Hr=Ka.create,jr=Ka.strictCreate,Lr=Ua.create,Fr=Ja.create,Br=er.create,Zr=tr.create,Gr=ir.create,Yr=sr.create,Xr=ar.create,qr=rr.create,Kr=nr.create,Ur=or.create,zr=cr.create,Jr=ur.create,Qr=hr.create,en=dr.create,tn=pr.create,sn=mr.create,an=dr.createWithPreprocess,rn=vr.create,nn={string:e=>Ea.create({...e,coerce:!0}),number:e=>$a.create({...e,coerce:!0}),boolean:e=>Va.create({...e,coerce:!0}),bigint:e=>Na.create({...e,coerce:!0}),date:e=>Ha.create({...e,coerce:!0})},on=zs;var ln=Object.freeze({__proto__:null,defaultErrorMap:Gs,setErrorMap:function(e){Ys=e},getErrorMap:Xs,makeIssue:qs,EMPTY_PATH:[],addIssueToContext:Ks,ParseStatus:Us,INVALID:zs,DIRTY:Js,OK:Qs,isAborted:ea,isDirty:ta,isValid:ia,isAsync:sa,get util(){return Hs},get objectUtil(){return js},ZodParsedType:Ls,getParsedType:Fs,ZodType:da,datetimeRegex:Ia,ZodString:Ea,ZodNumber:$a,ZodBigInt:Na,ZodBoolean:Va,ZodDate:Ha,ZodSymbol:ja,ZodUndefined:La,ZodNull:Fa,ZodAny:Ba,ZodUnknown:Za,ZodNever:Ga,ZodVoid:Ya,ZodArray:Xa,ZodObject:Ka,ZodUnion:Ua,ZodDiscriminatedUnion:Ja,ZodIntersection:er,ZodTuple:tr,ZodRecord:ir,ZodMap:sr,ZodSet:ar,ZodFunction:rr,ZodLazy:nr,ZodLiteral:or,ZodEnum:cr,ZodNativeEnum:ur,ZodPromise:hr,ZodEffects:dr,ZodTransformer:dr,ZodOptional:pr,ZodNullable:mr,ZodDefault:fr,ZodCatch:gr,ZodNaN:br,BRAND:wr,ZodBranded:yr,ZodPipeline:vr,ZodReadonly:Sr,custom:Tr,Schema:da,ZodSchema:da,late:_r,get ZodFirstPartyTypeKind(){return xr},coerce:nn,any:Er,array:Vr,bigint:Cr,boolean:Mr,date:Or,discriminatedUnion:Fr,effect:en,enum:zr,function:qr,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Tr((t=>t instanceof e),t),intersection:Br,lazy:Kr,literal:Ur,map:Yr,nan:kr,nativeEnum:Jr,never:$r,null:Pr,nullable:sn,number:Ar,object:Hr,oboolean:()=>Mr().optional(),onumber:()=>Ar().optional(),optional:tn,ostring:()=>Rr().optional(),pipeline:rn,preprocess:an,promise:Qr,record:Gr,set:Xr,strictObject:jr,string:Rr,symbol:Ir,transformer:en,tuple:Zr,undefined:Dr,union:Lr,unknown:Wr,void:Nr,NEVER:on,ZodIssueCode:Bs,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:Zs});class cn{error;message;constructor(e,t){this.error=e,this.message=t}}class un{name;type;message;constructor(e,t,i){this.name=e,this.type=t,this.message=i}}function hn(e){return function(t){const i=e.safeParse(t);return i.success?i.data:new cn(i.error,"想定されたjson schemaのデータではありません")}}const dn=Qt(Re),pn=ln.string(),mn=e=>{const t=dn.get(e);return t||new un(e,"status",`${e}というstatusは存在しません`)},fn=ln.object({status:pn,restWt:ln.number().int()}),gn=ln.object({name:ln.string(),race:ln.string(),blessing:ln.string(),clothing:ln.string(),weapon:ln.string()}),bn=gn.extend({statuses:ln.array(fn),hp:ln.number().int(),mp:ln.number().int(),restWt:ln.number().int(),isVisitor:ln.boolean()}),wn=e=>{return{status:(t=e.status,t.name),restWt:e.restWt};var t},yn=e=>({name:e.name,race:e.race.name,blessing:e.blessing.name,clothing:e.clothing.name,weapon:e.weapon.name}),vn=e=>({name:e.name,race:e.race.name,blessing:e.blessing.name,clothing:e.clothing.name,weapon:e.weapon.name,statuses:e.statuses.map(wn),hp:e.hp,mp:e.mp,restWt:e.restWt,isVisitor:e.isVisitor}),Sn=e=>{const{name:t}=e,i=Is.get(e.race);if(!i)return new un(e.race,"race",`${e.race}という種族は存在しません`);const s=Es.get(e.blessing);if(!s)return new un(e.blessing,"blessing",`${e.blessing}という祝福は存在しません`);const a=Ps.get(e.clothing);if(!a)return new un(e.clothing,"clothing",`${e.clothing}という装備は存在しません`);const r=Ds.get(e.weapon);return r?re(t,i,s,a,r):new un(e.weapon,"weapon",`${e.weapon}という武器は存在しません`)},Tn=e=>{const t=Sn(e);if(t instanceof X)return t;const i=[];for(const t of e.statuses){const e=mn(t.status);if(e instanceof un)return e;i.push({status:e,restWt:t.restWt})}return{...t,statuses:i,hp:0+e.hp,mp:0+e.mp,restWt:0+e.restWt,isVisitor:e.isVisitor}},_n=(e,t,i)=>s=>async a=>s.save(e,a[t],i(a)),xn=e=>t=>async()=>t.list(e),Rn=(e,t,i)=>s=>async a=>{const r=await s.get(e,a);if(!r)return null;const n=hn(t)(r);return n instanceof cn?n:i(n)},An=e=>t=>async i=>t.remove(e,i),kn=(e,t)=>i=>async s=>{const a=await i.importJson(s);if(!a)return null;const r=hn(e)(a);return r instanceof cn?r:t(r)},Cn=e=>t=>async(i,s)=>t.exportJson(e(i),s),Mn=(e,t,i,s,a)=>async r=>(await r.checkNamespace(e),{save:_n(e,a,s)(r),list:xn(e)(r),get:Rn(e,t,i)(r),remove:An(e)(r),importJson:kn(t,i)(r),exportJson:Cn(s)(r)}),On=Mn("charactor",gn,Sn,yn,"name");var In,Dn,Pn,En,Wn,$n,Nn,Vn,Hn,jn,Ln,Fn,Bn,Zn,Gn,Yn,Xn,qn,Kn,Un,zn,Jn,Qn,eo,to,io,so,ao,ro,no,oo,lo,co,uo,ho,po,mo,fo,go,bo,wo,yo,vo,So,To,_o,xo,Ro,Ao,ko,Co,Mo,Oo,Io,Do,Po,Eo,Wo,$o,No,Vo,Ho,jo,Lo,Fo,Bo,Zo,Go={};function Yo(){if(Dn)return In;Dn=1;const{FORCE_COLOR:e,NODE_DISABLE_COLORS:t,TERM:i}=process.env,s={enabled:!t&&"dumb"!==i&&"0"!==e,reset:r(0,0),bold:r(1,22),dim:r(2,22),italic:r(3,23),underline:r(4,24),inverse:r(7,27),hidden:r(8,28),strikethrough:r(9,29),black:r(30,39),red:r(31,39),green:r(32,39),yellow:r(33,39),blue:r(34,39),magenta:r(35,39),cyan:r(36,39),white:r(37,39),gray:r(90,39),grey:r(90,39),bgBlack:r(40,49),bgRed:r(41,49),bgGreen:r(42,49),bgYellow:r(43,49),bgBlue:r(44,49),bgMagenta:r(45,49),bgCyan:r(46,49),bgWhite:r(47,49)};function a(e,t){let i,s=0,a="",r="";for(;s<e.length;s++)i=e[s],a+=i.open,r+=i.close,t.includes(i.close)&&(t=t.replace(i.rgx,i.close+i.open));return a+t+r}function r(e,t){let i={open:`[${e}m`,close:`[${t}m`,rgx:new RegExp(`\\x1b\\[${t}m`,"g")};return function(t){return void 0!==this&&void 0!==this.has?(this.has.includes(e)||(this.has.push(e),this.keys.push(i)),void 0===t?this:s.enabled?a(this.keys,t+""):t+""):void 0===t?function(e,t){let i={has:e,keys:t};return i.reset=s.reset.bind(i),i.bold=s.bold.bind(i),i.dim=s.dim.bind(i),i.italic=s.italic.bind(i),i.underline=s.underline.bind(i),i.inverse=s.inverse.bind(i),i.hidden=s.hidden.bind(i),i.strikethrough=s.strikethrough.bind(i),i.black=s.black.bind(i),i.red=s.red.bind(i),i.green=s.green.bind(i),i.yellow=s.yellow.bind(i),i.blue=s.blue.bind(i),i.magenta=s.magenta.bind(i),i.cyan=s.cyan.bind(i),i.white=s.white.bind(i),i.gray=s.gray.bind(i),i.grey=s.grey.bind(i),i.bgBlack=s.bgBlack.bind(i),i.bgRed=s.bgRed.bind(i),i.bgGreen=s.bgGreen.bind(i),i.bgYellow=s.bgYellow.bind(i),i.bgBlue=s.bgBlue.bind(i),i.bgMagenta=s.bgMagenta.bind(i),i.bgCyan=s.bgCyan.bind(i),i.bgWhite=s.bgWhite.bind(i),i}([e],[i]):s.enabled?a([i],t+""):t+""}}return In=s}function Xo(){return $n?Wn:($n=1,Wn=e=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),i=new RegExp(t,"g");return"string"==typeof e?e.replace(i,""):e})}function qo(){if(Vn)return Nn;Vn=1;const e="[",t={to:(t,i)=>i?`${e}${i+1};${t+1}H`:`${e}${t+1}G`,move(t,i){let s="";return t<0?s+=`${e}${-t}D`:t>0&&(s+=`${e}${t}C`),i<0?s+=`${e}${-i}A`:i>0&&(s+=`${e}${i}B`),s},up:(t=1)=>`${e}${t}A`,down:(t=1)=>`${e}${t}B`,forward:(t=1)=>`${e}${t}C`,backward:(t=1)=>`${e}${t}D`,nextLine:(t=1)=>`${e}E`.repeat(t),prevLine:(t=1)=>`${e}F`.repeat(t),left:`${e}G`,hide:`${e}?25l`,show:`${e}?25h`,save:"7",restore:"8"},i={up:(t=1)=>`${e}S`.repeat(t),down:(t=1)=>`${e}T`.repeat(t)},s={screen:`${e}2J`,up:(t=1)=>`${e}1J`.repeat(t),down:(t=1)=>`${e}J`.repeat(t),line:`${e}2K`,lineEnd:`${e}K`,lineStart:`${e}1K`,lines(e){let i="";for(let s=0;s<e;s++)i+=this.line+(s<e-1?t.up():"");return e&&(i+=t.left),i}};return Nn={cursor:t,scroll:i,erase:s,beep:""}}function Ko(){if(jn)return Hn;function e(e,i){var s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return t(e,i)}(e))||i){s&&(e=s);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,l=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return o=e.done,e},e:function(e){l=!0,n=e},f:function(){try{o||null==s.return||s.return()}finally{if(l)throw n}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}jn=1;const i=Xo(),s=qo(),a=s.erase,r=s.cursor;return Hn=function(t,s){if(!s)return a.line+r.to(0);let n=0;var o,l=e(t.split(/\r?\n/));try{for(l.s();!(o=l.n()).done;){let e=o.value;n+=1+Math.floor(Math.max([...i(e)].length-1,0)/s)}}catch(e){l.e(e)}finally{l.f()}return a.lines(n)},Hn}function Uo(){if(Fn)return Ln;Fn=1;const e={arrowUp:"↑",arrowDown:"↓",arrowLeft:"←",arrowRight:"→",radioOn:"◉",radioOff:"◯",tick:"✔",cross:"✖",ellipsis:"…",pointerSmall:"›",line:"─",pointer:"❯"},t={arrowUp:e.arrowUp,arrowDown:e.arrowDown,arrowLeft:e.arrowLeft,arrowRight:e.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"√",cross:"×",ellipsis:"...",pointerSmall:"»",line:"─",pointer:">"},i="win32"===process.platform?t:e;return Ln=i}function zo(){if(Zn)return Bn;Zn=1;const e=Yo(),t=Uo(),i=Object.freeze({password:{scale:1,render:e=>"*".repeat(e.length)},emoji:{scale:2,render:e=>"😃".repeat(e.length)},invisible:{scale:0,render:e=>""},default:{scale:1,render:e=>`${e}`}}),s=Object.freeze({aborted:e.red(t.cross),done:e.green(t.tick),exited:e.yellow(t.cross),default:e.cyan("?")});return Bn={styles:i,render:e=>i[e]||i.default,symbols:s,symbol:(e,t,i)=>t?s.aborted:i?s.exited:e?s.done:s.default,delimiter:i=>e.gray(i?t.ellipsis:t.pointerSmall),item:(i,s)=>e.gray(i?s?t.pointerSmall:"+":t.line)}}function Jo(){if(Yn)return Gn;Yn=1;const e=Xo();return Gn=function(t,i){let s=String(e(t)||"").split(/\r?\n/);return i?s.map((e=>Math.ceil(e.length/i))).reduce(((e,t)=>e+t)):s.length},Gn}function Qo(){return Jn?zn:(Jn=1,zn={action:En?Pn:(En=1,Pn=(e,t)=>{if(!e.meta||"escape"===e.name){if(e.ctrl){if("a"===e.name)return"first";if("c"===e.name)return"abort";if("d"===e.name)return"abort";if("e"===e.name)return"last";if("g"===e.name)return"reset"}if(t){if("j"===e.name)return"down";if("k"===e.name)return"up"}return"return"===e.name||"enter"===e.name?"submit":"backspace"===e.name?"delete":"delete"===e.name?"deleteForward":"abort"===e.name?"abort":"escape"===e.name?"exit":"tab"===e.name?"next":"pagedown"===e.name?"nextPage":"pageup"===e.name?"prevPage":"home"===e.name?"home":"end"===e.name?"end":"up"===e.name?"up":"down"===e.name?"down":"right"===e.name?"right":"left"===e.name&&"left"}}),clear:Ko(),style:zo(),strip:Xo(),figures:Uo(),lines:Jo(),wrap:qn?Xn:(qn=1,Xn=(e,t={})=>{const i=Number.isSafeInteger(parseInt(t.margin))?new Array(parseInt(t.margin)).fill(" ").join(""):t.margin||"",s=t.width;return(e||"").split(/\r?\n/g).map((e=>e.split(/\s+/g).reduce(((e,t)=>(t.length+i.length>=s||e[e.length-1].length+t.length+1<s?e[e.length-1]+=` ${t}`:e.push(`${i}${t}`),e)),[i]).join("\n"))).join("\n")}),entriesToDisplay:Un?Kn:(Un=1,Kn=(e,t,i)=>{i=i||t;let s=Math.min(t-i,e-Math.floor(i/2));return s<0&&(s=0),{startIndex:s,endIndex:Math.min(s+i,t)}})})}function el(){if(eo)return Qn;eo=1;const e=r,t=Qo().action,i=n,s=qo(),a=s.beep,o=s.cursor,l=Yo();return Qn=class extends i{constructor(i={}){super(),this.firstRender=!0,this.in=i.stdin||process.stdin,this.out=i.stdout||process.stdout,this.onRender=(i.onRender||(()=>{})).bind(this);const s=e.createInterface({input:this.in,escapeCodeTimeout:50});e.emitKeypressEvents(this.in,s),this.in.isTTY&&this.in.setRawMode(!0);const a=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,r=(e,i)=>{let s=t(i,a);!1===s?this._&&this._(e,i):"function"==typeof this[s]?this[s](i):this.bell()};this.close=()=>{this.out.write(o.show),this.in.removeListener("keypress",r),this.in.isTTY&&this.in.setRawMode(!1),s.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",r)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(a)}render(){this.onRender(l),this.firstRender&&(this.firstRender=!1)}}}function tl(){if(io)return to;function e(e,t,i,s,a,r,n){try{var o=e[r](n),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(s,a)}function t(t){return function(){var i=this,s=arguments;return new Promise((function(a,r){var n=t.apply(i,s);function o(t){e(n,a,r,o,l,"next",t)}function l(t){e(n,a,r,o,l,"throw",t)}o(void 0)}))}}io=1;const i=Yo(),s=el(),a=qo(),r=a.erase,n=a.cursor,o=Qo(),l=o.style,c=o.clear,u=o.lines,h=o.figures;return to=class extends s{constructor(e={}){super(e),this.transform=l.render(e.style),this.scale=this.transform.scale,this.msg=e.message,this.initial=e.initial||"",this.validator=e.validate||(()=>!0),this.value="",this.errorMsg=e.error||"Please Enter A Valid Value",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.clear=c("",this.out.columns),this.render()}set value(e){!e&&this.initial?(this.placeholder=!0,this.rendered=i.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(e)),this._value=e,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}validate(){var e=this;return t((function*(){let t=yield e.validator(e.value);"string"==typeof t&&(e.errorMsg=t,t=!1),e.error=!t}))()}submit(){var e=this;return t((function*(){if(e.value=e.value||e.initial,e.cursorOffset=0,e.cursor=e.rendered.length,yield e.validate(),e.error)return e.red=!0,e.fire(),void e.render();e.done=!0,e.aborted=!1,e.fire(),e.render(),e.out.write("\n"),e.close()}))()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(e){this.placeholder||(this.cursor=this.cursor+e,this.cursorOffset+=e)}_(e,t){let i=this.value.slice(0,this.cursor),s=this.value.slice(this.cursor);this.value=`${i}${e}${s}`,this.red=!1,this.cursor=this.placeholder?0:i.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let e=this.value.slice(0,this.cursor-1),t=this.value.slice(this.cursor);this.value=`${e}${t}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let e=this.value.slice(0,this.cursor),t=this.value.slice(this.cursor+1);this.value=`${e}${t}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return 0===this.cursor||this.placeholder&&1===this.cursor}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(n.down(u(this.outputError,this.out.columns)-1)+c(this.outputError,this.out.columns)),this.out.write(c(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[l.symbol(this.done,this.aborted),i.bold(this.msg),l.delimiter(this.done),this.red?i.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split("\n").reduce(((e,t,s)=>e+`\n${s?" ":h.pointerSmall} ${i.red().italic(t)}`),"")),this.out.write(r.line+n.to(0)+this.outputText+n.save+this.outputError+n.restore+n.move(this.cursorOffset,0)))}}}function il(){if(ao)return so;ao=1;const e=Yo(),t=el(),i=Qo(),s=i.style,a=i.clear,r=i.figures,n=i.wrap,o=i.entriesToDisplay,l=qo().cursor;return so=class extends t{constructor(e={}){super(e),this.msg=e.message,this.hint=e.hint||"- Use arrow-keys. Return to submit.",this.warn=e.warn||"- This option is disabled",this.cursor=e.initial||0,this.choices=e.choices.map(((e,t)=>("string"==typeof e&&(e={title:e,value:t}),{title:e&&(e.title||e.value||e),value:e&&(void 0===e.value?t:e.value),description:e&&e.description,selected:e&&e.selected,disabled:e&&e.disabled}))),this.optionsPerPage=e.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=a("",this.out.columns),this.render()}moveCursor(e){this.cursor=e,this.value=this.choices[e].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){0===this.cursor?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(e,t){if(" "===e)return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(l.hide):this.out.write(a(this.outputText,this.out.columns)),super.render();let t=o(this.cursor,this.choices.length,this.optionsPerPage),i=t.startIndex,c=t.endIndex;if(this.outputText=[s.symbol(this.done,this.aborted),e.bold(this.msg),s.delimiter(!1),this.done?this.selection.title:this.selection.disabled?e.yellow(this.warn):e.gray(this.hint)].join(" "),!this.done){this.outputText+="\n";for(let t=i;t<c;t++){let s,a,o="",l=this.choices[t];a=t===i&&i>0?r.arrowUp:t===c-1&&c<this.choices.length?r.arrowDown:" ",l.disabled?(s=this.cursor===t?e.gray().underline(l.title):e.strikethrough().gray(l.title),a=(this.cursor===t?e.bold().gray(r.pointer)+" ":"  ")+a):(s=this.cursor===t?e.cyan().underline(l.title):l.title,a=(this.cursor===t?e.cyan(r.pointer)+" ":"  ")+a,l.description&&this.cursor===t&&(o=` - ${l.description}`,(a.length+s.length+o.length>=this.out.columns||l.description.split(/\r?\n/).length>1)&&(o="\n"+n(l.description,{margin:3,width:this.out.columns})))),this.outputText+=`${a} ${s}${e.gray(o)}\n`}}this.out.write(this.outputText)}}}function sl(){if(no)return ro;no=1;const e=Yo(),t=el(),i=Qo(),s=i.style,a=i.clear,r=qo(),n=r.cursor,o=r.erase;return ro=class extends t{constructor(e={}){super(e),this.msg=e.message,this.value=!!e.initial,this.active=e.active||"on",this.inactive=e.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}deactivate(){if(!1===this.value)return this.bell();this.value=!1,this.render()}activate(){if(!0===this.value)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(e,t){if(" "===e)this.value=!this.value;else if("1"===e)this.value=!0;else{if("0"!==e)return this.bell();this.value=!1}this.render()}render(){this.closed||(this.firstRender?this.out.write(n.hide):this.out.write(a(this.outputText,this.out.columns)),super.render(),this.outputText=[s.symbol(this.done,this.aborted),e.bold(this.msg),s.delimiter(this.done),this.value?this.inactive:e.cyan().underline(this.inactive),e.gray("/"),this.value?e.cyan().underline(this.active):this.active].join(" "),this.out.write(o.line+n.to(0)+this.outputText))}}}function al(){if(lo)return oo;lo=1;class e{constructor({token:e,date:t,parts:i,locales:s}){this.token=e,this.date=t||new Date,this.parts=i||[this],this.locales=s||{}}up(){}down(){}next(){const t=this.parts.indexOf(this);return this.parts.find(((i,s)=>s>t&&i instanceof e))}setTo(e){}prev(){let t=[].concat(this.parts).reverse();const i=t.indexOf(this);return t.find(((t,s)=>s>i&&t instanceof e))}toString(){return String(this.date)}}return oo=e}function rl(){if(uo)return co;uo=1;const e=al();return co=class extends e{constructor(e={}){super(e)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let e=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?e.toUpperCase():e}},co}function nl(){if(po)return ho;po=1;const e=al();return ho=class extends e{constructor(e={}){super(e)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(e){this.date.setDate(parseInt(e.substr(-2)))}toString(){let e=this.date.getDate(),t=this.date.getDay();return"DD"===this.token?String(e).padStart(2,"0"):"Do"===this.token?e+(i=e,1==(i%=10)?"st":2===i?"nd":3===i?"rd":"th"):"d"===this.token?t+1:"ddd"===this.token?this.locales.weekdaysShort[t]:"dddd"===this.token?this.locales.weekdays[t]:e;var i}},ho}function ol(){if(fo)return mo;fo=1;const e=al();return mo=class extends e{constructor(e={}){super(e)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(e){this.date.setHours(parseInt(e.substr(-2)))}toString(){let e=this.date.getHours();return/h/.test(this.token)&&(e=e%12||12),this.token.length>1?String(e).padStart(2,"0"):e}},mo}function ll(){if(bo)return go;bo=1;const e=al();return go=class extends e{constructor(e={}){super(e)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(e){this.date.setMilliseconds(parseInt(e.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}}}function cl(){if(yo)return wo;yo=1;const e=al();return wo=class extends e{constructor(e={}){super(e)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(e){this.date.setMinutes(parseInt(e.substr(-2)))}toString(){let e=this.date.getMinutes();return this.token.length>1?String(e).padStart(2,"0"):e}}}function ul(){if(So)return vo;So=1;const e=al();return vo=class extends e{constructor(e={}){super(e)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(e){e=parseInt(e.substr(-2))-1,this.date.setMonth(e<0?0:e)}toString(){let e=this.date.getMonth(),t=this.token.length;return 2===t?String(e+1).padStart(2,"0"):3===t?this.locales.monthsShort[e]:4===t?this.locales.months[e]:String(e+1)}},vo}function hl(){if(_o)return To;_o=1;const e=al();return To=class extends e{constructor(e={}){super(e)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(e){this.date.setSeconds(parseInt(e.substr(-2)))}toString(){let e=this.date.getSeconds();return this.token.length>1?String(e).padStart(2,"0"):e}}}function dl(){if(Ro)return xo;Ro=1;const e=al();return xo=class extends e{constructor(e={}){super(e)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(e){this.date.setFullYear(e.substr(-4))}toString(){let e=String(this.date.getFullYear()).padStart(4,"0");return 2===this.token.length?e.substr(-2):e}},xo}function pl(){if(Mo)return Co;function e(e,t,i,s,a,r,n){try{var o=e[r](n),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(s,a)}function t(t){return function(){var i=this,s=arguments;return new Promise((function(a,r){var n=t.apply(i,s);function o(t){e(n,a,r,o,l,"next",t)}function l(t){e(n,a,r,o,l,"throw",t)}o(void 0)}))}}Mo=1;const i=Yo(),s=el(),a=Qo(),r=a.style,n=a.clear,o=a.figures,l=qo(),c=l.erase,u=l.cursor,h=ko?Ao:(ko=1,Ao={DatePart:al(),Meridiem:rl(),Day:nl(),Hours:ol(),Milliseconds:ll(),Minutes:cl(),Month:ul(),Seconds:hl(),Year:dl()}),d=h.DatePart,p=h.Meridiem,m=h.Day,f=h.Hours,g=h.Milliseconds,b=h.Minutes,w=h.Month,y=h.Seconds,v=h.Year,S=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,T={1:({token:e})=>e.replace(/\\(.)/g,"$1"),2:e=>new m(e),3:e=>new w(e),4:e=>new v(e),5:e=>new p(e),6:e=>new f(e),7:e=>new b(e),8:e=>new y(e),9:e=>new g(e)},_={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};return Co=class extends s{constructor(e={}){super(e),this.msg=e.message,this.cursor=0,this.typed="",this.locales=Object.assign(_,e.locales),this._date=e.initial||new Date,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.mask=e.mask||"YYYY-MM-DD HH:mm:ss",this.clear=n("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(e){e&&this._date.setTime(e.getTime())}set mask(e){let t;for(this.parts=[];t=S.exec(e);){let e=t.shift(),i=t.findIndex((e=>null!=e));this.parts.push(i in T?T[i]({token:t[i]||e,date:this.date,parts:this.parts,locales:this.locales}):t[i]||e)}let i=this.parts.reduce(((e,t)=>("string"==typeof t&&"string"==typeof e[e.length-1]?e[e.length-1]+=t:e.push(t),e)),[]);this.parts.splice(0),this.parts.push(...i),this.reset()}moveCursor(e){this.typed="",this.cursor=e,this.fire()}reset(){this.moveCursor(this.parts.findIndex((e=>e instanceof d))),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}validate(){var e=this;return t((function*(){let t=yield e.validator(e.value);"string"==typeof t&&(e.errorMsg=t,t=!1),e.error=!t}))()}submit(){var e=this;return t((function*(){if(yield e.validate(),e.error)return e.color="red",e.fire(),void e.render();e.done=!0,e.aborted=!1,e.fire(),e.render(),e.out.write("\n"),e.close()}))()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let e=this.parts[this.cursor].prev();if(null==e)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}right(){let e=this.parts[this.cursor].next();if(null==e)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}next(){let e=this.parts[this.cursor].next();this.moveCursor(e?this.parts.indexOf(e):this.parts.findIndex((e=>e instanceof d))),this.render()}_(e){/\d/.test(e)&&(this.typed+=e,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(u.hide):this.out.write(n(this.outputText,this.out.columns)),super.render(),this.outputText=[r.symbol(this.done,this.aborted),i.bold(this.msg),r.delimiter(!1),this.parts.reduce(((e,t,s)=>e.concat(s!==this.cursor||this.done?t:i.cyan().underline(t.toString()))),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split("\n").reduce(((e,t,s)=>e+`\n${s?" ":o.pointerSmall} ${i.red().italic(t)}`),"")),this.out.write(c.line+u.to(0)+this.outputText))}},Co}function ml(){if(Io)return Oo;function e(e,t,i,s,a,r,n){try{var o=e[r](n),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(s,a)}function t(t){return function(){var i=this,s=arguments;return new Promise((function(a,r){var n=t.apply(i,s);function o(t){e(n,a,r,o,l,"next",t)}function l(t){e(n,a,r,o,l,"throw",t)}o(void 0)}))}}Io=1;const i=Yo(),s=el(),a=qo(),r=a.cursor,n=a.erase,o=Qo(),l=o.style,c=o.figures,u=o.clear,h=o.lines,d=/[0-9]/,p=e=>void 0!==e,m=(e,t)=>{let i=Math.pow(10,t);return Math.round(e*i)/i};return Oo=class extends s{constructor(e={}){super(e),this.transform=l.render(e.style),this.msg=e.message,this.initial=p(e.initial)?e.initial:"",this.float=!!e.float,this.round=e.round||2,this.inc=e.increment||1,this.min=p(e.min)?e.min:-1/0,this.max=p(e.max)?e.max:1/0,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(e){e||0===e?(this.placeholder=!1,this.rendered=this.transform.render(`${m(e,this.round)}`),this._value=m(e,this.round)):(this.placeholder=!0,this.rendered=i.gray(this.transform.render(`${this.initial}`)),this._value=""),this.fire()}get value(){return this._value}parse(e){return this.float?parseFloat(e):parseInt(e)}valid(e){return"-"===e||"."===e&&this.float||d.test(e)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let e=this.value;this.value=""!==e?e:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}validate(){var e=this;return t((function*(){let t=yield e.validator(e.value);"string"==typeof t&&(e.errorMsg=t,t=!1),e.error=!t}))()}submit(){var e=this;return t((function*(){if(yield e.validate(),e.error)return e.color="red",e.fire(),void e.render();let t=e.value;e.value=""!==t?t:e.initial,e.done=!0,e.aborted=!1,e.error=!1,e.fire(),e.render(),e.out.write("\n"),e.close()}))()}up(){if(this.typed="",""===this.value&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",""===this.value&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let e=this.value.toString();if(0===e.length)return this.bell();this.value=this.parse(e=e.slice(0,-1))||"",""!==this.value&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(e,t){if(!this.valid(e))return this.bell();const i=Date.now();if(i-this.lastHit>1e3&&(this.typed=""),this.typed+=e,this.lastHit=i,this.color="cyan","."===e)return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(r.down(h(this.outputError,this.out.columns)-1)+u(this.outputError,this.out.columns)),this.out.write(u(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[l.symbol(this.done,this.aborted),i.bold(this.msg),l.delimiter(this.done),this.done&&(this.done||this.placeholder)?this.rendered:i[this.color]().underline(this.rendered)].join(" "),this.error&&(this.outputError+=this.errorMsg.split("\n").reduce(((e,t,s)=>e+`\n${s?" ":c.pointerSmall} ${i.red().italic(t)}`),"")),this.out.write(n.line+r.to(0)+this.outputText+r.save+this.outputError+r.restore))}}}function fl(){if(Po)return Do;Po=1;const e=Yo(),t=qo().cursor,i=el(),s=Qo(),a=s.clear,r=s.figures,n=s.style,o=s.wrap,l=s.entriesToDisplay;return Do=class extends i{constructor(e={}){super(e),this.msg=e.message,this.cursor=e.cursor||0,this.scrollIndex=e.cursor||0,this.hint=e.hint||"",this.warn=e.warn||"- This option is disabled -",this.minSelected=e.min,this.showMinError=!1,this.maxChoices=e.max,this.instructions=e.instructions,this.optionsPerPage=e.optionsPerPage||10,this.value=e.choices.map(((e,t)=>("string"==typeof e&&(e={title:e,value:t}),{title:e&&(e.title||e.value||e),description:e&&e.description,value:e&&(void 0===e.value?t:e.value),selected:e&&e.selected,disabled:e&&e.disabled}))),this.clear=a("",this.out.columns),e.overrideRender||this.render()}reset(){this.value.map((e=>!e.selected)),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter((e=>e.selected))}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){const e=this.value.filter((e=>e.selected));this.minSelected&&e.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){0===this.cursor?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const e=this.value[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}toggleAll(){if(void 0!==this.maxChoices||this.value[this.cursor].disabled)return this.bell();const e=!this.value[this.cursor].selected;this.value.filter((e=>!e.disabled)).forEach((t=>t.selected=e)),this.render()}_(e,t){if(" "===e)this.handleSpaceToggle();else{if("a"!==e)return this.bell();this.toggleAll()}}renderInstructions(){return void 0===this.instructions||this.instructions?"string"==typeof this.instructions?this.instructions:`\nInstructions:\n    ${r.arrowUp}/${r.arrowDown}: Highlight option\n    ${r.arrowLeft}/${r.arrowRight}/[space]: Toggle selection\n`+(void 0===this.maxChoices?"    a: Toggle all\n":"")+"    enter/return: Complete answer":""}renderOption(t,i,s,a){const n=(i.selected?e.green(r.radioOn):r.radioOff)+" "+a+" ";let l,c;return i.disabled?l=t===s?e.gray().underline(i.title):e.strikethrough().gray(i.title):(l=t===s?e.cyan().underline(i.title):i.title,t===s&&i.description&&(c=` - ${i.description}`,(n.length+l.length+c.length>=this.out.columns||i.description.split(/\r?\n/).length>1)&&(c="\n"+o(i.description,{margin:n.length,width:this.out.columns})))),n+l+e.gray(c||"")}paginateOptions(t){if(0===t.length)return e.red("No matches for this query.");let i,s=l(this.cursor,t.length,this.optionsPerPage),a=s.startIndex,n=s.endIndex,o=[];for(let e=a;e<n;e++)i=e===a&&a>0?r.arrowUp:e===n-1&&n<t.length?r.arrowDown:" ",o.push(this.renderOption(this.cursor,t[e],e,i));return"\n"+o.join("\n")}renderOptions(e){return this.done?"":this.paginateOptions(e)}renderDoneOrInstructions(){if(this.done)return this.value.filter((e=>e.selected)).map((e=>e.title)).join(", ");const t=[e.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&t.push(e.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(t.hide),super.render();let i=[n.symbol(this.done,this.aborted),e.bold(this.msg),n.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(i+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),i+=this.renderOptions(this.value),this.out.write(this.clear+i),this.clear=a(i,this.out.columns)}},Do}function gl(){if(Wo)return Eo;function e(e,t,i,s,a,r,n){try{var o=e[r](n),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(s,a)}Wo=1;const t=Yo(),i=el(),s=qo(),a=s.erase,r=s.cursor,n=Qo(),o=n.style,l=n.clear,c=n.figures,u=n.wrap,h=n.entriesToDisplay,d=(e,t)=>e[t]&&(e[t].value||e[t].title||e[t]),p=(e,t)=>e[t]&&(e[t].title||e[t].value||e[t]);return Eo=class extends i{constructor(e={}){super(e),this.msg=e.message,this.suggest=e.suggest,this.choices=e.choices,this.initial="number"==typeof e.initial?e.initial:((e,t)=>{const i=e.findIndex((e=>e.value===t||e.title===t));return i>-1?i:void 0})(e.choices,e.initial),this.select=this.initial||e.cursor||0,this.i18n={noMatches:e.noMatches||"no matches found"},this.fallback=e.fallback||this.initial,this.clearFirst=e.clearFirst||!1,this.suggestions=[],this.input="",this.limit=e.limit||10,this.cursor=0,this.transform=o.render(e.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=l("",this.out.columns),this.complete(this.render),this.render()}set fallback(e){this._fb=Number.isSafeInteger(parseInt(e))?parseInt(e):e}get fallback(){let e;return"number"==typeof this._fb?e=this.choices[this._fb]:"string"==typeof this._fb&&(e={title:this._fb}),e||this._fb||{title:this.i18n.noMatches}}moveSelect(e){this.select=e,this.suggestions.length>0?this.value=d(this.suggestions,e):this.value=this.fallback.value,this.fire()}complete(t){var i,s=this;return(i=function*(){const e=s.completing=s.suggest(s.input,s.choices),i=yield e;if(s.completing!==e)return;s.suggestions=i.map(((e,t,i)=>({title:p(i,t),value:d(i,t),description:e.description}))),s.completing=!1;const a=Math.max(i.length-1,0);s.moveSelect(Math.min(a,s.select)),t&&t()},function(){var t=this,s=arguments;return new Promise((function(a,r){var n=i.apply(t,s);function o(t){e(n,a,r,o,l,"next",t)}function l(t){e(n,a,r,o,l,"throw",t)}o(void 0)}))})()}reset(){this.input="",this.complete((()=>{this.moveSelect(void 0!==this.initial?this.initial:0),this.render()})),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}_(e,t){let i=this.input.slice(0,this.cursor),s=this.input.slice(this.cursor);this.input=`${i}${e}${s}`,this.cursor=i.length+1,this.complete(this.render),this.render()}delete(){if(0===this.cursor)return this.bell();let e=this.input.slice(0,this.cursor-1),t=this.input.slice(this.cursor);this.input=`${e}${t}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let e=this.input.slice(0,this.cursor),t=this.input.slice(this.cursor+1);this.input=`${e}${t}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){0===this.select?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(e,i,s,a){let r,n=s?c.arrowUp:a?c.arrowDown:" ",o=i?t.cyan().underline(e.title):e.title;return n=(i?t.cyan(c.pointer)+" ":"  ")+n,e.description&&(r=` - ${e.description}`,(n.length+o.length+r.length>=this.out.columns||e.description.split(/\r?\n/).length>1)&&(r="\n"+u(e.description,{margin:3,width:this.out.columns}))),n+" "+o+t.gray(r||"")}render(){if(this.closed)return;this.firstRender?this.out.write(r.hide):this.out.write(l(this.outputText,this.out.columns)),super.render();let e=h(this.select,this.choices.length,this.limit),i=e.startIndex,s=e.endIndex;if(this.outputText=[o.symbol(this.done,this.aborted,this.exited),t.bold(this.msg),o.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const e=this.suggestions.slice(i,s).map(((e,t)=>this.renderOption(e,this.select===t+i,0===t&&i>0,t+i===s-1&&s<this.choices.length))).join("\n");this.outputText+="\n"+(e||t.gray(this.fallback.title))}this.out.write(a.line+r.to(0)+this.outputText)}},Eo}function bl(){if(No)return $o;No=1;const e=Yo(),t=qo().cursor,i=fl(),s=Qo(),a=s.clear,r=s.style,n=s.figures;return $o=class extends i{constructor(e={}){e.overrideRender=!0,super(e),this.inputValue="",this.clear=a("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){0===this.cursor?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const e=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter((e=>!this.inputValue||(!("string"!=typeof e.title||!e.title.toLowerCase().includes(this.inputValue.toLowerCase()))||!("string"!=typeof e.value||!e.value.toLowerCase().includes(this.inputValue.toLowerCase())))));const t=this.filteredOptions.findIndex((t=>t===e));this.cursor=t<0?0:t,this.render()}handleSpaceToggle(){const e=this.filteredOptions[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}handleInputChange(e){this.inputValue=this.inputValue+e,this.updateFilteredOptions()}_(e,t){" "===e?this.handleSpaceToggle():this.handleInputChange(e)}renderInstructions(){return void 0===this.instructions||this.instructions?"string"==typeof this.instructions?this.instructions:`\nInstructions:\n    ${n.arrowUp}/${n.arrowDown}: Highlight option\n    ${n.arrowLeft}/${n.arrowRight}/[space]: Toggle selection\n    [a,b,c]/delete: Filter choices\n    enter/return: Complete answer\n`:""}renderCurrentInput(){return`\nFiltered results for: ${this.inputValue?this.inputValue:e.gray("Enter something to filter")}\n`}renderOption(t,i,s){let a;return a=i.disabled?t===s?e.gray().underline(i.title):e.strikethrough().gray(i.title):t===s?e.cyan().underline(i.title):i.title,(i.selected?e.green(n.radioOn):n.radioOff)+"  "+a}renderDoneOrInstructions(){if(this.done)return this.value.filter((e=>e.selected)).map((e=>e.title)).join(", ");const t=[e.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&t.push(e.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(t.hide),super.render();let i=[r.symbol(this.done,this.aborted),e.bold(this.msg),r.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(i+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),i+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+i),this.clear=a(i,this.out.columns)}},$o}function wl(){if(Ho)return Vo;Ho=1;const e=Yo(),t=el(),i=Qo(),s=i.style,a=i.clear,r=qo(),n=r.erase,o=r.cursor;return Vo=class extends t{constructor(e={}){super(e),this.msg=e.message,this.value=e.initial,this.initialValue=!!e.initial,this.yesMsg=e.yes||"yes",this.yesOption=e.yesOption||"(Y/n)",this.noMsg=e.no||"no",this.noOption=e.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}_(e,t){return"y"===e.toLowerCase()?(this.value=!0,this.submit()):"n"===e.toLowerCase()?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(o.hide):this.out.write(a(this.outputText,this.out.columns)),super.render(),this.outputText=[s.symbol(this.done,this.aborted),e.bold(this.msg),s.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:e.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(n.line+o.to(0)+this.outputText))}}}function yl(){return Fo||(Fo=1,function(){const e=Go,t=Lo?jo:(Lo=1,jo={TextPrompt:tl(),SelectPrompt:il(),TogglePrompt:sl(),DatePrompt:pl(),NumberPrompt:ml(),MultiselectPrompt:fl(),AutocompletePrompt:gl(),AutocompleteMultiselectPrompt:bl(),ConfirmPrompt:wl()}),i=e=>e;function s(e,s,a={}){return new Promise(((r,n)=>{const o=new t[e](s),l=a.onAbort||i,c=a.onSubmit||i,u=a.onExit||i;o.on("state",s.onState||i),o.on("submit",(e=>r(c(e)))),o.on("exit",(e=>r(u(e)))),o.on("abort",(e=>n(l(e))))}))}e.text=e=>s("TextPrompt",e),e.password=t=>(t.style="password",e.text(t)),e.invisible=t=>(t.style="invisible",e.text(t)),e.number=e=>s("NumberPrompt",e),e.date=e=>s("DatePrompt",e),e.confirm=e=>s("ConfirmPrompt",e),e.list=e=>{const t=e.separator||",";return s("TextPrompt",e,{onSubmit:e=>e.split(t).map((e=>e.trim()))})},e.toggle=e=>s("TogglePrompt",e),e.select=e=>s("SelectPrompt",e),e.multiselect=e=>{e.choices=[].concat(e.choices||[]);const t=e=>e.filter((e=>e.selected)).map((e=>e.value));return s("MultiselectPrompt",e,{onAbort:t,onSubmit:t})},e.autocompleteMultiselect=e=>{e.choices=[].concat(e.choices||[]);const t=e=>e.filter((e=>e.selected)).map((e=>e.value));return s("AutocompleteMultiselectPrompt",e,{onAbort:t,onSubmit:t})};const a=(e,t)=>Promise.resolve(t.filter((t=>t.title.slice(0,e.length).toLowerCase()===e.toLowerCase())));e.autocomplete=e=>(e.suggest=e.suggest||a,e.choices=[].concat(e.choices||[]),s("AutocompletePrompt",e))}()),Go}function vl(){if(Zo)return Bo;function e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function t(t){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{};s%2?e(Object(a),!0).forEach((function(e){i(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(e,t)}(e))||t){i&&(e=i);var s=0,r=function(){};return{s:r,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw n}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function r(e,t,i,s,a,r,n){try{var o=e[r](n),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(s,a)}function n(e){return function(){var t=this,i=arguments;return new Promise((function(s,a){var n=e.apply(t,i);function o(e){r(n,s,a,o,l,"next",e)}function l(e){r(n,s,a,o,l,"throw",e)}o(void 0)}))}}Zo=1;const o=yl(),l=["suggest","format","onState","validate","onRender","type"],c=()=>{};function u(){return h.apply(this,arguments)}function h(){return h=n((function*(e=[],{onSubmit:i=c,onCancel:a=c}={}){const r={},h=u._override||{};let p,m,f,g,b,w;e=[].concat(e);const y=function(){var e=n((function*(e,t,i=!1){if(i||!e.validate||!0===e.validate(t))return e.format?yield e.format(t,r):t}));return function(t,i){return e.apply(this,arguments)}}();var v,S=s(e);try{for(S.s();!(v=S.n()).done;){m=v.value;var T=m;if(g=T.name,b=T.type,"function"==typeof b&&(b=yield b(p,t({},r),m),m.type=b),b){for(let e in m){if(l.includes(e))continue;let i=m[e];m[e]="function"==typeof i?yield i(p,t({},r),w):i}if(w=m,"string"!=typeof m.message)throw new Error("prompt message is required");var _=m;if(g=_.name,b=_.type,void 0===o[b])throw new Error(`prompt type (${b}) is not defined`);if(void 0===h[m.name]||(p=yield y(m,h[m.name]),void 0===p)){try{p=u._injected?d(u._injected,m.initial):yield o[b](m),r[g]=p=yield y(m,p,!0),f=yield i(m,p,r)}catch(e){f=!(yield a(m,r))}if(f)return r}else r[g]=p}}}catch(e){S.e(e)}finally{S.f()}return r})),h.apply(this,arguments)}function d(e,t){const i=e.shift();if(i instanceof Error)throw i;return void 0===i?t:i}return Bo=Object.assign(u,{prompt:u,prompts:o,inject:function(e){u._injected=(u._injected||[]).concat(e)},override:function(e){u._override=Object.assign({},e)}})}var Sl,Tl,_l,xl,Rl,Al,kl,Cl,Ml,Ol,Il,Dl,Pl,El,Wl,$l,Nl,Vl,Hl,jl,Ll,Fl,Bl,Zl,Gl,Yl,Xl,ql,Kl,Ul,zl,Jl,Ql,ec,tc,ic,sc,ac,rc,nc,oc,lc,cc,uc,hc,dc,pc,mc,fc,gc,bc,wc,yc,vc,Sc,Tc,_c,xc,Rc,Ac,kc,Cc,Mc,Oc,Ic,Dc={};function Pc(){return xl?_l:(xl=1,_l=e=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|"),i=new RegExp(t,"g");return"string"==typeof e?e.replace(i,""):e})}function Ec(){if(Al)return Rl;Al=1;const e=Pc(),{erase:t,cursor:i}=qo();return Rl=function(s,a){if(!a)return t.line+i.to(0);let r=0;const n=s.split(/\r?\n/);for(let t of n)r+=1+Math.floor(Math.max([...e(t)].length-1,0)/a);return t.lines(r)},Rl}function Wc(){if(Cl)return kl;Cl=1;const e={arrowUp:"↑",arrowDown:"↓",arrowLeft:"←",arrowRight:"→",radioOn:"◉",radioOff:"◯",tick:"✔",cross:"✖",ellipsis:"…",pointerSmall:"›",line:"─",pointer:"❯"},t={arrowUp:e.arrowUp,arrowDown:e.arrowDown,arrowLeft:e.arrowLeft,arrowRight:e.arrowRight,radioOn:"(*)",radioOff:"( )",tick:"√",cross:"×",ellipsis:"...",pointerSmall:"»",line:"─",pointer:">"},i="win32"===process.platform?t:e;return kl=i}function $c(){if(Ol)return Ml;Ol=1;const e=Yo(),t=Wc(),i=Object.freeze({password:{scale:1,render:e=>"*".repeat(e.length)},emoji:{scale:2,render:e=>"😃".repeat(e.length)},invisible:{scale:0,render:e=>""},default:{scale:1,render:e=>`${e}`}}),s=Object.freeze({aborted:e.red(t.cross),done:e.green(t.tick),exited:e.yellow(t.cross),default:e.cyan("?")});return Ml={styles:i,render:e=>i[e]||i.default,symbols:s,symbol:(e,t,i)=>t?s.aborted:i?s.exited:e?s.done:s.default,delimiter:i=>e.gray(i?t.ellipsis:t.pointerSmall),item:(i,s)=>e.gray(i?s?t.pointerSmall:"+":t.line)}}function Nc(){if(Dl)return Il;Dl=1;const e=Pc();return Il=function(t,i){let s=String(e(t)||"").split(/\r?\n/);return i?s.map((e=>Math.ceil(e.length/i))).reduce(((e,t)=>e+t)):s.length}}function Vc(){return Vl?Nl:(Vl=1,Nl={action:Tl?Sl:(Tl=1,Sl=(e,t)=>{if(!e.meta||"escape"===e.name){if(e.ctrl){if("a"===e.name)return"first";if("c"===e.name)return"abort";if("d"===e.name)return"abort";if("e"===e.name)return"last";if("g"===e.name)return"reset"}if(t){if("j"===e.name)return"down";if("k"===e.name)return"up"}return"return"===e.name||"enter"===e.name?"submit":"backspace"===e.name?"delete":"delete"===e.name?"deleteForward":"abort"===e.name?"abort":"escape"===e.name?"exit":"tab"===e.name?"next":"pagedown"===e.name?"nextPage":"pageup"===e.name?"prevPage":"home"===e.name?"home":"end"===e.name?"end":"up"===e.name?"up":"down"===e.name?"down":"right"===e.name?"right":"left"===e.name&&"left"}}),clear:Ec(),style:$c(),strip:Pc(),figures:Wc(),lines:Nc(),wrap:El?Pl:(El=1,Pl=(e,t={})=>{const i=Number.isSafeInteger(parseInt(t.margin))?new Array(parseInt(t.margin)).fill(" ").join(""):t.margin||"",s=t.width;return(e||"").split(/\r?\n/g).map((e=>e.split(/\s+/g).reduce(((e,t)=>(t.length+i.length>=s||e[e.length-1].length+t.length+1<s?e[e.length-1]+=` ${t}`:e.push(`${i}${t}`),e)),[i]).join("\n"))).join("\n")}),entriesToDisplay:$l?Wl:($l=1,Wl=(e,t,i)=>{i=i||t;let s=Math.min(t-i,e-Math.floor(i/2));return s<0&&(s=0),{startIndex:s,endIndex:Math.min(s+i,t)}})})}function Hc(){if(jl)return Hl;jl=1;const e=r,{action:t}=Vc(),i=n,{beep:s,cursor:a}=qo(),o=Yo();return Hl=class extends i{constructor(i={}){super(),this.firstRender=!0,this.in=i.stdin||process.stdin,this.out=i.stdout||process.stdout,this.onRender=(i.onRender||(()=>{})).bind(this);const s=e.createInterface({input:this.in,escapeCodeTimeout:50});e.emitKeypressEvents(this.in,s),this.in.isTTY&&this.in.setRawMode(!0);const r=["SelectPrompt","MultiselectPrompt"].indexOf(this.constructor.name)>-1,n=(e,i)=>{let s=t(i,r);!1===s?this._&&this._(e,i):"function"==typeof this[s]?this[s](i):this.bell()};this.close=()=>{this.out.write(a.show),this.in.removeListener("keypress",n),this.in.isTTY&&this.in.setRawMode(!1),s.close(),this.emit(this.aborted?"abort":this.exited?"exit":"submit",this.value),this.closed=!0},this.in.on("keypress",n)}fire(){this.emit("state",{value:this.value,aborted:!!this.aborted,exited:!!this.exited})}bell(){this.out.write(s)}render(){this.onRender(o),this.firstRender&&(this.firstRender=!1)}}}function jc(){if(Fl)return Ll;Fl=1;const e=Yo(),t=Hc(),{erase:i,cursor:s}=qo(),{style:a,clear:r,lines:n,figures:o}=Vc();return Ll=class extends t{constructor(e={}){super(e),this.transform=a.render(e.style),this.scale=this.transform.scale,this.msg=e.message,this.initial=e.initial||"",this.validator=e.validate||(()=>!0),this.value="",this.errorMsg=e.error||"Please Enter A Valid Value",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.clear=r("",this.out.columns),this.render()}set value(t){!t&&this.initial?(this.placeholder=!0,this.rendered=e.gray(this.transform.render(this.initial))):(this.placeholder=!1,this.rendered=this.transform.render(t)),this._value=t,this.fire()}get value(){return this._value}reset(){this.value="",this.cursor=Number(!!this.initial),this.cursorOffset=0,this.fire(),this.render()}exit(){this.abort()}abort(){this.value=this.value||this.initial,this.done=this.aborted=!0,this.error=!1,this.red=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}async validate(){let e=await this.validator(this.value);"string"==typeof e&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(this.value=this.value||this.initial,this.cursorOffset=0,this.cursor=this.rendered.length,await this.validate(),this.error)return this.red=!0,this.fire(),void this.render();this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}next(){if(!this.placeholder)return this.bell();this.value=this.initial,this.cursor=this.rendered.length,this.fire(),this.render()}moveCursor(e){this.placeholder||(this.cursor=this.cursor+e,this.cursorOffset+=e)}_(e,t){let i=this.value.slice(0,this.cursor),s=this.value.slice(this.cursor);this.value=`${i}${e}${s}`,this.red=!1,this.cursor=this.placeholder?0:i.length+1,this.render()}delete(){if(this.isCursorAtStart())return this.bell();let e=this.value.slice(0,this.cursor-1),t=this.value.slice(this.cursor);this.value=`${e}${t}`,this.red=!1,this.isCursorAtStart()?this.cursorOffset=0:(this.cursorOffset++,this.moveCursor(-1)),this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();let e=this.value.slice(0,this.cursor),t=this.value.slice(this.cursor+1);this.value=`${e}${t}`,this.red=!1,this.isCursorAtEnd()?this.cursorOffset=0:this.cursorOffset++,this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length,this.render()}left(){if(this.cursor<=0||this.placeholder)return this.bell();this.moveCursor(-1),this.render()}right(){if(this.cursor*this.scale>=this.rendered.length||this.placeholder)return this.bell();this.moveCursor(1),this.render()}isCursorAtStart(){return 0===this.cursor||this.placeholder&&1===this.cursor}isCursorAtEnd(){return this.cursor===this.rendered.length||this.placeholder&&this.cursor===this.rendered.length+1}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(s.down(n(this.outputError,this.out.columns)-1)+r(this.outputError,this.out.columns)),this.out.write(r(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[a.symbol(this.done,this.aborted),e.bold(this.msg),a.delimiter(this.done),this.red?e.red(this.rendered):this.rendered].join(" "),this.error&&(this.outputError+=this.errorMsg.split("\n").reduce(((t,i,s)=>t+`\n${s?" ":o.pointerSmall} ${e.red().italic(i)}`),"")),this.out.write(i.line+s.to(0)+this.outputText+s.save+this.outputError+s.restore+s.move(this.cursorOffset,0)))}}}function Lc(){if(Zl)return Bl;Zl=1;const e=Yo(),t=Hc(),{style:i,clear:s,figures:a,wrap:r,entriesToDisplay:n}=Vc(),{cursor:o}=qo();return Bl=class extends t{constructor(e={}){super(e),this.msg=e.message,this.hint=e.hint||"- Use arrow-keys. Return to submit.",this.warn=e.warn||"- This option is disabled",this.cursor=e.initial||0,this.choices=e.choices.map(((e,t)=>("string"==typeof e&&(e={title:e,value:t}),{title:e&&(e.title||e.value||e),value:e&&(void 0===e.value?t:e.value),description:e&&e.description,selected:e&&e.selected,disabled:e&&e.disabled}))),this.optionsPerPage=e.optionsPerPage||10,this.value=(this.choices[this.cursor]||{}).value,this.clear=s("",this.out.columns),this.render()}moveCursor(e){this.cursor=e,this.value=this.choices[e].value,this.fire()}reset(){this.moveCursor(0),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.selection.disabled?this.bell():(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close())}first(){this.moveCursor(0),this.render()}last(){this.moveCursor(this.choices.length-1),this.render()}up(){0===this.cursor?this.moveCursor(this.choices.length-1):this.moveCursor(this.cursor-1),this.render()}down(){this.cursor===this.choices.length-1?this.moveCursor(0):this.moveCursor(this.cursor+1),this.render()}next(){this.moveCursor((this.cursor+1)%this.choices.length),this.render()}_(e,t){if(" "===e)return this.submit()}get selection(){return this.choices[this.cursor]}render(){if(this.closed)return;this.firstRender?this.out.write(o.hide):this.out.write(s(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:l}=n(this.cursor,this.choices.length,this.optionsPerPage);if(this.outputText=[i.symbol(this.done,this.aborted),e.bold(this.msg),i.delimiter(!1),this.done?this.selection.title:this.selection.disabled?e.yellow(this.warn):e.gray(this.hint)].join(" "),!this.done){this.outputText+="\n";for(let i=t;i<l;i++){let s,n,o="",c=this.choices[i];n=i===t&&t>0?a.arrowUp:i===l-1&&l<this.choices.length?a.arrowDown:" ",c.disabled?(s=this.cursor===i?e.gray().underline(c.title):e.strikethrough().gray(c.title),n=(this.cursor===i?e.bold().gray(a.pointer)+" ":"  ")+n):(s=this.cursor===i?e.cyan().underline(c.title):c.title,n=(this.cursor===i?e.cyan(a.pointer)+" ":"  ")+n,c.description&&this.cursor===i&&(o=` - ${c.description}`,(n.length+s.length+o.length>=this.out.columns||c.description.split(/\r?\n/).length>1)&&(o="\n"+r(c.description,{margin:3,width:this.out.columns})))),this.outputText+=`${n} ${s}${e.gray(o)}\n`}}this.out.write(this.outputText)}}}function Fc(){if(Yl)return Gl;Yl=1;const e=Yo(),t=Hc(),{style:i,clear:s}=Vc(),{cursor:a,erase:r}=qo();return Gl=class extends t{constructor(e={}){super(e),this.msg=e.message,this.value=!!e.initial,this.active=e.active||"on",this.inactive=e.inactive||"off",this.initialValue=this.value,this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}deactivate(){if(!1===this.value)return this.bell();this.value=!1,this.render()}activate(){if(!0===this.value)return this.bell();this.value=!0,this.render()}delete(){this.deactivate()}left(){this.deactivate()}right(){this.activate()}down(){this.deactivate()}up(){this.activate()}next(){this.value=!this.value,this.fire(),this.render()}_(e,t){if(" "===e)this.value=!this.value;else if("1"===e)this.value=!0;else{if("0"!==e)return this.bell();this.value=!1}this.render()}render(){this.closed||(this.firstRender?this.out.write(a.hide):this.out.write(s(this.outputText,this.out.columns)),super.render(),this.outputText=[i.symbol(this.done,this.aborted),e.bold(this.msg),i.delimiter(this.done),this.value?this.inactive:e.cyan().underline(this.inactive),e.gray("/"),this.value?e.cyan().underline(this.active):this.active].join(" "),this.out.write(r.line+a.to(0)+this.outputText))}}}function Bc(){if(ql)return Xl;ql=1;class e{constructor({token:e,date:t,parts:i,locales:s}){this.token=e,this.date=t||new Date,this.parts=i||[this],this.locales=s||{}}up(){}down(){}next(){const t=this.parts.indexOf(this);return this.parts.find(((i,s)=>s>t&&i instanceof e))}setTo(e){}prev(){let t=[].concat(this.parts).reverse();const i=t.indexOf(this);return t.find(((t,s)=>s>i&&t instanceof e))}toString(){return String(this.date)}}return Xl=e}function Zc(){if(Ul)return Kl;Ul=1;const e=Bc();return Kl=class extends e{constructor(e={}){super(e)}up(){this.date.setHours((this.date.getHours()+12)%24)}down(){this.up()}toString(){let e=this.date.getHours()>12?"pm":"am";return/\A/.test(this.token)?e.toUpperCase():e}}}function Gc(){if(Jl)return zl;Jl=1;const e=Bc();return zl=class extends e{constructor(e={}){super(e)}up(){this.date.setDate(this.date.getDate()+1)}down(){this.date.setDate(this.date.getDate()-1)}setTo(e){this.date.setDate(parseInt(e.substr(-2)))}toString(){let e=this.date.getDate(),t=this.date.getDay();return"DD"===this.token?String(e).padStart(2,"0"):"Do"===this.token?e+(i=e,1==(i%=10)?"st":2===i?"nd":3===i?"rd":"th"):"d"===this.token?t+1:"ddd"===this.token?this.locales.weekdaysShort[t]:"dddd"===this.token?this.locales.weekdays[t]:e;var i}},zl}function Yc(){if(ec)return Ql;ec=1;const e=Bc();return Ql=class extends e{constructor(e={}){super(e)}up(){this.date.setHours(this.date.getHours()+1)}down(){this.date.setHours(this.date.getHours()-1)}setTo(e){this.date.setHours(parseInt(e.substr(-2)))}toString(){let e=this.date.getHours();return/h/.test(this.token)&&(e=e%12||12),this.token.length>1?String(e).padStart(2,"0"):e}}}function Xc(){if(ic)return tc;ic=1;const e=Bc();return tc=class extends e{constructor(e={}){super(e)}up(){this.date.setMilliseconds(this.date.getMilliseconds()+1)}down(){this.date.setMilliseconds(this.date.getMilliseconds()-1)}setTo(e){this.date.setMilliseconds(parseInt(e.substr(-this.token.length)))}toString(){return String(this.date.getMilliseconds()).padStart(4,"0").substr(0,this.token.length)}}}function qc(){if(ac)return sc;ac=1;const e=Bc();return sc=class extends e{constructor(e={}){super(e)}up(){this.date.setMinutes(this.date.getMinutes()+1)}down(){this.date.setMinutes(this.date.getMinutes()-1)}setTo(e){this.date.setMinutes(parseInt(e.substr(-2)))}toString(){let e=this.date.getMinutes();return this.token.length>1?String(e).padStart(2,"0"):e}}}function Kc(){if(nc)return rc;nc=1;const e=Bc();return rc=class extends e{constructor(e={}){super(e)}up(){this.date.setMonth(this.date.getMonth()+1)}down(){this.date.setMonth(this.date.getMonth()-1)}setTo(e){e=parseInt(e.substr(-2))-1,this.date.setMonth(e<0?0:e)}toString(){let e=this.date.getMonth(),t=this.token.length;return 2===t?String(e+1).padStart(2,"0"):3===t?this.locales.monthsShort[e]:4===t?this.locales.months[e]:String(e+1)}}}function Uc(){if(lc)return oc;lc=1;const e=Bc();return oc=class extends e{constructor(e={}){super(e)}up(){this.date.setSeconds(this.date.getSeconds()+1)}down(){this.date.setSeconds(this.date.getSeconds()-1)}setTo(e){this.date.setSeconds(parseInt(e.substr(-2)))}toString(){let e=this.date.getSeconds();return this.token.length>1?String(e).padStart(2,"0"):e}}}function zc(){if(uc)return cc;uc=1;const e=Bc();return cc=class extends e{constructor(e={}){super(e)}up(){this.date.setFullYear(this.date.getFullYear()+1)}down(){this.date.setFullYear(this.date.getFullYear()-1)}setTo(e){this.date.setFullYear(e.substr(-4))}toString(){let e=String(this.date.getFullYear()).padStart(4,"0");return 2===this.token.length?e.substr(-2):e}}}function Jc(){if(mc)return pc;mc=1;const e=Yo(),t=Hc(),{style:i,clear:s,figures:a}=Vc(),{erase:r,cursor:n}=qo(),{DatePart:o,Meridiem:l,Day:c,Hours:u,Milliseconds:h,Minutes:d,Month:p,Seconds:m,Year:f}=dc?hc:(dc=1,hc={DatePart:Bc(),Meridiem:Zc(),Day:Gc(),Hours:Yc(),Milliseconds:Xc(),Minutes:qc(),Month:Kc(),Seconds:Uc(),Year:zc()}),g=/\\(.)|"((?:\\["\\]|[^"])+)"|(D[Do]?|d{3,4}|d)|(M{1,4})|(YY(?:YY)?)|([aA])|([Hh]{1,2})|(m{1,2})|(s{1,2})|(S{1,4})|./g,b={1:({token:e})=>e.replace(/\\(.)/g,"$1"),2:e=>new c(e),3:e=>new p(e),4:e=>new f(e),5:e=>new l(e),6:e=>new u(e),7:e=>new d(e),8:e=>new m(e),9:e=>new h(e)},w={months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthsShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),weekdaysShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")};return pc=class extends t{constructor(e={}){super(e),this.msg=e.message,this.cursor=0,this.typed="",this.locales=Object.assign(w,e.locales),this._date=e.initial||new Date,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.mask=e.mask||"YYYY-MM-DD HH:mm:ss",this.clear=s("",this.out.columns),this.render()}get value(){return this.date}get date(){return this._date}set date(e){e&&this._date.setTime(e.getTime())}set mask(e){let t;for(this.parts=[];t=g.exec(e);){let e=t.shift(),i=t.findIndex((e=>null!=e));this.parts.push(i in b?b[i]({token:t[i]||e,date:this.date,parts:this.parts,locales:this.locales}):t[i]||e)}let i=this.parts.reduce(((e,t)=>("string"==typeof t&&"string"==typeof e[e.length-1]?e[e.length-1]+=t:e.push(t),e)),[]);this.parts.splice(0),this.parts.push(...i),this.reset()}moveCursor(e){this.typed="",this.cursor=e,this.fire()}reset(){this.moveCursor(this.parts.findIndex((e=>e instanceof o))),this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}async validate(){let e=await this.validator(this.value);"string"==typeof e&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(await this.validate(),this.error)return this.color="red",this.fire(),void this.render();this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}up(){this.typed="",this.parts[this.cursor].up(),this.render()}down(){this.typed="",this.parts[this.cursor].down(),this.render()}left(){let e=this.parts[this.cursor].prev();if(null==e)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}right(){let e=this.parts[this.cursor].next();if(null==e)return this.bell();this.moveCursor(this.parts.indexOf(e)),this.render()}next(){let e=this.parts[this.cursor].next();this.moveCursor(e?this.parts.indexOf(e):this.parts.findIndex((e=>e instanceof o))),this.render()}_(e){/\d/.test(e)&&(this.typed+=e,this.parts[this.cursor].setTo(this.typed),this.render())}render(){this.closed||(this.firstRender?this.out.write(n.hide):this.out.write(s(this.outputText,this.out.columns)),super.render(),this.outputText=[i.symbol(this.done,this.aborted),e.bold(this.msg),i.delimiter(!1),this.parts.reduce(((t,i,s)=>t.concat(s!==this.cursor||this.done?i:e.cyan().underline(i.toString()))),[]).join("")].join(" "),this.error&&(this.outputText+=this.errorMsg.split("\n").reduce(((t,i,s)=>t+`\n${s?" ":a.pointerSmall} ${e.red().italic(i)}`),"")),this.out.write(r.line+n.to(0)+this.outputText))}},pc}function Qc(){if(gc)return fc;gc=1;const e=Yo(),t=Hc(),{cursor:i,erase:s}=qo(),{style:a,figures:r,clear:n,lines:o}=Vc(),l=/[0-9]/,c=e=>void 0!==e,u=(e,t)=>{let i=Math.pow(10,t);return Math.round(e*i)/i};return fc=class extends t{constructor(e={}){super(e),this.transform=a.render(e.style),this.msg=e.message,this.initial=c(e.initial)?e.initial:"",this.float=!!e.float,this.round=e.round||2,this.inc=e.increment||1,this.min=c(e.min)?e.min:-1/0,this.max=c(e.max)?e.max:1/0,this.errorMsg=e.error||"Please Enter A Valid Value",this.validator=e.validate||(()=>!0),this.color="cyan",this.value="",this.typed="",this.lastHit=0,this.render()}set value(t){t||0===t?(this.placeholder=!1,this.rendered=this.transform.render(`${u(t,this.round)}`),this._value=u(t,this.round)):(this.placeholder=!0,this.rendered=e.gray(this.transform.render(`${this.initial}`)),this._value=""),this.fire()}get value(){return this._value}parse(e){return this.float?parseFloat(e):parseInt(e)}valid(e){return"-"===e||"."===e&&this.float||l.test(e)}reset(){this.typed="",this.value="",this.fire(),this.render()}exit(){this.abort()}abort(){let e=this.value;this.value=""!==e?e:this.initial,this.done=this.aborted=!0,this.error=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}async validate(){let e=await this.validator(this.value);"string"==typeof e&&(this.errorMsg=e,e=!1),this.error=!e}async submit(){if(await this.validate(),this.error)return this.color="red",this.fire(),void this.render();let e=this.value;this.value=""!==e?e:this.initial,this.done=!0,this.aborted=!1,this.error=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}up(){if(this.typed="",""===this.value&&(this.value=this.min-this.inc),this.value>=this.max)return this.bell();this.value+=this.inc,this.color="cyan",this.fire(),this.render()}down(){if(this.typed="",""===this.value&&(this.value=this.min+this.inc),this.value<=this.min)return this.bell();this.value-=this.inc,this.color="cyan",this.fire(),this.render()}delete(){let e=this.value.toString();if(0===e.length)return this.bell();this.value=this.parse(e=e.slice(0,-1))||"",""!==this.value&&this.value<this.min&&(this.value=this.min),this.color="cyan",this.fire(),this.render()}next(){this.value=this.initial,this.fire(),this.render()}_(e,t){if(!this.valid(e))return this.bell();const i=Date.now();if(i-this.lastHit>1e3&&(this.typed=""),this.typed+=e,this.lastHit=i,this.color="cyan","."===e)return this.fire();this.value=Math.min(this.parse(this.typed),this.max),this.value>this.max&&(this.value=this.max),this.value<this.min&&(this.value=this.min),this.fire(),this.render()}render(){this.closed||(this.firstRender||(this.outputError&&this.out.write(i.down(o(this.outputError,this.out.columns)-1)+n(this.outputError,this.out.columns)),this.out.write(n(this.outputText,this.out.columns))),super.render(),this.outputError="",this.outputText=[a.symbol(this.done,this.aborted),e.bold(this.msg),a.delimiter(this.done),this.done&&(this.done||this.placeholder)?this.rendered:e[this.color]().underline(this.rendered)].join(" "),this.error&&(this.outputError+=this.errorMsg.split("\n").reduce(((t,i,s)=>t+`\n${s?" ":r.pointerSmall} ${e.red().italic(i)}`),"")),this.out.write(s.line+i.to(0)+this.outputText+i.save+this.outputError+i.restore))}}}function eu(){if(wc)return bc;wc=1;const e=Yo(),{cursor:t}=qo(),i=Hc(),{clear:s,figures:a,style:r,wrap:n,entriesToDisplay:o}=Vc();return bc=class extends i{constructor(e={}){super(e),this.msg=e.message,this.cursor=e.cursor||0,this.scrollIndex=e.cursor||0,this.hint=e.hint||"",this.warn=e.warn||"- This option is disabled -",this.minSelected=e.min,this.showMinError=!1,this.maxChoices=e.max,this.instructions=e.instructions,this.optionsPerPage=e.optionsPerPage||10,this.value=e.choices.map(((e,t)=>("string"==typeof e&&(e={title:e,value:t}),{title:e&&(e.title||e.value||e),description:e&&e.description,value:e&&(void 0===e.value?t:e.value),selected:e&&e.selected,disabled:e&&e.disabled}))),this.clear=s("",this.out.columns),e.overrideRender||this.render()}reset(){this.value.map((e=>!e.selected)),this.cursor=0,this.fire(),this.render()}selected(){return this.value.filter((e=>e.selected))}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){const e=this.value.filter((e=>e.selected));this.minSelected&&e.length<this.minSelected?(this.showMinError=!0,this.render()):(this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close())}first(){this.cursor=0,this.render()}last(){this.cursor=this.value.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.value.length,this.render()}up(){0===this.cursor?this.cursor=this.value.length-1:this.cursor--,this.render()}down(){this.cursor===this.value.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.value[this.cursor].selected=!1,this.render()}right(){if(this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();this.value[this.cursor].selected=!0,this.render()}handleSpaceToggle(){const e=this.value[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}toggleAll(){if(void 0!==this.maxChoices||this.value[this.cursor].disabled)return this.bell();const e=!this.value[this.cursor].selected;this.value.filter((e=>!e.disabled)).forEach((t=>t.selected=e)),this.render()}_(e,t){if(" "===e)this.handleSpaceToggle();else{if("a"!==e)return this.bell();this.toggleAll()}}renderInstructions(){return void 0===this.instructions||this.instructions?"string"==typeof this.instructions?this.instructions:`\nInstructions:\n    ${a.arrowUp}/${a.arrowDown}: Highlight option\n    ${a.arrowLeft}/${a.arrowRight}/[space]: Toggle selection\n`+(void 0===this.maxChoices?"    a: Toggle all\n":"")+"    enter/return: Complete answer":""}renderOption(t,i,s,r){const o=(i.selected?e.green(a.radioOn):a.radioOff)+" "+r+" ";let l,c;return i.disabled?l=t===s?e.gray().underline(i.title):e.strikethrough().gray(i.title):(l=t===s?e.cyan().underline(i.title):i.title,t===s&&i.description&&(c=` - ${i.description}`,(o.length+l.length+c.length>=this.out.columns||i.description.split(/\r?\n/).length>1)&&(c="\n"+n(i.description,{margin:o.length,width:this.out.columns})))),o+l+e.gray(c||"")}paginateOptions(t){if(0===t.length)return e.red("No matches for this query.");let i,{startIndex:s,endIndex:r}=o(this.cursor,t.length,this.optionsPerPage),n=[];for(let e=s;e<r;e++)i=e===s&&s>0?a.arrowUp:e===r-1&&r<t.length?a.arrowDown:" ",n.push(this.renderOption(this.cursor,t[e],e,i));return"\n"+n.join("\n")}renderOptions(e){return this.done?"":this.paginateOptions(e)}renderDoneOrInstructions(){if(this.done)return this.value.filter((e=>e.selected)).map((e=>e.title)).join(", ");const t=[e.gray(this.hint),this.renderInstructions()];return this.value[this.cursor].disabled&&t.push(e.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(t.hide),super.render();let i=[r.symbol(this.done,this.aborted),e.bold(this.msg),r.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(i+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),i+=this.renderOptions(this.value),this.out.write(this.clear+i),this.clear=s(i,this.out.columns)}},bc}function tu(){if(vc)return yc;vc=1;const e=Yo(),t=Hc(),{erase:i,cursor:s}=qo(),{style:a,clear:r,figures:n,wrap:o,entriesToDisplay:l}=Vc(),c=(e,t)=>e[t]&&(e[t].value||e[t].title||e[t]),u=(e,t)=>e[t]&&(e[t].title||e[t].value||e[t]);return yc=class extends t{constructor(e={}){super(e),this.msg=e.message,this.suggest=e.suggest,this.choices=e.choices,this.initial="number"==typeof e.initial?e.initial:((e,t)=>{const i=e.findIndex((e=>e.value===t||e.title===t));return i>-1?i:void 0})(e.choices,e.initial),this.select=this.initial||e.cursor||0,this.i18n={noMatches:e.noMatches||"no matches found"},this.fallback=e.fallback||this.initial,this.clearFirst=e.clearFirst||!1,this.suggestions=[],this.input="",this.limit=e.limit||10,this.cursor=0,this.transform=a.render(e.style),this.scale=this.transform.scale,this.render=this.render.bind(this),this.complete=this.complete.bind(this),this.clear=r("",this.out.columns),this.complete(this.render),this.render()}set fallback(e){this._fb=Number.isSafeInteger(parseInt(e))?parseInt(e):e}get fallback(){let e;return"number"==typeof this._fb?e=this.choices[this._fb]:"string"==typeof this._fb&&(e={title:this._fb}),e||this._fb||{title:this.i18n.noMatches}}moveSelect(e){this.select=e,this.suggestions.length>0?this.value=c(this.suggestions,e):this.value=this.fallback.value,this.fire()}async complete(e){const t=this.completing=this.suggest(this.input,this.choices),i=await t;if(this.completing!==t)return;this.suggestions=i.map(((e,t,i)=>({title:u(i,t),value:c(i,t),description:e.description}))),this.completing=!1;const s=Math.max(i.length-1,0);this.moveSelect(Math.min(s,this.select)),e&&e()}reset(){this.input="",this.complete((()=>{this.moveSelect(void 0!==this.initial?this.initial:0),this.render()})),this.render()}exit(){this.clearFirst&&this.input.length>0?this.reset():(this.done=this.exited=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close())}abort(){this.done=this.aborted=!0,this.exited=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.done=!0,this.aborted=this.exited=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}_(e,t){let i=this.input.slice(0,this.cursor),s=this.input.slice(this.cursor);this.input=`${i}${e}${s}`,this.cursor=i.length+1,this.complete(this.render),this.render()}delete(){if(0===this.cursor)return this.bell();let e=this.input.slice(0,this.cursor-1),t=this.input.slice(this.cursor);this.input=`${e}${t}`,this.complete(this.render),this.cursor=this.cursor-1,this.render()}deleteForward(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();let e=this.input.slice(0,this.cursor),t=this.input.slice(this.cursor+1);this.input=`${e}${t}`,this.complete(this.render),this.render()}first(){this.moveSelect(0),this.render()}last(){this.moveSelect(this.suggestions.length-1),this.render()}up(){0===this.select?this.moveSelect(this.suggestions.length-1):this.moveSelect(this.select-1),this.render()}down(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}next(){this.select===this.suggestions.length-1?this.moveSelect(0):this.moveSelect(this.select+1),this.render()}nextPage(){this.moveSelect(Math.min(this.select+this.limit,this.suggestions.length-1)),this.render()}prevPage(){this.moveSelect(Math.max(this.select-this.limit,0)),this.render()}left(){if(this.cursor<=0)return this.bell();this.cursor=this.cursor-1,this.render()}right(){if(this.cursor*this.scale>=this.rendered.length)return this.bell();this.cursor=this.cursor+1,this.render()}renderOption(t,i,s,a){let r,l=s?n.arrowUp:a?n.arrowDown:" ",c=i?e.cyan().underline(t.title):t.title;return l=(i?e.cyan(n.pointer)+" ":"  ")+l,t.description&&(r=` - ${t.description}`,(l.length+c.length+r.length>=this.out.columns||t.description.split(/\r?\n/).length>1)&&(r="\n"+o(t.description,{margin:3,width:this.out.columns}))),l+" "+c+e.gray(r||"")}render(){if(this.closed)return;this.firstRender?this.out.write(s.hide):this.out.write(r(this.outputText,this.out.columns)),super.render();let{startIndex:t,endIndex:n}=l(this.select,this.choices.length,this.limit);if(this.outputText=[a.symbol(this.done,this.aborted,this.exited),e.bold(this.msg),a.delimiter(this.completing),this.done&&this.suggestions[this.select]?this.suggestions[this.select].title:this.rendered=this.transform.render(this.input)].join(" "),!this.done){const i=this.suggestions.slice(t,n).map(((e,i)=>this.renderOption(e,this.select===i+t,0===i&&t>0,i+t===n-1&&n<this.choices.length))).join("\n");this.outputText+="\n"+(i||e.gray(this.fallback.title))}this.out.write(i.line+s.to(0)+this.outputText)}}}function iu(){if(Tc)return Sc;Tc=1;const e=Yo(),{cursor:t}=qo(),i=eu(),{clear:s,style:a,figures:r}=Vc();return Sc=class extends i{constructor(e={}){e.overrideRender=!0,super(e),this.inputValue="",this.clear=s("",this.out.columns),this.filteredOptions=this.value,this.render()}last(){this.cursor=this.filteredOptions.length-1,this.render()}next(){this.cursor=(this.cursor+1)%this.filteredOptions.length,this.render()}up(){0===this.cursor?this.cursor=this.filteredOptions.length-1:this.cursor--,this.render()}down(){this.cursor===this.filteredOptions.length-1?this.cursor=0:this.cursor++,this.render()}left(){this.filteredOptions[this.cursor].selected=!1,this.render()}right(){if(this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();this.filteredOptions[this.cursor].selected=!0,this.render()}delete(){this.inputValue.length&&(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.updateFilteredOptions())}updateFilteredOptions(){const e=this.filteredOptions[this.cursor];this.filteredOptions=this.value.filter((e=>!this.inputValue||(!("string"!=typeof e.title||!e.title.toLowerCase().includes(this.inputValue.toLowerCase()))||!("string"!=typeof e.value||!e.value.toLowerCase().includes(this.inputValue.toLowerCase())))));const t=this.filteredOptions.findIndex((t=>t===e));this.cursor=t<0?0:t,this.render()}handleSpaceToggle(){const e=this.filteredOptions[this.cursor];if(e.selected)e.selected=!1,this.render();else{if(e.disabled||this.value.filter((e=>e.selected)).length>=this.maxChoices)return this.bell();e.selected=!0,this.render()}}handleInputChange(e){this.inputValue=this.inputValue+e,this.updateFilteredOptions()}_(e,t){" "===e?this.handleSpaceToggle():this.handleInputChange(e)}renderInstructions(){return void 0===this.instructions||this.instructions?"string"==typeof this.instructions?this.instructions:`\nInstructions:\n    ${r.arrowUp}/${r.arrowDown}: Highlight option\n    ${r.arrowLeft}/${r.arrowRight}/[space]: Toggle selection\n    [a,b,c]/delete: Filter choices\n    enter/return: Complete answer\n`:""}renderCurrentInput(){return`\nFiltered results for: ${this.inputValue?this.inputValue:e.gray("Enter something to filter")}\n`}renderOption(t,i,s){let a;return a=i.disabled?t===s?e.gray().underline(i.title):e.strikethrough().gray(i.title):t===s?e.cyan().underline(i.title):i.title,(i.selected?e.green(r.radioOn):r.radioOff)+"  "+a}renderDoneOrInstructions(){if(this.done)return this.value.filter((e=>e.selected)).map((e=>e.title)).join(", ");const t=[e.gray(this.hint),this.renderInstructions(),this.renderCurrentInput()];return this.filteredOptions.length&&this.filteredOptions[this.cursor].disabled&&t.push(e.yellow(this.warn)),t.join(" ")}render(){if(this.closed)return;this.firstRender&&this.out.write(t.hide),super.render();let i=[a.symbol(this.done,this.aborted),e.bold(this.msg),a.delimiter(!1),this.renderDoneOrInstructions()].join(" ");this.showMinError&&(i+=e.red(`You must select a minimum of ${this.minSelected} choices.`),this.showMinError=!1),i+=this.renderOptions(this.filteredOptions),this.out.write(this.clear+i),this.clear=s(i,this.out.columns)}},Sc}function su(){if(xc)return _c;xc=1;const e=Yo(),t=Hc(),{style:i,clear:s}=Vc(),{erase:a,cursor:r}=qo();return _c=class extends t{constructor(e={}){super(e),this.msg=e.message,this.value=e.initial,this.initialValue=!!e.initial,this.yesMsg=e.yes||"yes",this.yesOption=e.yesOption||"(Y/n)",this.noMsg=e.no||"no",this.noOption=e.noOption||"(y/N)",this.render()}reset(){this.value=this.initialValue,this.fire(),this.render()}exit(){this.abort()}abort(){this.done=this.aborted=!0,this.fire(),this.render(),this.out.write("\n"),this.close()}submit(){this.value=this.value||!1,this.done=!0,this.aborted=!1,this.fire(),this.render(),this.out.write("\n"),this.close()}_(e,t){return"y"===e.toLowerCase()?(this.value=!0,this.submit()):"n"===e.toLowerCase()?(this.value=!1,this.submit()):this.bell()}render(){this.closed||(this.firstRender?this.out.write(r.hide):this.out.write(s(this.outputText,this.out.columns)),super.render(),this.outputText=[i.symbol(this.done,this.aborted),e.bold(this.msg),i.delimiter(this.done),this.done?this.value?this.yesMsg:this.noMsg:e.gray(this.initialValue?this.yesOption:this.noOption)].join(" "),this.out.write(a.line+r.to(0)+this.outputText))}}}function au(){return kc||(kc=1,function(){const e=Dc,t=Ac?Rc:(Ac=1,Rc={TextPrompt:jc(),SelectPrompt:Lc(),TogglePrompt:Fc(),DatePrompt:Jc(),NumberPrompt:Qc(),MultiselectPrompt:eu(),AutocompletePrompt:tu(),AutocompleteMultiselectPrompt:iu(),ConfirmPrompt:su()}),i=e=>e;function s(e,s,a={}){return new Promise(((r,n)=>{const o=new t[e](s),l=a.onAbort||i,c=a.onSubmit||i,u=a.onExit||i;o.on("state",s.onState||i),o.on("submit",(e=>r(c(e)))),o.on("exit",(e=>r(u(e)))),o.on("abort",(e=>n(l(e))))}))}e.text=e=>s("TextPrompt",e),e.password=t=>(t.style="password",e.text(t)),e.invisible=t=>(t.style="invisible",e.text(t)),e.number=e=>s("NumberPrompt",e),e.date=e=>s("DatePrompt",e),e.confirm=e=>s("ConfirmPrompt",e),e.list=e=>{const t=e.separator||",";return s("TextPrompt",e,{onSubmit:e=>e.split(t).map((e=>e.trim()))})},e.toggle=e=>s("TogglePrompt",e),e.select=e=>s("SelectPrompt",e),e.multiselect=e=>{e.choices=[].concat(e.choices||[]);const t=e=>e.filter((e=>e.selected)).map((e=>e.value));return s("MultiselectPrompt",e,{onAbort:t,onSubmit:t})},e.autocompleteMultiselect=e=>{e.choices=[].concat(e.choices||[]);const t=e=>e.filter((e=>e.selected)).map((e=>e.value));return s("AutocompleteMultiselectPrompt",e,{onAbort:t,onSubmit:t})};const a=(e,t)=>Promise.resolve(t.filter((t=>t.title.slice(0,e.length).toLowerCase()===e.toLowerCase())));e.autocomplete=e=>(e.suggest=e.suggest||a,e.choices=[].concat(e.choices||[]),s("AutocompletePrompt",e))}()),Dc}var ru=(Ic||(Ic=1,Oc=function(e){e=(Array.isArray(e)?e:e.split(".")).map(Number);let t=0,i=process.versions.node.split(".").map(Number);for(;t<e.length;t++){if(i[t]>e[t])return!1;if(e[t]>i[t])return!0}return!1}("8.6.0")?vl():function(){if(Mc)return Cc;Mc=1;const e=au(),t=["suggest","format","onState","validate","onRender","type"],i=()=>{};async function s(r=[],{onSubmit:n=i,onCancel:o=i}={}){const l={},c=s._override||{};let u,h,d,p,m,f;r=[].concat(r);const g=async(e,t,i=!1)=>{if(i||!e.validate||!0===e.validate(t))return e.format?await e.format(t,l):t};for(h of r)if(({name:p,type:m}=h),"function"==typeof m&&(m=await m(u,{...l},h),h.type=m),m){for(let e in h){if(t.includes(e))continue;let i=h[e];h[e]="function"==typeof i?await i(u,{...l},f):i}if(f=h,"string"!=typeof h.message)throw new Error("prompt message is required");if(({name:p,type:m}=h),void 0===e[m])throw new Error(`prompt type (${m}) is not defined`);if(void 0===c[h.name]||(u=await g(h,c[h.name]),void 0===u)){try{u=s._injected?a(s._injected,h.initial):await e[m](h),l[p]=u=await g(h,u,!0),d=await n(h,u,l)}catch(e){d=!await o(h,l)}if(d)return l}else l[p]=u}return l}function a(e,t){const i=e.shift();if(i instanceof Error)throw i;return void 0===i?t:i}return Cc=Object.assign(s,{prompt:s,prompts:e,inject:function(e){s._injected=(s._injected||[]).concat(e)},override:function(e){s._override=Object.assign({},e)}})}()),Oc),nu=c(ru);class ou{message;constructor(e){this.message=e}}const lu=e=>({value:e.value,title:e.label}),cu=async(e,t,i)=>{const s=await nu({type:i.length>10?"autocompleteMultiselect":"multiselect",name:"value",message:e,choices:i.map(lu),max:t});return"value"in s?s.value:new ou("回答がありません")},uu={textInput:async e=>{const t=await nu({type:"text",name:"value",message:e});return"value"in t?t.value:new ou("回答がありません")},confirm:async e=>{const t=await nu({type:"confirm",name:"value",message:e});return"value"in t?t.value:new ou("回答がありません")},notice:async e=>{console.log(e)},clear:async()=>{console.clear()},multiSelect:cu,select:async(e,t)=>{const i=await cu(e,1,t);return i instanceof ou?i:i.length>0?i[0]:new ou("回答がありません")}};class hu{prop;value;message;constructor(e,t,i){this.prop=e,this.value=t,this.message=i}}const du=()=>({times:Math.random(),damage:Math.random(),accuracy:Math.random()}),pu=["君とは馬が合わないと思っていたんだ","俺のいなくなったパーティでせいぜい楽しくやればいいさ","残念だ。目的を遂げるまで一緒に居られるとおもっていたのだが","わ、私を捨てるのか","あの時に交わした約束は嘘だったのだな"],mu=(e,t)=>{const i=new L("charactor");return i.command("list").description("hire charactor as you like").action((async()=>(async(e,t)=>{const i=await On(t),s=await i.list();await s.reduce(((t,i)=>t.then((()=>e.notice(`- ${i}`)))),Promise.resolve())})(e,t))),i.command("hire").argument("<name>","hiring charactor name").description("hire charactor as you like").action((async i=>((e,t)=>async i=>{const{notice:s,select:a}=e,r=await On(t);(await r.list()).includes(i)&&await s(`${i}は既に雇っています`);const n=Is.all.map((e=>({value:e.name,label:e.label}))),o=await a("種族を選んでください",n);if(!o||o instanceof ou)return;const l=Is.get(o);if(!l)return void await s(`${o}という種族は存在しません`);const c=Es.all.map((e=>({value:e.name,label:e.label}))),u=await a("種族を選んでください",c);if(!u||u instanceof ou)return;const h=Es.get(u);if(!h)return void await s(`${u}という祝福は存在しません`);const d=Ps.all.map((e=>({value:e.name,label:e.label}))),p=await a("種族を選んでください",d);if(!p||p instanceof ou)return;const m=Ps.get(p);if(!m)return void await s(`${p}という装備は存在しません`);const f=Ds.all.map((e=>({value:e.name,label:e.label}))),g=await a("種族を選んでください",f);if(!g||g instanceof ou)return;const b=Ds.get(g);if(!b)return void await s(`${g}という種族は存在しません`);const w=re(i,l,h,m,b);w instanceof X?await s(w.message):(await r.save(w),await s(`${i}を雇いました`))})(e,t)(i))),i.command("status").argument("<name>","charactor name you looking").description("look charactor as you like").action((async i=>(({notice:e},t)=>async i=>{const s=await On(t),a=await s.get(i);if(!a)return void await e(`${i}というcharactorは存在しません`);if(a instanceof X||a instanceof un||a instanceof cn)return void await e(`${i}は不正なデータです。取り出せません。`);await e(`名前: ${a.name}`),await e(`種族: ${a.race.label}`),await e(`祝福: ${a.blessing.label}`),await e(`装備: ${a.clothing.label}`),await e(`武器: ${a.weapon.label}`);const r=se(a);await e("能力:"),await e(`  MaxHP: ${r.MaxHP}`),await e(`  MaxMP: ${r.MaxMP}`),await e(`  STR: ${r.STR}`),await e(`  VIT: ${r.VIT}`),await e(`  DEX: ${r.DEX}`),await e(`  AGI: ${r.AGI}`),await e(`  AVD: ${r.AVD}`),await e(`  INT: ${r.INT}`),await e(`  MND: ${r.MND}`),await e(`  RES: ${r.RES}`),await e(`  WT: ${r.WT}`),await e(`  刺突耐性: ${r.StabResistance}`),await e(`  斬撃耐性: ${r.SlashResistance}`),await e(`  打撃耐性: ${r.BlowResistance}`),await e(`  火属性: ${r.FireSuitable}`),await e(`  岩属性: ${r.RockSuitable}`),await e(`  水属性: ${r.WaterSuitable}`),await e(`  氷属性: ${r.IceSuitable}`),await e(`  風属性: ${r.AirSuitable}`),await e(`  雷属性: ${r.ThunderSuitable}`),await e(`  移動距離: ${r.move}`),await e(`  移動高さ: ${r.jump}`);const n=te(a);await e("アビリティ:"),await n.reduce(((t,i)=>t.then((()=>e(`  - ${i.label}`)))),Promise.resolve());const o=ie(a);await e("スキル:"),await o.reduce(((t,i)=>t.then((()=>e(`  - ${i.label}`)))),Promise.resolve())})(e,t)(i))),i.command("fire").argument("<name>","firing charactor name").description("fire charactor as you like").action((async i=>((e,t)=>async i=>{const s=await On(t),a=await e.confirm(`本当に${i}を解雇してもよろしいですか？`);if(!a||a instanceof ou)return;await s.remove(i),await e.notice(`${i}を解雇しました。言伝を預かっております。`);const r=du(),n=pu[Math.floor(r.accuracy*pu.length)];await e.notice(`「${n}」とのことです。`)})(e,t)(i))),i};class fu{name;message;constructor(e,t){this.name=e,this.message=t}}const gu=(e,t)=>{const i=t.reduce(((e,t)=>(e[t.name]||(e[t.name]=0),e[t.name]+=1,e)),{});for(const e in i)if(i[e]>1)return new fu(e,"Partyに同じ名前のキャラクターが存在します");return null},bu=(e,t)=>{const i=gu(0,t);return i instanceof fu?i:{name:e,charactors:t}},wu=ln.object({name:ln.string(),charactors:ln.array(gn)}),yu=ln.object({name:ln.string(),charactors:ln.array(bn)}),vu=e=>({name:e.name,charactors:e.charactors.map(vn)}),Su=e=>{const{name:t}=e,i=[];for(const t of e.charactors){const e=Tn(t);if(e instanceof un||e instanceof X)return e;i.push(e)}const s=gu(0,i);return s instanceof fu?s:{name:t,charactors:i}},Tu=Mn("party",wu,(e=>{const{name:t}=e,i=[];for(const t of e.charactors){const e=Sn(t);if(e instanceof un||e instanceof X)return e;i.push(e)}const s=gu(0,i);return s instanceof fu?s:{name:t,charactors:i}}),(e=>({name:e.name,charactors:e.charactors.map(yn)})),"name");class _u{fileName;exception;message;constructor(e,t,i){this.fileName=e,this.exception=t,this.message=i}}const xu=(e,t)=>{const i=new L("party");return i.command("list").description("list parties").action((async()=>(async(e,t)=>{const i=await Tu(t),s=await i.list();await s.reduce(((t,i)=>t.then((()=>e.notice(`- ${i}`)))),Promise.resolve())})(e,t))),i.command("build").argument("<name>","building party name").description("build a party as you like").action((async i=>((e,t)=>async i=>{const{notice:s,multiSelect:a}=e,r=await Tu(t),n=await On(t);(await r.list()).includes(i)&&await s(`${i}というparty名は既に使われています`);const o=(await n.list()).map((e=>({value:e,label:e}))),l=await a("メンバーを複数選択してください。partyの最大は12名までです。",12,o);if(l instanceof ou||0===l.length)return;const c=[];for(const e of l){const t=await n.get(e);if(!t)return void await s(`${e}というキャラクターはいません`);if(t instanceof X||t instanceof un||t instanceof cn)return void await s(t.message);c.push(t)}const u=bu(i,c);u instanceof fu?await s(u.message):(await r.save(u),await s(`${i}を組みました`))})(e,t)(i))),i.command("status").argument("<name>","party name you looking").description("look party as you like").action((async i=>(({notice:e},t)=>async i=>{const s=await Tu(t),a=await s.get(i);a?a instanceof X||a instanceof un||a instanceof fu||a instanceof cn?await e(`${i}は不正なデータです。取り出せません。`):(await e(`名前: ${a.name}`),await e("メンバー:"),await a.charactors.reduce(((t,i)=>t.then((async()=>{await e(`  - ${i.name}`),await e(`    種族: ${i.race.label}`),await e(`    祝福: ${i.blessing.label}`),await e(`    装備: ${i.clothing.label}`),await e(`    武器: ${i.weapon.label}`)}))),Promise.resolve())):await e(`${i}というpartyは存在しません`)})(e,t)(i))),i.command("change").argument("<name>","changing party name").description("change a party as you like").action((async i=>((e,t)=>async i=>{const{notice:s,multiSelect:a}=e,r=await Tu(t),n=await On(t),o=await r.get(i);if(!o)return void await s(`${i}というpartyは存在しません`);if(o instanceof X||o instanceof un||o instanceof fu||o instanceof cn)return void await s(`${i}は不正なデータです。取り出せません。`);let l=o.charactors.map((e=>e.name));const c=o.charactors.map((e=>({value:e.name,label:e.name}))),u=await a("解雇するメンバーを複数選択してください。",c.length,c);u instanceof ou||0===u.length||(l=l.filter((e=>!u.includes(e))));const h=(await n.list()).filter((e=>!l.includes(e))).map((e=>({value:e,label:e}))),d=12-l.length,p=await a(`雇うメンバーを複数選択してください。partyの残席は${d}名です。`,d,h);p instanceof ou||0===p.length||(l=l.concat(p));const m=[];for(const e of l){const t=await n.get(e);if(!t)return void await s(`${e}というキャラクターはいません`);if(t instanceof X||t instanceof un||t instanceof cn)return void await s(t.message);m.push(t)}const f=bu(i,m);f instanceof fu?await s(f.message):(await r.save(f),await s(`${i}を組み直しました`))})(e,t)(i))),i.command("dismiss").argument("<name>","dismiss party name").description("dismiss party as you like").action((async i=>((e,t)=>async i=>{const s=await Tu(t),a=await e.confirm(`本当に${i}を解散してもよろしいですか？`);!a||a instanceof ou||(await s.remove(i),await e.notice(`${i}を解散しました`))})(e,t)(i))),i.command("export").argument("<name>","export party name").argument("<file>","export file").description("export party as you like").action((async(i,s)=>((e,t)=>async(i,s)=>{const a=await Tu(t),r=await a.get(i);r?r instanceof X||r instanceof un||r instanceof fu||r instanceof cn?await e.notice(`${i}は不正なデータです`):await a.exportJson(r,s)instanceof _u?await e.notice(`${i}を出力できませんでした`):await e.notice(`${i}を${s}に出力しました`):await e.notice(`${i}というpartyはありません`)})(e,t)(i,s))),i},Ru=6048e5,Au=Symbol.for("constructDateFrom");function ku(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&Au in e?e[Au](t):e instanceof Date?new e.constructor(t):new Date(t)}function Cu(e,t){return ku(t||e,e)}function Mu(e,t,i){const s=Cu(e,i?.in);return isNaN(t)?ku(i?.in||e,NaN):t?(s.setDate(s.getDate()+t),s):s}let Ou={};function Iu(){return Ou}function Du(e,t){const i=Iu(),s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,a=Cu(e,t?.in),r=a.getDay(),n=(r<s?7:0)+r-s;return a.setDate(a.getDate()-n),a.setHours(0,0,0,0),a}function Pu(e,t){return Du(e,{...t,weekStartsOn:1})}function Eu(e,t){const i=Cu(e,t?.in),s=i.getFullYear(),a=ku(i,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const r=Pu(a),n=ku(i,0);n.setFullYear(s,0,4),n.setHours(0,0,0,0);const o=Pu(n);return i.getTime()>=r.getTime()?s+1:i.getTime()>=o.getTime()?s:s-1}function Wu(e){const t=Cu(e),i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return i.setUTCFullYear(t.getFullYear()),+e-+i}function $u(e,t){const i=Cu(e,t?.in);return i.setHours(0,0,0,0),i}function Nu(e,t,i){const[s,a]=function(e,...t){const i=ku.bind(null,t.find((e=>"object"==typeof e)));return t.map(i)}(0,e,t),r=$u(s),n=$u(a),o=+r-Wu(r),l=+n-Wu(n);return Math.round((o-l)/864e5)}function Vu(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+Cu(e)));var t}const Hu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ju(e){return(t={})=>{const i=t.width?String(t.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}const Lu={date:ju({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ju({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ju({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Fu={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Bu(e){return(t,i)=>{let s;if("formatting"===(i?.context?String(i.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=i?.width?String(i.width):t;s=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=i?.width?String(i.width):e.defaultWidth;s=e.values[a]||e.values[t]}return s[e.argumentCallback?e.argumentCallback(t):t]}}const Zu={ordinalNumber:(e,t)=>{const i=Number(e),s=i%100;if(s>20||s<10)switch(s%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:Bu({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Bu({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Bu({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Bu({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Bu({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Gu(e){return(t,i={})=>{const s=i.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],r=t.match(a);if(!r)return null;const n=r[0],o=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i;return}(o,(e=>e.test(n))):function(e,t){for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return i;return}(o,(e=>e.test(n)));let c;c=e.valueCallback?e.valueCallback(l):l,c=i.valueCallback?i.valueCallback(c):c;return{value:c,rest:t.slice(n.length)}}}var Yu;const Xu={code:"en-US",formatDistance:(e,t,i)=>{let s;const a=Hu[e];return s="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+s:s+" ago":s},formatLong:Lu,formatRelative:(e,t,i,s)=>Fu[e],localize:Zu,match:{ordinalNumber:(Yu={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const i=e.match(Yu.matchPattern);if(!i)return null;const s=i[0],a=e.match(Yu.parsePattern);if(!a)return null;let r=Yu.valueCallback?Yu.valueCallback(a[0]):a[0];return r=t.valueCallback?t.valueCallback(r):r,{value:r,rest:e.slice(s.length)}}),era:Gu({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Gu({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Gu({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Gu({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Gu({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function qu(e,t){const i=Cu(e,t?.in),s=Nu(i,function(e,t){const i=Cu(e,t?.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}(i));return s+1}function Ku(e,t){const i=Cu(e,t?.in),s=+Pu(i)-+function(e,t){const i=Eu(e,t),s=ku(e,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Pu(s)}(i);return Math.round(s/Ru)+1}function Uu(e,t){const i=Cu(e,t?.in),s=i.getFullYear(),a=Iu(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,n=ku(t?.in||e,0);n.setFullYear(s+1,0,r),n.setHours(0,0,0,0);const o=Du(n,t),l=ku(t?.in||e,0);l.setFullYear(s,0,r),l.setHours(0,0,0,0);const c=Du(l,t);return+i>=+o?s+1:+i>=+c?s:s-1}function zu(e,t){const i=Cu(e,t?.in),s=+Du(i,t)-+function(e,t){const i=Iu(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,a=Uu(e,t),r=ku(t?.in||e,0);return r.setFullYear(a,0,s),r.setHours(0,0,0,0),Du(r,t)}(i,t);return Math.round(s/Ru)+1}function Ju(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Qu={y(e,t){const i=e.getFullYear(),s=i>0?i:1-i;return Ju("yy"===t?s%100:s,t.length)},M(e,t){const i=e.getMonth();return"M"===t?String(i+1):Ju(i+1,2)},d:(e,t)=>Ju(e.getDate(),t.length),a(e,t){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return"am"===i?"a.m.":"p.m."}},h:(e,t)=>Ju(e.getHours()%12||12,t.length),H:(e,t)=>Ju(e.getHours(),t.length),m:(e,t)=>Ju(e.getMinutes(),t.length),s:(e,t)=>Ju(e.getSeconds(),t.length),S(e,t){const i=t.length,s=e.getMilliseconds();return Ju(Math.trunc(s*Math.pow(10,i-3)),t.length)}},eh="midnight",th="noon",ih="morning",sh="afternoon",ah="evening",rh="night",nh={G:function(e,t,i){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(s,{width:"abbreviated"});case"GGGGG":return i.era(s,{width:"narrow"});default:return i.era(s,{width:"wide"})}},y:function(e,t,i){if("yo"===t){const t=e.getFullYear(),s=t>0?t:1-t;return i.ordinalNumber(s,{unit:"year"})}return Qu.y(e,t)},Y:function(e,t,i,s){const a=Uu(e,s),r=a>0?a:1-a;if("YY"===t){return Ju(r%100,2)}return"Yo"===t?i.ordinalNumber(r,{unit:"year"}):Ju(r,t.length)},R:function(e,t){return Ju(Eu(e),t.length)},u:function(e,t){return Ju(e.getFullYear(),t.length)},Q:function(e,t,i){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Ju(s,2);case"Qo":return i.ordinalNumber(s,{unit:"quarter"});case"QQQ":return i.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(s,{width:"narrow",context:"formatting"});default:return i.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,i){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Ju(s,2);case"qo":return i.ordinalNumber(s,{unit:"quarter"});case"qqq":return i.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(s,{width:"narrow",context:"standalone"});default:return i.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,i){const s=e.getMonth();switch(t){case"M":case"MM":return Qu.M(e,t);case"Mo":return i.ordinalNumber(s+1,{unit:"month"});case"MMM":return i.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(s,{width:"narrow",context:"formatting"});default:return i.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,i){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Ju(s+1,2);case"Lo":return i.ordinalNumber(s+1,{unit:"month"});case"LLL":return i.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(s,{width:"narrow",context:"standalone"});default:return i.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,i,s){const a=zu(e,s);return"wo"===t?i.ordinalNumber(a,{unit:"week"}):Ju(a,t.length)},I:function(e,t,i){const s=Ku(e);return"Io"===t?i.ordinalNumber(s,{unit:"week"}):Ju(s,t.length)},d:function(e,t,i){return"do"===t?i.ordinalNumber(e.getDate(),{unit:"date"}):Qu.d(e,t)},D:function(e,t,i){const s=qu(e);return"Do"===t?i.ordinalNumber(s,{unit:"dayOfYear"}):Ju(s,t.length)},E:function(e,t,i){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return i.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,i,s){const a=e.getDay(),r=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return Ju(r,2);case"eo":return i.ordinalNumber(r,{unit:"day"});case"eee":return i.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(a,{width:"short",context:"formatting"});default:return i.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,i,s){const a=e.getDay(),r=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return Ju(r,t.length);case"co":return i.ordinalNumber(r,{unit:"day"});case"ccc":return i.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(a,{width:"narrow",context:"standalone"});case"cccccc":return i.day(a,{width:"short",context:"standalone"});default:return i.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,i){const s=e.getDay(),a=0===s?7:s;switch(t){case"i":return String(a);case"ii":return Ju(a,t.length);case"io":return i.ordinalNumber(a,{unit:"day"});case"iii":return i.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,i){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(s,{width:"narrow",context:"formatting"});default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,i){const s=e.getHours();let a;switch(a=12===s?th:0===s?eh:s/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(a,{width:"narrow",context:"formatting"});default:return i.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,i){const s=e.getHours();let a;switch(a=s>=17?ah:s>=12?sh:s>=4?ih:rh,t){case"B":case"BB":case"BBB":return i.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(a,{width:"narrow",context:"formatting"});default:return i.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,i){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),i.ordinalNumber(t,{unit:"hour"})}return Qu.h(e,t)},H:function(e,t,i){return"Ho"===t?i.ordinalNumber(e.getHours(),{unit:"hour"}):Qu.H(e,t)},K:function(e,t,i){const s=e.getHours()%12;return"Ko"===t?i.ordinalNumber(s,{unit:"hour"}):Ju(s,t.length)},k:function(e,t,i){let s=e.getHours();return 0===s&&(s=24),"ko"===t?i.ordinalNumber(s,{unit:"hour"}):Ju(s,t.length)},m:function(e,t,i){return"mo"===t?i.ordinalNumber(e.getMinutes(),{unit:"minute"}):Qu.m(e,t)},s:function(e,t,i){return"so"===t?i.ordinalNumber(e.getSeconds(),{unit:"second"}):Qu.s(e,t)},S:function(e,t){return Qu.S(e,t)},X:function(e,t,i){const s=e.getTimezoneOffset();if(0===s)return"Z";switch(t){case"X":return lh(s);case"XXXX":case"XX":return ch(s);default:return ch(s,":")}},x:function(e,t,i){const s=e.getTimezoneOffset();switch(t){case"x":return lh(s);case"xxxx":case"xx":return ch(s);default:return ch(s,":")}},O:function(e,t,i){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+oh(s,":");default:return"GMT"+ch(s,":")}},z:function(e,t,i){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+oh(s,":");default:return"GMT"+ch(s,":")}},t:function(e,t,i){return Ju(Math.trunc(+e/1e3),t.length)},T:function(e,t,i){return Ju(+e,t.length)}};function oh(e,t=""){const i=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),r=s%60;return 0===r?i+String(a):i+String(a)+t+Ju(r,2)}function lh(e,t){if(e%60==0){return(e>0?"-":"+")+Ju(Math.abs(e)/60,2)}return ch(e,t)}function ch(e,t=""){const i=e>0?"-":"+",s=Math.abs(e);return i+Ju(Math.trunc(s/60),2)+t+Ju(s%60,2)}const uh=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},hh=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},dh={p:hh,P:(e,t)=>{const i=e.match(/(P+)(p+)?/)||[],s=i[1],a=i[2];if(!a)return uh(e,t);let r;switch(s){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",uh(s,t)).replace("{{time}}",hh(a,t))}},ph=/^D+$/,mh=/^Y+$/,fh=["D","DD","YY","YYYY"];function gh(e){return ph.test(e)}function bh(e){return mh.test(e)}function wh(e,t,i){const s=function(e,t,i){const s="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,i);if(console.warn(s),fh.includes(e))throw new RangeError(s)}const yh=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sh=/^'([^]*?)'?$/,Th=/''/g,_h=/[a-zA-Z]/;function xh(e){const t=e.match(Sh);return t?t[1].replace(Th,"'"):e}class Rh{subPriority=0;validate(e,t){return!0}}class Ah extends Rh{constructor(e,t,i,s,a){super(),this.value=e,this.validateValue=t,this.setValue=i,this.priority=s,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,i){return this.setValue(e,t,this.value,i)}}class kh extends Rh{priority=10;subPriority=-1;constructor(e,t){super(),this.context=e||(e=>ku(t,e))}set(e,t){return t.timestampIsSet?e:ku(e,function(e,t){const i=function(e){return"function"==typeof e&&e.prototype?.constructor===e}(t)?new t(0):ku(t,0);return i.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),i.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),i}(e,this.context))}}class Ch{run(e,t,i,s){const a=this.parse(e,t,i,s);return a?{setter:new Ah(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,i){return!0}}const Mh=/^(1[0-2]|0?\d)/,Oh=/^(3[0-1]|[0-2]?\d)/,Ih=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Dh=/^(5[0-3]|[0-4]?\d)/,Ph=/^(2[0-3]|[0-1]?\d)/,Eh=/^(2[0-4]|[0-1]?\d)/,Wh=/^(1[0-1]|0?\d)/,$h=/^(1[0-2]|0?\d)/,Nh=/^[0-5]?\d/,Vh=/^[0-5]?\d/,Hh=/^\d/,jh=/^\d{1,2}/,Lh=/^\d{1,3}/,Fh=/^\d{1,4}/,Bh=/^-?\d+/,Zh=/^-?\d/,Gh=/^-?\d{1,2}/,Yh=/^-?\d{1,3}/,Xh=/^-?\d{1,4}/,qh=/^([+-])(\d{2})(\d{2})?|Z/,Kh=/^([+-])(\d{2})(\d{2})|Z/,Uh=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,zh=/^([+-])(\d{2}):(\d{2})|Z/,Jh=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Qh(e,t){return e?{value:t(e.value),rest:e.rest}:e}function ed(e,t){const i=t.match(e);return i?{value:parseInt(i[0],10),rest:t.slice(i[0].length)}:null}function td(e,t){const i=t.match(e);if(!i)return null;if("Z"===i[0])return{value:0,rest:t.slice(1)};return{value:("+"===i[1]?1:-1)*(36e5*(i[2]?parseInt(i[2],10):0)+6e4*(i[3]?parseInt(i[3],10):0)+1e3*(i[5]?parseInt(i[5],10):0)),rest:t.slice(i[0].length)}}function id(e){return ed(Bh,e)}function sd(e,t){switch(e){case 1:return ed(Hh,t);case 2:return ed(jh,t);case 3:return ed(Lh,t);case 4:return ed(Fh,t);default:return ed(new RegExp("^\\d{1,"+e+"}"),t)}}function ad(e,t){switch(e){case 1:return ed(Zh,t);case 2:return ed(Gh,t);case 3:return ed(Yh,t);case 4:return ed(Xh,t);default:return ed(new RegExp("^-?\\d{1,"+e+"}"),t)}}function rd(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function nd(e,t){const i=t>0,s=i?t:1-t;let a;if(s<=50)a=e||100;else{const t=s+50;a=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return i?a:1-a}function od(e){return e%400==0||e%4==0&&e%100!=0}const ld=[31,28,31,30,31,30,31,31,30,31,30,31],cd=[31,29,31,30,31,30,31,31,30,31,30,31];function ud(e,t,i){const s=Iu(),a=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,r=Cu(e,i?.in),n=r.getDay(),o=7-a;return Mu(r,t<0||t>6?t-(n+o)%7:((t%7+7)%7+o)%7-(n+o)%7,i)}function hd(e,t,i){const s=Cu(e,i?.in),a=function(e,t){const i=Cu(e,t?.in).getDay();return 0===i?7:i}(s,i);return Mu(s,t-a,i)}const dd={G:new class extends Ch{priority=140;parse(e,t,i){switch(t){case"G":case"GG":case"GGG":return i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"});case"GGGGG":return i.era(e,{width:"narrow"});default:return i.era(e,{width:"wide"})||i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"})}}set(e,t,i){return t.era=i,e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]},y:new class extends Ch{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,i){const s=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return Qh(sd(4,e),s);case"yo":return Qh(i.ordinalNumber(e,{unit:"year"}),s);default:return Qh(sd(t.length,e),s)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,i){const s=e.getFullYear();if(i.isTwoDigitYear){const t=nd(i.year,s);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const a="era"in t&&1!==t.era?1-i.year:i.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}},Y:new class extends Ch{priority=130;parse(e,t,i){const s=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return Qh(sd(4,e),s);case"Yo":return Qh(i.ordinalNumber(e,{unit:"year"}),s);default:return Qh(sd(t.length,e),s)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,i,s){const a=Uu(e,s);if(i.isTwoDigitYear){const t=nd(i.year,a);return e.setFullYear(t,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Du(e,s)}const r="era"in t&&1!==t.era?1-i.year:i.year;return e.setFullYear(r,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),Du(e,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:new class extends Ch{priority=130;parse(e,t){return ad("R"===t?4:t.length,e)}set(e,t,i){const s=ku(e,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Pu(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:new class extends Ch{priority=130;parse(e,t){return ad("u"===t?4:t.length,e)}set(e,t,i){return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},Q:new class extends Ch{priority=120;parse(e,t,i){switch(t){case"Q":case"QQ":return sd(t.length,e);case"Qo":return i.ordinalNumber(e,{unit:"quarter"});case"QQQ":return i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(e,{width:"narrow",context:"formatting"});default:return i.quarter(e,{width:"wide",context:"formatting"})||i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,i){return e.setMonth(3*(i-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:new class extends Ch{priority=120;parse(e,t,i){switch(t){case"q":case"qq":return sd(t.length,e);case"qo":return i.ordinalNumber(e,{unit:"quarter"});case"qqq":return i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(e,{width:"narrow",context:"standalone"});default:return i.quarter(e,{width:"wide",context:"standalone"})||i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,i){return e.setMonth(3*(i-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:new class extends Ch{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,i){const s=e=>e-1;switch(t){case"M":return Qh(ed(Mh,e),s);case"MM":return Qh(sd(2,e),s);case"Mo":return Qh(i.ordinalNumber(e,{unit:"month"}),s);case"MMM":return i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(e,{width:"narrow",context:"formatting"});default:return i.month(e,{width:"wide",context:"formatting"})||i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}},L:new class extends Ch{priority=110;parse(e,t,i){const s=e=>e-1;switch(t){case"L":return Qh(ed(Mh,e),s);case"LL":return Qh(sd(2,e),s);case"Lo":return Qh(i.ordinalNumber(e,{unit:"month"}),s);case"LLL":return i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(e,{width:"narrow",context:"standalone"});default:return i.month(e,{width:"wide",context:"standalone"})||i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:new class extends Ch{priority=100;parse(e,t,i){switch(t){case"w":return ed(Dh,e);case"wo":return i.ordinalNumber(e,{unit:"week"});default:return sd(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,i,s){return Du(function(e,t,i){const s=Cu(e,i?.in),a=zu(s,i)-t;return s.setDate(s.getDate()-7*a),Cu(s,i?.in)}(e,i,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:new class extends Ch{priority=100;parse(e,t,i){switch(t){case"I":return ed(Dh,e);case"Io":return i.ordinalNumber(e,{unit:"week"});default:return sd(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,i){return Pu(function(e,t,i){const s=Cu(e,i?.in),a=Ku(s,i)-t;return s.setDate(s.getDate()-7*a),s}(e,i))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:new class extends Ch{priority=90;subPriority=1;parse(e,t,i){switch(t){case"d":return ed(Oh,e);case"do":return i.ordinalNumber(e,{unit:"date"});default:return sd(t.length,e)}}validate(e,t){const i=od(e.getFullYear()),s=e.getMonth();return i?t>=1&&t<=cd[s]:t>=1&&t<=ld[s]}set(e,t,i){return e.setDate(i),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:new class extends Ch{priority=90;subpriority=1;parse(e,t,i){switch(t){case"D":case"DD":return ed(Ih,e);case"Do":return i.ordinalNumber(e,{unit:"date"});default:return sd(t.length,e)}}validate(e,t){return od(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,i){return e.setMonth(0,i),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:new class extends Ch{priority=90;parse(e,t,i){switch(t){case"E":case"EE":case"EEE":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,i,s){return(e=ud(e,i,s)).setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]},e:new class extends Ch{priority=90;parse(e,t,i,s){const a=e=>{const t=7*Math.floor((e-1)/7);return(e+s.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Qh(sd(t.length,e),a);case"eo":return Qh(i.ordinalNumber(e,{unit:"day"}),a);case"eee":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeeee":return i.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,i,s){return(e=ud(e,i,s)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:new class extends Ch{priority=90;parse(e,t,i,s){const a=e=>{const t=7*Math.floor((e-1)/7);return(e+s.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Qh(sd(t.length,e),a);case"co":return Qh(i.ordinalNumber(e,{unit:"day"}),a);case"ccc":return i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"ccccc":return i.day(e,{width:"narrow",context:"standalone"});case"cccccc":return i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});default:return i.day(e,{width:"wide",context:"standalone"})||i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,i,s){return(e=ud(e,i,s)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:new class extends Ch{priority=90;parse(e,t,i){const s=e=>0===e?7:e;switch(t){case"i":case"ii":return sd(t.length,e);case"io":return i.ordinalNumber(e,{unit:"day"});case"iii":return Qh(i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return Qh(i.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Qh(i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s);default:return Qh(i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,t){return t>=1&&t<=7}set(e,t,i){return(e=hd(e,i)).setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:new class extends Ch{priority=80;parse(e,t,i){switch(t){case"a":case"aa":case"aaa":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(e,{width:"narrow",context:"formatting"});default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,i){return e.setHours(rd(i),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]},b:new class extends Ch{priority=80;parse(e,t,i){switch(t){case"b":case"bb":case"bbb":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(e,{width:"narrow",context:"formatting"});default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,i){return e.setHours(rd(i),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]},B:new class extends Ch{priority=80;parse(e,t,i){switch(t){case"B":case"BB":case"BBB":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(e,{width:"narrow",context:"formatting"});default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,i){return e.setHours(rd(i),0,0,0),e}incompatibleTokens=["a","b","t","T"]},h:new class extends Ch{priority=70;parse(e,t,i){switch(t){case"h":return ed($h,e);case"ho":return i.ordinalNumber(e,{unit:"hour"});default:return sd(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,i){const s=e.getHours()>=12;return s&&i<12?e.setHours(i+12,0,0,0):s||12!==i?e.setHours(i,0,0,0):e.setHours(0,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]},H:new class extends Ch{priority=70;parse(e,t,i){switch(t){case"H":return ed(Ph,e);case"Ho":return i.ordinalNumber(e,{unit:"hour"});default:return sd(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,i){return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]},K:new class extends Ch{priority=70;parse(e,t,i){switch(t){case"K":return ed(Wh,e);case"Ko":return i.ordinalNumber(e,{unit:"hour"});default:return sd(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,i){return e.getHours()>=12&&i<12?e.setHours(i+12,0,0,0):e.setHours(i,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]},k:new class extends Ch{priority=70;parse(e,t,i){switch(t){case"k":return ed(Eh,e);case"ko":return i.ordinalNumber(e,{unit:"hour"});default:return sd(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,i){const s=i<=24?i%24:i;return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]},m:new class extends Ch{priority=60;parse(e,t,i){switch(t){case"m":return ed(Nh,e);case"mo":return i.ordinalNumber(e,{unit:"minute"});default:return sd(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,i){return e.setMinutes(i,0,0),e}incompatibleTokens=["t","T"]},s:new class extends Ch{priority=50;parse(e,t,i){switch(t){case"s":return ed(Vh,e);case"so":return i.ordinalNumber(e,{unit:"second"});default:return sd(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,i){return e.setSeconds(i,0),e}incompatibleTokens=["t","T"]},S:new class extends Ch{priority=30;parse(e,t){return Qh(sd(t.length,e),(e=>Math.trunc(e*Math.pow(10,3-t.length))))}set(e,t,i){return e.setMilliseconds(i),e}incompatibleTokens=["t","T"]},X:new class extends Ch{priority=10;parse(e,t){switch(t){case"X":return td(qh,e);case"XX":return td(Kh,e);case"XXXX":return td(Uh,e);case"XXXXX":return td(Jh,e);default:return td(zh,e)}}set(e,t,i){return t.timestampIsSet?e:ku(e,e.getTime()-Wu(e)-i)}incompatibleTokens=["t","T","x"]},x:new class extends Ch{priority=10;parse(e,t){switch(t){case"x":return td(qh,e);case"xx":return td(Kh,e);case"xxxx":return td(Uh,e);case"xxxxx":return td(Jh,e);default:return td(zh,e)}}set(e,t,i){return t.timestampIsSet?e:ku(e,e.getTime()-Wu(e)-i)}incompatibleTokens=["t","T","X"]},t:new class extends Ch{priority=40;parse(e){return id(e)}set(e,t,i){return[ku(e,1e3*i),{timestampIsSet:!0}]}incompatibleTokens="*"},T:new class extends Ch{priority=20;parse(e){return id(e)}set(e,t,i){return[ku(e,i),{timestampIsSet:!0}]}incompatibleTokens="*"}},pd=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,md=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fd=/^'([^]*?)'?$/,gd=/''/g,bd=/\S/,wd=/[a-zA-Z]/;function yd(e,t,i,s){const a=()=>ku(i,NaN),r=Object.assign({},Iu()),n=r.locale??Xu,o={firstWeekContainsDate:r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,weekStartsOn:r.weekStartsOn??r.locale?.options?.weekStartsOn??0,locale:n},l=[new kh(s?.in,i)],c=t.match(md).map((e=>{const t=e[0];if(t in dh){return(0,dh[t])(e,n.formatLong)}return e})).join("").match(pd),u=[];for(let i of c){bh(i)&&wh(i,t,e),gh(i)&&wh(i,t,e);const s=i[0],r=dd[s];if(r){const{incompatibleTokens:t}=r;if(Array.isArray(t)){const e=u.find((e=>t.includes(e.token)||e.token===s));if(e)throw new RangeError(`The format string mustn't contain \`${e.fullToken}\` and \`${i}\` at the same time`)}else if("*"===r.incompatibleTokens&&u.length>0)throw new RangeError(`The format string mustn't contain \`${i}\` and any other token at the same time`);u.push({token:s,fullToken:i});const c=r.run(e,i,n.match,o);if(!c)return a();l.push(c.setter),e=c.rest}else{if(s.match(wd))throw new RangeError("Format string contains an unescaped latin alphabet character `"+s+"`");if("''"===i?i="'":"'"===s&&(i=i.match(fd)[1].replace(gd,"'")),0!==e.indexOf(i))return a();e=e.slice(i.length)}}if(e.length>0&&bd.test(e))return a();const h=l.map((e=>e.priority)).sort(((e,t)=>t-e)).filter(((e,t,i)=>i.indexOf(e)===t)).map((e=>l.filter((t=>t.priority===e)).sort(((e,t)=>t.subPriority-e.subPriority)))).map((e=>e[0]));let d=Cu(i,s?.in);if(isNaN(+d))return a();const p={};for(const e of h){if(!e.validate(d,o))return a();const t=e.set(d,p,o);Array.isArray(t)?(d=t[0],Object.assign(p,t[1])):d=t}return d}const vd=ln.object({times:ln.number().int(),damage:ln.number().int(),accuracy:ln.number().int()}),Sd=ln.object({type:ln.literal("SURRENDER"),actor:bn}),Td=ln.object({type:ln.literal("DO_SKILL"),actor:bn,skill:ln.string(),receivers:ln.array(bn)}),_d=ln.object({type:ln.literal("DO_NOTHING"),actor:bn}),xd=ln.object({type:ln.literal("TIME_PASSING"),wt:ln.number().int()}),Rd=ln.discriminatedUnion("type",[Td,_d,xd,Sd]),Ad=ln.object({datetime:ln.string().datetime({local:!0}),action:Rd,sortedCharactors:ln.array(bn),field:ln.object({climate:ln.string()}),randoms:vd}),kd=e=>"DO_SKILL"===e.type?{type:"DO_SKILL",actor:vn(e.actor),skill:e.skill.name,receivers:e.receivers.map(vn)}:"SURRENDER"===e.type?{type:"SURRENDER",actor:vn(e.actor)}:"DO_NOTHING"===e.type?{type:"DO_NOTHING",actor:vn(e.actor)}:{type:"TIME_PASSING",wt:e.wt},Cd=e=>function(e,t,i){const s=Iu(),a=s.locale??Xu,r=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,n=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,o=Cu(e,i?.in);if(!Vu(o))throw new RangeError("Invalid time value");let l=t.match(vh).map((e=>{const t=e[0];return"p"===t||"P"===t?(0,dh[t])(e,a.formatLong):e})).join("").match(yh).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:xh(e)};if(nh[t])return{isToken:!0,value:e};if(t.match(_h))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const c={firstWeekContainsDate:r,weekStartsOn:n,locale:a};return l.map((i=>{if(!i.isToken)return i.value;const s=i.value;return(bh(s)||gh(s))&&wh(s,t,String(e)),(0,nh[s[0]])(o,s,a.localize,c)})).join("")}(e,"yyyy-MM-dd'T'HH:mm:ss"),Md=e=>{return{datetime:Cd(e.datetime),action:kd(e.action),sortedCharactors:e.sortedCharactors.map(vn),field:e.field,randoms:(t=e.randoms,{...t})};var t},Od=e=>{let t=null;try{t=yd(e.datetime,"yyyy-MM-dd'T'HH:mm:ss",new Date)}catch(e){return new cn(e,"日付が間違っています")}const i=(e=>{if("DO_SKILL"===e.type){const t=Tn(e.actor);if(t instanceof X||t instanceof un)return t;const i=[];for(const t of e.receivers){const e=Tn(t);if(e instanceof X||e instanceof un)return e;i.push(e)}const s=ei.get(e.skill);return s?{type:"DO_SKILL",actor:t,skill:s,receivers:i}:new un(e.skill,"skill",`${e.skill}というskillは存在しません`)}if("SURRENDER"===e.type){const t=Tn(e.actor);return t instanceof X||t instanceof un?t:{type:"SURRENDER",actor:t}}if("DO_NOTHING"===e.type){const t=Tn(e.actor);return t instanceof X||t instanceof un?t:{type:"DO_NOTHING",actor:t}}return{type:"TIME_PASSING",wt:0+e.wt}})(e.action);if(i instanceof X||i instanceof un)return i;const s=[];for(const t of e.sortedCharactors){const e=Tn(t);if(e instanceof X||e instanceof un)return e;s.push(e)}var a;return{datetime:t,action:i,sortedCharactors:s,field:{climate:e.field.climate},randoms:(a=e.randoms,{...a})}},Id=[{name:"SUNNY",parcent:40},{name:"RAIN",parcent:30},{name:"FOGGY",parcent:10},{name:"STORM",parcent:10},{name:"SNOW",parcent:10}],Dd=e=>{const t=(({times:e,damage:t,accuracy:i})=>e>1||e<0?new hu("times",e,"timesの値は0から1です"):t>1||t<0?new hu("damage",t,"damageの値は0から1です"):i>1||i<0?new hu("accuracy",i,"accuracyの値は0から1です"):null)(e);if(t instanceof hu)throw console.debug(t),new Error(t.message);const i=100*e.accuracy,s=Id.reduce(((e,t)=>{const i={...t};if(0===e.length)return[i];const s=e.slice(-1)[0];return i.parcent+=s.parcent,e.push(i),e}),[]),a=s.find((e=>e.parcent>=i));return a?a.name:"SUNNY"},Pd=e=>e.slice(-1)[0],Ed="ONGOING",Wd="HOME",$d="VISITOR",Nd="DRAW",Vd=e=>Pd(e.turns),Hd=e=>e.sortedCharactors[0],jd=e=>e.filter((e=>e.hp>0)).sort(((e,t)=>{const i=se(e),s=se(t),a=e.restWt-t.restWt;if(0!==a)return a;const r=i.AGI-s.AGI;if(0!==r)return r;const n=i.AVD-s.AVD;if(0!==n)return n;const o=e.hp-t.hp;if(0!==o)return o;const l=e.mp-t.mp;if(0!==l)return l;const c=e.statuses.length-t.statuses.length;return 0!==c?c:0})),Ld=(e,t,i,s)=>{const a=Pd(e.turns),r={datetime:i,action:{type:"DO_NOTHING",actor:t},sortedCharactors:a.sortedCharactors.map(J),field:a.field,randoms:s};return r.sortedCharactors=r.sortedCharactors.map((e=>{const i={...e,statuses:[...e.statuses.map((e=>({...e})))]};return t.isVisitor===e.isVisitor&&t.name===e.name&&(i.restWt=se(e).WT),i})),r.sortedCharactors=jd(r.sortedCharactors),r},Fd=(e,t,i,s,a,r)=>{if("SKILL_TO_FIELD"===i.type)throw new Error("invalid skill type");if(i.mpConsumption>t.mp)throw new Error("mp shortage");if(G(Te,t)&&i.magicType!==$e)throw new Error("silent cannot do magic");if(G(_e,t))return Ld(e,t,a,r);if(G(ve,t)&&r.accuracy>.5)return Ld(e,t,a,r);const n=Pd(e.turns),o={datetime:a,action:{type:"DO_SKILL",actor:t,skill:i,receivers:s},sortedCharactors:n.sortedCharactors.map(J),field:n.field,randoms:r},l=s.map((e=>i.action(i,t,r,n.field,e)));return o.sortedCharactors=o.sortedCharactors.map((e=>t=>e.find((e=>t.name===e.name))||t)(l)).filter((e=>e.hp>0)),o.sortedCharactors=o.sortedCharactors.map((e=>{const s={...e,statuses:[...e.statuses.map((e=>({...e})))]};return t.isVisitor===e.isVisitor&&t.name===e.name&&(s.restWt=se(e).WT+i.additionalWt,s.mp-=i.mpConsumption),s})),o.sortedCharactors=jd(o.sortedCharactors),o},Bd=(e,t,i,s,a)=>{if("SKILL_TO_CHARACTOR"===i.type)throw new Error("invalid skill type");if(i.mpConsumption>t.mp)throw new Error("mp shortage");if(G(Te,t)&&i.magicType!==$e)throw new Error("silent cannot do magic");if(G(_e,t))return Ld(e,t,s,a);if(G(ve,t)&&a.accuracy>.5)return Ld(e,t,s,a);const r=Pd(e.turns),n={datetime:s,action:{type:"DO_SKILL",actor:t,skill:i,receivers:[]},sortedCharactors:r.sortedCharactors.map(J),field:r.field,randoms:a};return n.field=i.action(i,t,a,r.field),n.sortedCharactors=n.sortedCharactors.map((e=>{const s={...e,statuses:[...e.statuses.map((e=>({...e})))]};return t.isVisitor===e.isVisitor&&t.name===e.name&&(s.restWt=se(e).WT+i.additionalWt,s.mp-=i.mpConsumption),s})),n.sortedCharactors=jd(n.sortedCharactors),n},Zd=(e,t,i,s)=>{const a=Pd(e.turns);return{datetime:i,action:{type:"SURRENDER",actor:t},sortedCharactors:a.sortedCharactors.map(J),field:a.field,randoms:s}},Gd=(e,t,i,s)=>{const a=Pd(e.turns),r={datetime:i,action:{type:"TIME_PASSING",wt:t},sortedCharactors:a.sortedCharactors.map(J),field:{climate:Dd(s)},randoms:s};return r.sortedCharactors=r.sortedCharactors.map((e=>((e,t,i)=>{const s=te(e).reduce(((e,s)=>s.wait(t,e,i)),{...e,statuses:[...e.statuses.map((e=>({...e})))]}),a=G(Se,s)?1.5:G(xe,s)?.75:1;s.restWt=Math.max(s.restWt-t*a,0),G(le,s)&&(s.hp=Math.max(s.hp-t/10,0)),s.statuses=s.statuses.map((e=>{const i=e.restWt-t;return{...e,restWt:i}})).filter((e=>e.restWt>0));const r=se(s);return s.mp=Math.min(s.mp+Math.floor(t/10),r.MaxMP),s})(e,t,s))),r},Yd=e=>{const t=Pd(e.turns);if("SURRENDER"===t.action.type)return t.action.actor.isVisitor?Wd:$d;const i=t.sortedCharactors.filter((e=>!e.isVisitor&&e.hp)),s=t.sortedCharactors.filter((e=>e.isVisitor&&e.hp));return 0===i.length&&0===s.length?Nd:i.length>0&&0===s.length?Wd:0===i.length&&s.length>0?$d:Ed},Xd=Mn("battle",ln.object({title:ln.string(),home:yu,visitor:yu,turns:ln.array(Ad),result:ln.enum([Ed,Wd,$d,Nd])}),(e=>{const{title:t}=e,i=Su(e.home);if(i instanceof X||i instanceof un||i instanceof fu)return i;const s=Su(e.visitor);if(s instanceof X||s instanceof un||s instanceof fu)return s;const a=[];for(const t of e.turns){const e=Od(t);if(e instanceof X||e instanceof un||e instanceof cn)return e;a.push(e)}const{result:r}=e;return{title:t,home:i,visitor:s,turns:a,result:r}}),(e=>({title:e.title,home:vu(e.home),visitor:vu(e.visitor),turns:e.turns.map(Md),result:e.result})),"title"),qd="SKILL",Kd="LIST",Ud="CHARACTOR",zd="NOTHING",Jd="INTERRUPTION",Qd="SURRENDER",ep="BACK",tp=e=>async(t,i)=>{const s=Vd(i);for(;;){const a=ie(t).filter((e=>e.mpConsumption<=t.mp)).filter((e=>!G(Te,t)||e.magicType===$e)).map((e=>({value:e.name,label:e.name})));a.push({value:ep,label:"戻る"});const r=await e.select("Skillを選んでください",a);if(r instanceof ou||r===ep)return null;const n=ei.get(r);if(!n)return await e.notice(`${r}というskillはありません`),null;if("SKILL_TO_FIELD"===n.type){const s=Bd(i,t,n,new Date,{times:1,damage:1,accuracy:1});await e.notice("効果"),await e.notice(`天候: ${s.field.climate}`);const a=await e.confirm("実行しますか？");if(!(a instanceof ou)&&a)return Bd(i,t,n,new Date,du())}else{const{receiverCount:a}=n,r=s.sortedCharactors.map((e=>Q(e))),o=await e.multiSelect(`対象を${a}体まで選んでください。未選択でSkillを選び直せます`,a,r);if(o instanceof ou||0===o.length)continue;const l=ee(s.sortedCharactors,o);if(l.length!==o.length)throw new Error("選択したキャラクターが存在しません");const c=Fd(i,t,n,l,new Date,{times:1,damage:1,accuracy:1});await e.notice("効果"),await l.reduce(((t,i)=>t.then((async()=>{const t=c.sortedCharactors.find((e=>e.isVisitor===i.isVisitor&&e.name===i.name));t&&await e.notice(`${t.name}: hp: ${t.hp}`)}))),Promise.resolve());const u=await e.confirm("実行しますか？");if(!(u instanceof ou)&&u)return Fd(i,t,n,l,new Date,du())}}},ip=e=>async t=>{const i=Vd(t);await e.notice("以下の順番でターンが進みます"),await i.sortedCharactors.reduce(((t,i,s)=>t.then((async()=>{const t=i.isVisitor?"VISITOR":"HOME";await e.notice(`${s+1}. ${i.name}(${t}) hp:${i.hp} mp:${i.mp}`)}))),Promise.resolve())},sp=({select:e,notice:t})=>async i=>{const s=Vd(i),a=s.sortedCharactors.map((e=>Q(e))),r=await e("対象を選んでください",a);if(r instanceof ou||!r)return;const n=ee(s.sortedCharactors,[r]);if(1!==n.length)throw new Error("選択したキャラクターが存在しません");const o=n[0];await t(`名前: ${o.name}`),await t(`HP: ${o.hp}`),await t(`MP: ${o.mp}`),await t(`WT: ${o.restWt}`),await t("ステータス:"),await o.statuses.reduce(((e,i)=>e.then((()=>t(`  - ${i.status.label}(${i.restWt})`)))),Promise.resolve()),await t(`種族: ${o.race.label}`),await t(`祝福: ${o.blessing.label}`),await t(`装備: ${o.clothing.label}`),await t(`武器: ${o.weapon.label}`);const l=se(o);await t("能力:"),await t(`  MaxHP: ${l.MaxHP}`),await t(`  MaxMP: ${l.MaxMP}`),await t(`  STR: ${l.STR}`),await t(`  VIT: ${l.VIT}`),await t(`  DEX: ${l.DEX}`),await t(`  AGI: ${l.AGI}`),await t(`  AVD: ${l.AVD}`),await t(`  INT: ${l.INT}`),await t(`  MND: ${l.MND}`),await t(`  RES: ${l.RES}`),await t(`  WT: ${l.WT}`);const c=te(o);await t("アビリティ:"),await c.reduce(((e,i)=>e.then((()=>t(`  - ${i.label}`)))),Promise.resolve());const u=ie(o);await t("スキル:"),await u.reduce(((e,i)=>e.then((()=>t(`  - ${i.label}`)))),Promise.resolve())},ap=e=>async(t,i)=>{for(;;){switch(await e.select("どうしますか？",[{value:qd,label:"Skillを選ぶ"},{value:Kd,label:"一覧を見る"},{value:Ud,label:"Charactorを見る"},{value:zd,label:"何もしない"},{value:Jd,label:"戦いを中断する"},{value:Qd,label:"降参する"}])){case qd:{const s=await tp(e)(t,i);if(s)return s;break}case Kd:await ip(e)(i);break;case Ud:await sp(e)(i);break;case zd:return Ld(i,t,new Date,du());case Qd:{const s=await e.confirm("降参してもよいですか？");if(!(s instanceof ou)&&s)return Zd(i,t,new Date,du());break}case Jd:return null}}},rp=(e,t)=>async i=>{const{turns:s}=i;for(;;){const a=Vd(i),r=Hd(a),n=Gd(i,r.restWt,new Date,du());s.push(n);const o=Hd(n);if(G(_e,o))s.push(Ld(i,o,new Date,du())),await t.save(i);else{const a=await ap(e)(o,i);if(!a)break;s.push(a),await t.save(i)}if(i.result=Yd(i),i.result!==Ed)break}await t.save(i),i.result===Ed&&await e.notice("勝負を中断しました"),i.result!==Wd&&i.result!==$d||await e.notice(`${i.result}プレイヤーの勝利です`),i.result===Nd&&await e.notice("勝負は引き分けです")},np=(e,t)=>async(i,s,a)=>{const r=await Tu(t),n=await Xd(t),o=await r.importJson(s);if(!o)return void await e.notice("homeのデータがありません");if(o instanceof X||o instanceof un||o instanceof fu||o instanceof cn)return void await e.notice("homeのpartyは不正なデータです");const l=await r.importJson(a);if(!l)return void await e.notice("visitorのデータがありません");if(l instanceof X||l instanceof un||l instanceof fu||l instanceof cn)return void await e.notice("visitorのpartyは不正なデータです");const c=((e,t,i)=>({title:e,home:{name:t.name,charactors:t.charactors.map((e=>ae(e,!1)))},visitor:{name:i.name,charactors:i.charactors.map((e=>ae(e,!0)))},turns:[],result:Ed}))(i,o,l);c.turns.push(((e,t,i)=>({datetime:t,action:{type:"TIME_PASSING",wt:0},sortedCharactors:jd([...e.home.charactors.map(J),...e.visitor.charactors.map(J)]),field:{climate:Dd(i)},randoms:i}))(c,new Date,du())),await rp(e,n)(c)},op=(e,t)=>{const i=new L("battle");return i.command("histories").description("list histories").action((async()=>(async(e,t)=>{const i=await Xd(t),s=await i.list();await s.reduce(((t,i)=>t.then((()=>e.notice(`- ${i}`)))),Promise.resolve())})(e,t))),i.command("history").argument("<title>","party name you looking").description("look party as you like").action((async i=>(({notice:e},t)=>async i=>{const s=await Xd(t),a=await s.get(i);a?a instanceof X||a instanceof un||a instanceof fu||a instanceof cn?await e(`${i}は不正なデータです。取り出せません。`):(await e(`名前: ${a.title}`),await e(`home: ${a.home.name}`),await a.home.charactors.reduce(((t,i)=>t.then((async()=>{await e(`  - ${i.name}`),await e(`    種族: ${i.race.label}`),await e(`    祝福: ${i.blessing.label}`),await e(`    装備: ${i.clothing.label}`),await e(`    武器: ${i.weapon.label}`)}))),Promise.resolve()),await e(`visitor: ${a.visitor.name}`),await a.visitor.charactors.reduce(((t,i)=>t.then((async()=>{await e(`  - ${i.name}`),await e(`    種族: ${i.race.label}`),await e(`    祝福: ${i.blessing.label}`),await e(`    装備: ${i.clothing.label}`),await e(`    武器: ${i.weapon.label}`)}))),Promise.resolve()),await e(`ゲーム結果: ${a.result}`)):await e(`${i}という名前のタイトルは存在しません`)})(e,t)(i))),i.command("start").argument("<title>","building party name").argument("<home>","building party file path").argument("<vistor>","building party file path").description("build a party as you like").action((async(i,s,a)=>np(e,t)(i,s,a))),i.command("resume").argument("<title>","resume battle title").description("resume battle").action((async i=>((e,t)=>async i=>{const s=await Xd(t),a=await s.get(i);a?a instanceof X||a instanceof un||a instanceof fu||a instanceof cn?await e.notice(`${i}のbattleは不正なデータです`):await rp(e,s)(a):await e.notice(`${i}というbattleはありません`)})(e,t)(i))),i.command("export").argument("<title>","export battle history").argument("<file>","export file").description("export battle history").action((async(i,s)=>((e,t)=>async(i,s)=>{const a=await Xd(t),r=await a.get(i);r?r instanceof X||r instanceof un||r instanceof fu||r instanceof cn?await e.notice(`${i}のbattleは不正なデータです`):await a.exportJson(r,s)instanceof _u?await e.notice(`${i}を出力できませんでした`):await e.notice(`${i}を${s}に出力しました`):await e.notice(`${i}というbattleはありません`)})(e,t)(i,s))),i},lp=".json",cp=process.env["win32"===process.platform?"USERPROFILE":"HOME"],up=l.join(cp||"",".kniw"),hp=async e=>{o.existsSync(e)||await o.promises.mkdir(e)},dp=e=>async t=>hp(l.join(e,t)),pp=(e,t,i,s)=>l.join(e,t,i+s),mp=e=>async(t,i,s)=>o.promises.writeFile(pp(e,t,i,lp),JSON.stringify(s)),fp=e=>async t=>{try{return(await o.promises.readdir(l.join(e,t))).filter((i=>((e,t,i)=>o.statSync(l.join(e,t,i)).isFile()&&new RegExp(`.*${lp}`).test(i))(e,t,i))).map((e=>l.basename(e,lp)))}catch(e){if("ENOENT"===e.code)return[];throw e}},gp=e=>async(t,i)=>{try{const s=await o.promises.readFile(pp(e,t,i,lp),{encoding:"utf8"});return JSON.parse(s)}catch(e){if("ENOENT"===e.code)return null;throw e}},bp=e=>async(t,i)=>{try{await o.promises.unlink(pp(e,t,i,lp))}catch(e){if("ENOENT"!==e.code)throw e}},wp=async(e,t)=>{const i=JSON.stringify(e);try{return await o.promises.writeFile(t,i),null}catch(e){return new _u(t,e,`${t}へコピーに失敗しました`)}},yp=async e=>{try{const t=await o.promises.readFile(e,{encoding:"utf8"});return JSON.parse(t)}catch(e){if("ENOENT"===e.code)return null;throw e}};(async()=>{const e=await(async e=>(await hp(e),{checkNamespace:dp(e),save:mp(e),list:fp(e),get:gp(e),remove:bp(e),importJson:yp,exportJson:wp}))(up),t=((e,t)=>{const i=new L;return i.addCommand(ti(e)),i.addCommand(ri(e)),i.addCommand(Ws(e)),i.addCommand($s(e)),i.addCommand(Ns(e)),i.addCommand(Vs(e)),i.addCommand(mu(e,t)),i.addCommand(xu(e,t)),i.addCommand(op(e,t)),i})(uu,e);t.parse(process.argv)})();
