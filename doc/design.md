
# design doc

## 機能
- yargs
  コマンドラインのインタフェースを作りやすく
- prompt
  対話側のスクリプト支援
- chalk
  色つけ
  その他、装飾関連はなんか探したい
- homeディレクトリ
  コマンドの内容を保存していく感じ
  home/.kniw/databases.json

## 使い方
- charactor
  キャラを登録する
  ローカルのhomeディレクトリに登録していくイメージ
  home/.kniw/charactor.json
  全部メモリに読み込んで、編集時には全とっかえする感じ
- party
  登録したキャラを使ってpartyを作ることができる
  作ったpartyはjsonファイルとして出力され、保存先を選べる
- battle
  作ったpartyを使って、バトルができる


## charactor
対話型で選択肢と、キャラ名を選んで入力していく。
ストレージ上で同一のキャラ名はNG
サブコマンドとして、list,describe,create,editなど

## party
キャラ名を選んでいってjsonを吐き出すためのコマンド
編集とかlistとかいるかな。
describe -file=<file>みたいな感じで、構築を確認するのは必要か
いや、これも編集があっていいし、なんなら、基本的に
home/.kniw/party.jsonに保存する形がいい。
で、party名も入力する必要がある。
list,describe,edit,create,export
describeはfileの中身を見る感じのこともできる

## battle
対戦なので本番
２つのpartyファイルを読み込んで対戦開始
キャラのwait turnを参照して次に順番が回ってきたやつの行動オプションを提示する。
アクションを実行すると、場、あるいはいずれかのキャラクターのHPなどが変化し、HPが0になると死亡
勝利条件は、基本的に殲滅か降参。


## モジュール

- 技
  効果を関数で表現する

- 武器
  技をもつ
  キャラに対するパラメータバフを持つ
  武器、防具、エレメントの3種類としたい

- キャラ
  武器を装備し、パラメータバフと技を利用可能になる

battleアクション時は、そのターンのキャラから技を選び、excute、あるいはdryrun関数の中で次の効果を得る。
dryrunの中には乱数や複数回行動がないが、excuteはあるイメージ

excuteの中で、キャラの状態に変化を及ぼし、その結果で、全体stateを更新していく



