(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[141],{6698:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/party",function(){return t(8478)}])},8478:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return pages_party}});var r=t(5893),a=t(7294),s=t(9332),i=t(1817),c=t(4e3),x=t(4359),h=t(8692),l=t(193),o=t(5501),u=t(1664),j=t.n(u),d=t(5541),p=t(1039),f=t(2274);let PartyList=()=>{let{partyRepository:e}=(0,f.j)(),n=(0,p.useLiveQuery)(()=>e.list(),[]);return(0,r.jsxs)(i.xu,{children:[(0,r.jsx)(j(),{href:{pathname:"/"},children:(0,r.jsx)("a",{children:"戻る"})}),(0,r.jsx)(i.xu,{children:(0,r.jsxs)(d.aV,{children:[(0,r.jsx)(d.HC,{children:(0,r.jsx)(j(),{href:{pathname:"party",query:{name:"__new"}},children:(0,r.jsx)("a",{children:"新しく作る"})})},"party-new"),n&&n.map((e,n)=>(0,r.jsx)(d.HC,{children:(0,r.jsx)(j(),{href:{pathname:"party",query:{name:e}},children:(0,r.jsx)("a",{children:e})})},"party-".concat(n)))]})})]})};var y=t(4225),_=t(9631),m=t(935),w=t(9671),g=t(2438),E=t(5340);let PartyNew=()=>{let{partyRepository:e,dialogue:n}=(0,f.j)(),[t,s]=(0,a.useState)({name:"",charactors:[]}),importJson=async()=>{let t=await (0,m.n)(n,e)("取り込むと入力したデータが削除されますがよいですか？");t instanceof o.vW||t instanceof o.ow||t instanceof E.$b||t instanceof g.m||t instanceof E.Xs||t instanceof w.hi||s(t)};return(0,r.jsx)(_.x,{exist:!1,party:t,inoutButton:(0,r.jsx)(y.z,{type:"button",onClick:importJson,children:"Import"})})},PartyExsiting=e=>{let{partyName:n}=e,{partyRepository:t}=(0,f.j)(),a=(0,p.useLiveQuery)(()=>t.get(n),[n]);return a instanceof g.m||a instanceof E.Xs||a instanceof w.hi||a instanceof E.$b?(0,r.jsxs)(i.xu,{children:[(0,r.jsx)(c.x,{children:a.message}),(0,r.jsx)(j(),{href:{pathname:"party"},children:(0,r.jsx)("a",{children:"戻る"})})]}):a?(0,r.jsx)(_.x,{exist:!0,party:a,inoutButton:(0,r.jsx)(y.z,{type:"button",onClick:()=>t.exportJson(a,""),children:"Export"})}):(0,r.jsxs)(i.xu,{children:[(0,r.jsx)(c.x,{children:"".concat(n,"というpartyは見つかりません")}),(0,r.jsx)(j(),{href:{pathname:"party"},children:(0,r.jsx)("a",{children:"戻る"})})]})};var pages_party=()=>{let e=(0,s.useSearchParams)(),n=e.get("name"),[t,u]=(0,a.useState)(null);if((0,a.useEffect)(()=>{(async()=>{let e=await (0,l.a)(),n=await (0,x.h4)(e),t=await (0,h.h4)(e);u({partyRepository:n,battleRepository:t})})()},[]),!t)return(0,r.jsx)(i.xu,{children:(0,r.jsx)(c.x,{children:"loading..."})});let j={...t,dialogue:o.OR};return n?"__new"===n?(0,r.jsx)(f._,{io:j,children:(0,r.jsx)(PartyNew,{})}):(0,r.jsx)(f._,{io:j,children:(0,r.jsx)(PartyExsiting,{partyName:n})}):(0,r.jsx)(f._,{io:j,children:(0,r.jsx)(PartyList,{})})}}},function(e){e.O(0,[905,154,974,774,888,179],function(){return e(e.s=6698)}),_N_E=e.O()}]);