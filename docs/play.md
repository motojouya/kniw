
# 遊び方

## 事前準備

ゲームで相手と戦う前に、幾つか準備が必要です。  

### a. フィールドを組み立て、駒を用意する
フィールドは、[フィールド](field.md)を参照して組み立ててください。

### b. ゲームのルールを決める
ゲームルールは、kniwが管理していない高さの概念や、移動に関する制約などの取り決めです。  
装備によって推奨される移動範囲はkniwコマンドで提示されますが、プレイヤーが好きに取り決めてもかまいません。  
障害物を飛び越えたり、タクティクスオウガ運命の輪で追加されたランパートフォースなども同様です。  
弓矢の到達範囲も、タクティクスオウガでは、高さによって伸びますが、こちらも任意です。  

また、パーティに参加できる人数も決めておきます。  
ただし、パーティの人数に関しては12人を最大としています。  

### c. パーティを組む
パーティは`kniw`コマンドで組むことができます。

1. キャラクターの作成
  まずはキャラクターを作ります。名前は、アルファベットと数字のみ利用可能です。
  ```
  kniw charactor hire <name>
  ```

  すると、[種族](../src/data/acquirement/race)、[祝福](../src/data/acquirement/blessing)、[装備](../src/data/acquirement/clothing)、[武器](../src/data/acquirement/weapon)が選択できます。  
  選択した装備は、組み合わせができないものがあるので、注意してください。  

  キャラクターはパーティに加入させる人数分作っておきます。

  作ったキャラクターは、以下コマンドで確認できます。
  ```
  kniw charactor list
  kniw charactor status <name>
  ```

2. パーティの作成
  キャラクターを作ったら、パーティを作ります。
  ```
  kniw party build <name>
  ```

  キャラクターの一覧が表示されるので、加入させたいキャラクターを全て選択してください。  
  選択できる最大は12名です。

  作ったパーティは、以下コマンドで確認できます。
  ```
  kniw party list
  kniw party status <name>
  ```

3. パーティファイルの出力
  ゲームを開始する際には、パーティの内容が記載されたファイルが必要です。  
  任意の場所に、exportしておきます。  
  ```
  kniw party export <name> <path/to/file>
  ```

  これで準備完了です。

## ゲーム開始
ゲームの進行、kniwコマンドで管理できるものできないもの。決着の仕方、中断、各種選択肢。

いよいよゲーム開始です。  
ゲームの進行は大まかに以下の形です。  
1. ゲーム開始  
2. ターンに当たったキャラクターが表示  
3. キャラクターのアクションとフィールド上での移動  
4. ターン終了  
5. 2-4の繰り返し  
6. どちらかの全てのキャラクターのHPが0になるか、降参すると決着  

順番に説明します。

### ゲーム開始

以下のコマンドで開始できます。
```
kniw battle start <title> <path/to/home/party> <path/to/visitor/party>
```
titleは中断したとき、ゲーム内容をあとから参照するときなどに使います。任意の名前です。

### ターン開始
ゲームが開始されると、まず特定のキャラクターにターンが回ってきます。  
キャラクターには、WT(ウェイトターン)が設定されており、この値は選択したアクションや装備によって違います。  
このWTの消化が早いほど(WTが少ないほど)、ターン順番が先に回ってきます。  

### アクション
ターンではそのキャラクターのスキルを選択し、それを誰に放つか決定します。  
スキルの中には、キャラクターではなく天候に影響するものもあります。  

放つ際に、物理攻撃は隣接したキャラクターにしか放てず、弓矢や魔法であれば到達限界距離があります。  
この辺りの設定は`kniw`コマンドから提示されはしますが、任意です。  

アクションを実行すると、相手のキャラクターのHPが減少します。  

アクションの中には、MPを消費するものもあり、消費の大きいもののほうが威力が高いです。  
ただし、MPはターンの経過によってのみ回復し、ゲーム開始時は0です。

### ターン終了
アクションが終るとターン終了です。  
なお、ターン中は全てのキャラクターのステータスを参照できます。  
アクションする際に、どうするか検討する資料になるはずです。  

このターンを繰り返していきますが、次に動けるキャラクターはWTが最も少ないキャラクターです。

### 決着
どちらかのプレイヤーが降参するか、あるいはどちらかのプレイヤーの全てのキャラクターのHPが0になると決着です。
それではEnjoy!

