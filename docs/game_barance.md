
以下に検討してみたが、まずはスキルとアビリティをリストアップして仕様を決定
で、それらを装備に割り振っていく。これである程度バランスが見えてくるので、その後数値の調整


# 武器
各国のいろんな武器  
材質  
属性付与。祝福と違うので、炎とか風とか  
杖は宝石の名前とか、ハリーポッターの杖をモデルにしてもいい  

## thinking

- 近接  
なた  
ククリ  
マチェット  
日本刀  
小刀  
いわゆる剣  
片手剣  
両手剣  
クレイモア  
曲刀  
青龍刀  
レイピア  
カタール手に持って握って振り回すやつ。格闘武器のやつ  
ウルミ 曲がる剣  
チャクラム  
ブーメラン  
ソードブレイカー  
ナイフ  
くない  
槍  
薙刀  
ハルバード斧の薙刀版  
斧  
ハンマー  
モーニングスター  
フレイル  
鞭  
棒  
三節棍  
ヌンチャク  

http://asher7.fc2web.com/frmWeapon.htm
https://www.touken-world.jp/world-sword-illust/


弓  
ボーガン  
和弓  
アーチェリー  
ショートボウ -> まじにあるらしい  
ロングボウ -> まじにあるらしい  

杖  
ダイヤモンド  
サファイア  
ルビー  
エメラルド  
スピネル  
トルマリン  
珊瑚  
ヒスイ  
ガーネット  
ラピスラズリ  
真珠  
オパール  

材質  
鉄  
銅 鉄より重くて軟かい  
鋳鉄  
ウーツ鋼  
ミスリル  
ゴールド  
シルバー  
チタン  



杖
https://dic.pixiv.net/a/%E6%9D%96

ステッキ
  攻撃魔法弱
  範囲魔法
  デバフ
ロッド
  攻撃魔法弱
  攻撃魔法強
  状態異常
スタッフ
  攻撃魔法弱
  攻撃魔法強
  デバフ
ワンド
  攻撃魔法弱
  範囲魔法
  状態異常
メイス
  攻撃魔法弱
  状態異常
  物理強め

サーベル
  鉱石のサーベル x 属性
レイピア
  鉱石のレイピア x 属性
フレイル
  鉱石のフレイル x 属性

サーベルとシールド
  回避、押す、大技
レイピアとシールド
  回避、押す、大技
フレイルとシールド
  回避、押す、大技

回避、命中、大技、範囲技、範囲突き(槍)、中距離(鞭)
- 大技+命中+範囲技
これに装備側のバフスキルを加えるイメージ

斬撃
  短距離
    高威力
    低wt
    防御的な武器 命中ではなく回避のスキルが突く
  中距離 ウルミー
刺突
  短距離
    高威力
    低wt
    防御的な武器 命中ではなく回避のスキルが突く
  中距離 槍
打撃
  短距離
    高威力
    低wt 棒とか
    防御的な武器 命中ではなく回避のスキルが突く
  中距離 鞭



# 装備
まずは材質  
属性  
各国の衣装  
装飾付きの服。ウェディングドレスとか？  


絹  
麻  
綿  
革  
鉄  
鎖帷子  
組紐  


巫女の服  
アオザイ  
チャイナドレス  
https://ja.wikipedia.org/wiki/%E7%A5%AD%E6%9C%8D  
衣装というより、化粧を全身に塗るタイプとか  
烏帽子  
白装束  
黒装束  

鉢巻  
日本の甲冑  
ヨーロッパの甲冑  
小手だけ  

もっと属性が欲しいな  
それこそ、宝石を埋め込むか  
あるいは何かの動物の材質や、それをモチーフにしたやつ  
ヒョウ皮のマントとか -> wtが減るみたいな  

ライオン  
ヒョウ  
タカ  
ワニ  
サメ  
ゾウ  
亀  
ヤマアラシ  
アルマジロ  
クマ  

堅い樹木  
革の堅い植物  
毒の植物  


鎧
- 各材質の鎧
  - ミスリルは魔法体制
  - 鋼鉄は物理の刺突と斬撃
  - ファーコートは打撃
  - 各宝石の鎧
ローブ
- 各宝石のローブ
  属性がよくなる
  属性吸収
軽装
- 各動物のローブ
  対応するステータスが上がる
  - ゾウ革
特殊装備
- 力襷
  攻撃が上がるが、防御はほぼなし
- ペイント
  攻撃と回避が上がるが、防御はほぼなし
- 司祭の服
  体力、魔法体制が上がる
- 特殊アビリティ
  - 時間回復
  - 時間MP回復
  - 矢かわし。風纏の衣
  - 



# スキル
攻撃力アップとか  
防御力アップとか  
装備に備え付けという立ち位置なので  
スキル次第で装備のパターンをきめてもいいのと、特定の装備でしか使えないものは絶大な効果、例えば攻撃力2倍とかでもいいかも  

## thinking
攻撃  

切る  
刺す  
殴る  
投げる  
射る  
魔法  

防御無効の攻撃  
威力が高い攻撃  

魔法  
範囲  
局所集中  
刃というか貫いて飛んでくの  
広がっているタイプ  

バフ系  
攻撃力アップ、ダウン  
防御力アップ、ダウン  
wt消費アップ、ダウン  
魔法攻撃力アップ、ダウン  
命中率アップ、ダウン  

スリップダメージ　毒  

状態異常  
毒  
麻痺  
ヘヴィ  
沈黙  
恐怖  
スロウ  
クイック  
状態異常とかバフは、運命の輪に準ずる感じで配るか  
WTリセット->計算がむずいね。行動分の加算WTまでは記録しづらいが。前のターンのを見れば行ける？  
WT0  
MP0  

天候  
雨    
晴れ  

属性  
大地  
  炎  
  岩  
海  
  水  
  氷  
空  
  風  
  雷  

スキルは、武器に対して2つ、装備に対して一つつけたい。
あとは種族でも一つ防御的なスキルをつけてもいいかも。それで4つ。
ポケモンもtactics ogre rebornも4つなのでなんかちょうどよさそう。

ステータス回復系もいるな
hp回復
各種ステータス除去

杖は攻撃弱いが必須で、強いか範囲と加えてデバフ
物理武器はアクションと、回避か精神集中、デバフを一つつけたいが
防具はデバフを一つ

バランスとしては、攻撃手段が2つと状態異常系が2つ。それぞれどちらかを選べるようにしたい。
攻撃は、強い弱い、範囲、到達距離という3軸あるので、その中で2つの要素しか選べない

あとは名前か

基本攻撃魔法 + 応用攻撃魔法 + 補助魔法という組み合わせで、応用と補助を2つずつなので2x2で4パターンか
基本的には4パターンの武器を用意しつつという感じかな


- 炎
  - 攻撃弱い
  - 攻撃強い
  - 範囲攻撃
  - 恐怖
  - 魔法防御力up
  - 魔法防御力down
- 岩
  - 攻撃弱い
  - 攻撃強い
  - 範囲攻撃
  - 毒
  - 防御力up
  - 防御力down
- 水
  - 攻撃弱い
  - 攻撃強い
  - 範囲攻撃
  - 回復
  - 攻撃力up
  - 攻撃力down
- 氷
  - 攻撃弱い
  - 攻撃強い
  - 範囲攻撃
  - 沈黙
  - スロウ
  - 雨
- 風
  - 攻撃弱い
  - 攻撃強い
  - 範囲攻撃
  - ヘヴィ
  - クイック
  - 晴れ
- 雷
  - 攻撃弱い
  - 攻撃強い
  - 範囲攻撃
  - 麻痺
  - 魔法攻撃力up
  - 魔法攻撃力down
- 物理
  - 殴る
  - めっちゃ殴る -> 威力が上がる
  - 切る
  - めっちゃ切る -> 範囲が4に広がる
  - 突く -> これだけ対象が2つ
  - めっちゃ突く -> 威力ではなく範囲が3に
  - 投げる -> だれでもできる
  - 射る
  - 押す -> 盾でノックバック
  - めっちゃ射る -> 威力が上がる
  - 回避の構え 回避up
  - 精神集中 命中up

物理に関しても、
基礎攻撃 + 応用攻撃 + 補助だけど。補助は1パターンになりがちだよな。
あとは、基礎魔法をつけるパターンか

物理の補助は、押す、回避、精神集中とかかな
こちらは、ステータスで差別化させるか
基本的には威力と重量、あとは回避力とかかな。
パリィの性能をつけておけば、差別化としては大きい。剣は盾とセットのイメージかな
剣と盾のセットは、威力は低いがパリィの確率が大きいとか

基礎攻撃 + 応用攻撃 + 補助
基礎攻撃 + 属性魔法 + 補助
で、打撃、刺突、斬撃の3種類か。パリィも、それぞれに対してあったほうがいいかもな。
盾なら、打撃、斬撃。いや、ややこしいな。わかりづらいし。

それぞれに対する耐性はやっぱあったほうがいいね。
打撃耐性、斬撃耐性、刺突耐性
これは装備に持たせたい。

属性x武器属性で考えるか。
打撃に属性をもたせるとして、属性装備と同属性だとダメージが上がる仕組みが欲しいな

装備側に補助魔法をもたせたい。
状態異常は強すぎるので、魔法攻撃upとか打撃upとかそういうのかな

杖は、属性に対して石があり、skillの種類に対して杖素材があるみたいなイメージがいいかな

武器に関しては、属性魔法をつけられるのはオーソドックスな剣、鎚、槍で、他の武器には、応用攻撃をつけて上げたい。
剣は大剣と、盾セットと。
これでだいぶ武器は色々できるはず
これで十分、武器種は確保できそう。応用攻撃にバリエーションをもたらす感じで

チャクラムとかくないは、投げ武器にもできるはずなので、近接+投げる動作という意味にしてもいい。ただし武器消費は面倒なのでしないと


# アビリティ
これもスキルと同様かも  
祝福に対してできてもいいかも  
大地なら微回復、海なら耐久up、風は移動upとか  


まずは列挙してみて、それをどの装備につけるかマッチングする感じかな。  
不足があったり、バランスが悪ければどちらかをスキルなり、装備なりを補うと。  

装備によるダメージや攻撃力のupは50%-200%ぐらいがいいのではという感じかな。  
んで相性がすんげぇ悪いパターンだと4倍ダメージになっちゃうとか。ただ、こういうパターンはすごく強力なスキルがついてて欲しいよな  

スキルやアビリティのカテゴライズができたら、そのカテゴリに従って、どういうカテゴリがどのカテゴリに強いかみたいな力関係ができるはず。  
その力関係から、ダメージの振れ幅をどこからどこまでかがわかるはずなので、それでダメージ量を想定どおりに持っていけばいいはず。  

特定のキャラが特定のキャラにスキルを使ったときの想定ダメージ幅をテストケースで書いてみるか。  
それで幅が許容範囲になるように定義する。asert.equals(min < value < max, true)みたいな感じでかければいいはず。  
その幅が許容できるように各種パラメータをいじると  


アビリティは装備についてる感じかなぁ  

アビリティも、各acquirementに一つついてるかついてないかかな。  
どちらかというと、ステータスの補強がない場合に、それを補う形が望ましい。  


## thinking
カウンター
  これ実装すんの手間だなぁ。あとキャラがモーションが無いのでカウンター感がない。
ランパートフォース
ノックバック
  -> 名前だけつけてもいいが、確率で運用はできないね。盾があれば盾は着いている感じかな
    どちらかというとスキルにつけたほうがいいかも
特定の祝福のアップ
  特定の魔法攻撃力がアップ
  特定のパラメータアップ
ダメージを受けるとHP回復状態
MP吸収
特定の武器を使った際の攻撃力upとか
MP回復up
hpターン回復


けっこう強いので装備自体の強さは下げていいはず。
強いものをもっと用意できれば、全てにつけて上げられる。できればそうしたいが
とはいえ、アビリティなしの装備は数値が高い。ということにしておけば、それはそれで多様性

- MP吸収
- MPターン回復up
- HPターン回復
- 魔法攻撃up 効果は著しく。その代わり防御とか他が低いイメージ 体にペイントとか
- 攻撃up
- 魔法防御up
- 防御up
- 矢かわし 完全に回避できる
- 属性吸収でHP回復
- 属性強化

# ステータス
毒
クイック
スロウ
麻痺
スリープ
沈黙
恐怖
ヘヴィ
HP回復状態


# 進め方

属性耐性は6属性で。これで祝福の力関係を緩和する。あるいは突破力をあげるイメージ
前衛2魔法使い1弓使い1をワンチームとし、2チームをパーティーに入れるのが基本
前衛は基本的に武器にランパードフォースがついてるイメージ。近接武器は。
ついてないのはダガーぐらい。
前衛は耐久高めだが、それをちょっと削って攻撃的にしてもいい。

作業順序としては
1. 新しいパラメータとして、物理耐性、魔法属性値を実装
2. ステータスとアビリティの実装。中身は適当で
3. ダメージ量調整用テストと、それに使う装備の実装
4. ダメージ調整
5. 基準が決まったので、すべての装備を実装

テストケースとしては
- 前衛へのダメージ
- 後衛へのイメージ
- バフ、デバフがかかった状態
- 属性、祝福相性のいい、悪い
- 物理特性耐性のいい、悪い
- 強い攻撃
- 魔法、物理
ほかにもありそうだが、上記に対してうまくいくように調整していく


想定ダメージ調整用テスト
- 前衛、後衛
  - 後衛へのダメージをHPの27-33%
    - 武器の振り幅として弱いやつは27-30、強いのは30-33ぐらいにしたいが
  - 前衛へはその2/3程度を想定
- バフ、デバフがかかっている、かかっていない
  - デバフは1.5倍程度
  - バフは2/3倍程度
- 属性、祝福相性のよい悪い普通の魔法攻撃
  - 属性相性がいい場合は2倍程度を想定
  - 属性相性が悪い場合は半分程度を想定
- 物理耐性特性のあるなしの攻撃
  - 物理耐性がある場合は、半分程度を想定
- 強い攻撃弱い攻撃
  - 強い攻撃は2倍程度を想定

以下の感じで4x3で12パターン？
- キャラメイク特性
  - 前衛物理耐性あり
  - 前衛物理耐性なし
  - 弓使い
  - 魔法つかい
- 魔法属性
  - 属性相性よい
  - 属性相性悪い
  - 属性相性なし

弓使いがどうしても刺突になるので、前衛もレイピアにするか
そんで前衛が鋼鉄の鎧にすると
属性相性で言うと、魔法剣と魔法使いで違うわな
いずれにしろ、魔法攻撃なのでなぁ
前衛で属性サーベル持ちを設定するか

以下のイメージで行くか
- レイピア(弱め武器)
  - 前衛
    - 耐性あり
    - 耐性なし
  - 弓使い
  - 魔法使い
- 和弓(強め武器)
  - 前衛
    - 耐性あり
    - 耐性なし
  - 弓使い
  - 魔法使い
- 基本魔法
  - 前衛
  - 弓使い
  - 魔法使い
    - 属性相性よい
    - 属性相性悪い
    - 属性相性なし



バフ、デバフ、強い攻撃、弱い攻撃は以下のパターンに対してなので12パターン
- キャラメイク特性
  - 前衛物理耐性あり
  - 前衛物理耐性なし
  - 弓使い
  - 魔法つかい
- 状態とか技
  - バフ
  - デバフ
  - 強い攻撃

合計24パターンかな
これで全てとするが、計算式によっては、バフデバフ、強攻撃とかは単純計算なので考えなくてもいい

前衛
- ヒューマン
- 心の祝福
- 鎖帷子
- 盾セット

弓使い
- ヒューマン
- 心の祝福
- 軍人の制服
- ショートボウ

魔法使い
- ヒューマン
- 心の祝福
- 赤のローブ
- ルビーロッド

ステータス
- 物理攻撃up
- 物理攻撃down
- 物理防御up
- 物理防御down
- 魔法魔法up
- 魔法魔法down
- 魔法防御up
- 魔法防御down


祝福は魔法相性のために変更パターンあり
装備、武器は物理相性のために変更パターンあり

武器
- ソード＆シールド
- ルビーのサーベル
- サファイアのサーベル
- エメラルドのサーベル
- レイピア
- モーニングスター
- サムライボウ
- ルビーロッド
- サファイアロッド
- エメラルドロッド

装備
- ミスリルの鎧
- 鋼鉄の鎧
- 毛皮の鎧
- 革と鉄の鎧
- 鎖帷子
- 赤のローブ
- 青のローブ
- 緑のローブ
- 司教の服
- 軍人の制服

スキルはけっこうな数用意しとかないといけないか
魔法を1属性にして、ほかは装備の変更でテストしたら楽かも。

  - 火
    - flame fall  
      通常ダメージ  
      対象1  
    - cross fire  
      通常ダメージ  
      対象5  
    - small heat  
      高ダメージ  
      対象1  
    - ghost fire  
      恐怖  
      対象1  
    - fire wall  
      魔法防御up  
      対象1  
      装備用なので武器につけない  
    - flame digger  
      魔法防御down  
      対象1  
  - 水
    - gun water  
      通常ダメージ  
      対象1  
    - flash flood  
      通常ダメージ  
      対象5  
    - down rushing  
      高ダメージ  
      対象1  
    - quench  
      HP半分回復  
      対象1  
    - water cutter  
      物理攻撃up  
      対象1  
      装備用なので武器につけない  
    - sticky rain  
      物理攻撃down  
      対象1  
  - 風
    - wind edge  
      通常ダメージ  
      対象1  
    - dance leaves  
      通常ダメージ  
      対象5  
    - tornado  
      高ダメージ  
      対象1  
    - heavy wind  
      眠り  
      対象1  
    - clear cloud  
      天候晴  
      対象1  
      装備用なので武器につけない  
    - quick  
      クイック状態  
      対象1  
- 物理
  - 打撃
    - 殴る
    - 投げる
    - light meteor  
      強い攻撃  
    - gravel wall  
      範囲攻撃、周囲  
    - 押す  
      盾専用  
  - 斬撃
    - 切る
    - 投げる
    - guillotine of giant  
      強い攻撃  
    - sword dance  
      範囲攻撃、周囲  
  - 刺突
    - 突く
    - blind bull  
      強い攻撃  
    - saturn ring  
      範囲攻撃  
    - 射る
    - multi shot  
      範囲攻撃  
    - hard rain  
      強い攻撃  
      弓専用  
  - その他
    - 逃げ腰  
      回避up
    - 精神集中
      命中up
    - 威圧  
      回避down
    - 幻惑
      命中down


## 残作業

- 属性相性と、物理耐性のダメージ実装 done
 - 強攻撃の実装 done
- ダメージ調整 done
- ダメージ以外のステータス、特にWT調整 done
- skillごとのWT調整 done
- 命中率の実装 pending
- mp消費とmp回復の実装 done
- バフ、デバフのダメージ効果実装 -> それぞれ1.2倍とか0.8倍とかでいいと思う done
- その他TODO潰し
  - 日付の例外処理
  - 移動、技範囲などフィールド上で管理する数字の表示
  - restWtが一致している場合の優先度
    physicalの回避率的な数字を見てもいいかも。最終的にはhpが多い方とか
  - file_repository.createCopyの例外パターン列挙
- ability実装
  - mpGainPlus.ts
  - rampartForce.ts
    実装というよりステータスに表示したい
  - shootingGuard.ts
- 他acquirementの実装


